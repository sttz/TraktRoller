{"version":3,"sources":["../node_modules/ste-core/dist/management.js","../node_modules/ste-core/dist/subscription.js","../node_modules/ste-core/dist/dispatching.js","../node_modules/ste-core/dist/index.js","../node_modules/ste-events/dist/events.js","../node_modules/ste-events/dist/index.js","../node_modules/ste-simple-events/dist/simple-events.js","../node_modules/ste-simple-events/dist/index.js","../node_modules/ste-signals/dist/signals.js","../node_modules/ste-signals/dist/index.js","../node_modules/strongly-typed-events/dist/index.js","TraktApi.ts","TraktScrobble.ts","../src/vnode.js","../src/options.js","../src/h.js","../src/util.js","../src/clone-element.js","../src/constants.js","../src/render-queue.js","../src/vdom/index.js","../src/dom/index.js","../src/vdom/diff.js","../src/vdom/component-recycler.js","../src/vdom/component.js","../src/component.js","../src/render.js","../src/preact.js","../node_modules/@emotion/memoize/dist/memoize.esm.js","../node_modules/@emotion/unitless/dist/unitless.esm.js","../node_modules/@emotion/hash/dist/hash.esm.js","../node_modules/@emotion/stylis/dist/stylis.esm.js","../node_modules/stylis-rule-sheet/index.js","../node_modules/create-emotion/dist/index.esm.js","../node_modules/emotion/dist/index.esm.js","ui/TraktIcon.tsx","../node_modules/prop-types/lib/ReactPropTypesSecret.js","../node_modules/prop-types/factoryWithThrowingShims.js","../node_modules/prop-types/index.js","../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.esm.js","../node_modules/create-emotion-styled/dist/index.esm.js","../node_modules/preact-emotion/dist/index.esm.js","ui/ConnectButton.tsx","ui/ScrobbleInfo.tsx","ui/Button.tsx","ui/ScrobbleHistory.tsx","ui/ScrobbleControl.tsx","ui/Popup.tsx","ui/StatusButton.tsx","TraktHistory.ts","TraktRoller.tsx","index.ts"],"names":["Object","defineProperty","exports","value","EventManagement","unsub","propagationStopped","prototype","stopPropagation","Subscription","handler","isOnce","isExecuted","execute","executeAsync","scope","args","fn","setTimeout","apply","management_1","require","subscription_1","DispatcherBase","_wrap","DispatcherWrapper","_subscriptions","Array","subscribe","_this","push","unsubscribe","sub","one","has","some","i","length","splice","_dispatch","_loop_1","ev","nargs","slice","call","this_1","cleanup","_i","_a","state_1","indexOf","asEvent","clear","EventListBase","_events","get","name","event","createDispatcher","remove","dispatcher","_subscribe","_unsubscribe","_one","_has","_clear","dispatching_1","__extends","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","constructor","create","ste_core_1","EventDispatcher","_super","dispatch","sender","arguments","dispatchAsync","EventList","EventHandlingBase","enumerable","configurable","events_1","SimpleEventDispatcher","SimpleEventList","SimpleEventHandlingBase","simple_events_1","SignalDispatcher","SignalList","SignalHandlingBase","signals_1","ste_events_1","ste_simple_events_1","ste_signals_1","VNode","options","stack","EMPTY_CHILDREN","h","nodeName","attributes","children","lastSimple","child","simple","pop","undefined","String","key","vnode","extend","obj","props","defer","Promise","resolve","then","bind","cloneElement","NO_RENDER","SYNC_RENDER","FORCE_RENDER","ASYNC_RENDER","IS_NON_DIMENSIONAL","items","enqueueRender","component","_dirty","rerender","list","isSameNodeType","node","hydrating","_componentConstructor","isNamedNode","normalizedNodeName","defaultProps","document","createElementNS","removeNode","parentNode","removeChild","setAccessor","old","style","innerHTML","__html","useCapture","toLowerCase","_listeners","ns","eventProxy","mounts","diffLevel","flushMounts","c","parent","ATTR_KEY","ret","componentRoot","out","prevSvgMode","buildComponentFromVNode","vnodeName","dom","firstChild","appendChild","vchildren","nodeValue","context","mountAll","dangerouslySetInnerHTML","originalChildren","keyed","min","len","childrenLen","vlen","j","f","vchild","keyedLen","unmountOnly","next","previousSibling","diffAttributes","attrs","recyclerComponents","createComponent","Ctor","nextBase","doRender","setComponentProps","_disable","componentWillReceiveProps","prevContext","renderMode","syncComponentUpdates","__ref","renderComponent","state","previousProps","previousState","isUpdate","base","initialBase","snapshot","rendered","inst","cbase","shouldComponentUpdate","prevProps","render","getSnapshotBeforeUpdate","childComponent","toUnmount","childProps","getNodeProps","initialChildComponent","_parentComponent","_component","baseParent","replaceChild","componentRef","t","unshift","afterUpdate","_renderCallbacks","isChild","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","componentWillUnmount","callback","diff","memoize","cache","arg","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","murmurhash2_32_gc","str","l","k","charCodeAt","toString","stylis_min","W","M","e","a","m","v","n","q","g","x","K","u","r","I","B","J","y","F","G","C","replace","N","trim","charAt","substring","ca","O","A","X","H","D","z","join","da","ea","fa","w","L","P","Y","E","ha","Q","split","ia","Z","ja","ka","test","aa","ba","la","ma","R","na","oa","S","T","Function","Boolean","U","prefix","V","use","set","hyphenateRegex","processStyleName","styleName","processStyleValue","unitless","isNaN","contentValuePattern","contentValues","oldProcessStyleValue","console","error","classnames","cls","toAdd","isArray","isBrowser","sheetForTag","tag","sheet","styleSheets","ownerNode","makeStyleTag","opts","createElement","setAttribute","nonce","createTextNode","container","head","StyleSheet","isSpeedy","tags","ctr","_proto","inject","injected","Error","speedy","bool","insert","rule","sourceMap","insertRule","cssRules","warn","_tag","flush","forEach","createEmotion","__SECRET_EMOTION__","current","currentSourceMap","insertionPlugin","stylisOptions","caches","registered","inserted","stylis","Stylis","stylisPlugins","handleInterpolation","interpolation","couldBeSelectorInterpolation","__emotion_styles","selector","mergedProps","createStringFromObject","cached","objectToStringCache","WeakMap","string","keys","stylesWithLabel","labelPattern","createClassName","styles","identifierName","oldCreateClassName","sourceMappingUrlPattern","createStyles","strings","stringMode","raw","_len","interpolations","_key","match","p1","oldStylis","css","keyframes","animation","injectGlobal","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","merge","cx","_len2","_key2","hydrateSingleId","id","hydrate","ids","chunks","querySelectorAll","insertBefore","getAttribute","emotion","global","_createEmotion","REACT_ELEMENT_TYPE","Symbol","for","isValidElement","object","$$typeof","throwOnDirectAccess","module","reactPropsRegex","index","_inheritsLoose","subClass","superClass","channel","_contextTypes","contextTypes","PropTypes","setTheme","theme","setState","testPickPropsOnStringTag","isPropValid","testPickPropsOnComponent","testAlwaysTrue","pickAssign","testFn","target","source","warnedAboutExtractStatic","createEmotionStyled","view","_createStyled","createStyled","staticClassName","stableClassName","shouldForwardProp","label","__emotion_forwardProp","propName","isReal","__emotion_real","baseTag","__emotion_base","Styled","_view$Component","componentWillMount","classInterpolations","concat","ref","innerRef","Component","displayName","withComponent","nextTag","nextOptions","Proxy","property","preact"],"mappings":"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","file":"TraktRoller.user.map","sourceRoot":"../source","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Allows the user to interact with the event.\r\n *\r\n * @class EventManagement\r\n * @implements {IEventManagement}\r\n */\r\nvar EventManagement = /** @class */ (function () {\r\n    function EventManagement(unsub) {\r\n        this.unsub = unsub;\r\n        this.propagationStopped = false;\r\n    }\r\n    EventManagement.prototype.stopPropagation = function () {\r\n        this.propagationStopped = true;\r\n    };\r\n    return EventManagement;\r\n}());\r\nexports.EventManagement = EventManagement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Stores a handler. Manages execution meta data.\r\n * @class Subscription\r\n * @template TEventHandler\r\n */\r\nvar Subscription = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of Subscription.\r\n     *\r\n     * @param {TEventHandler} handler The handler for the subscription.\r\n     * @param {boolean} isOnce Indicates if the handler should only be executed once.\r\n     */\r\n    function Subscription(handler, isOnce) {\r\n        this.handler = handler;\r\n        this.isOnce = isOnce;\r\n        /**\r\n         * Indicates if the subscription has been executed before.\r\n         */\r\n        this.isExecuted = false;\r\n    }\r\n    /**\r\n     * Executes the handler.\r\n     *\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} scope The scope the scope of the event.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    Subscription.prototype.execute = function (executeAsync, scope, args) {\r\n        if (!this.isOnce || !this.isExecuted) {\r\n            this.isExecuted = true;\r\n            var fn = this.handler;\r\n            if (executeAsync) {\r\n                setTimeout(function () {\r\n                    fn.apply(scope, args);\r\n                }, 1);\r\n            }\r\n            else {\r\n                fn.apply(scope, args);\r\n            }\r\n        }\r\n    };\r\n    return Subscription;\r\n}());\r\nexports.Subscription = Subscription;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar management_1 = require(\"./management\");\r\nvar subscription_1 = require(\"./subscription\");\r\n/**\r\n * Base class for implementation of the dispatcher. It facilitates the subscribe\r\n * and unsubscribe methods based on generic handlers. The TEventType specifies\r\n * the type of event that should be exposed. Use the asEvent to expose the\r\n * dispatcher as event.\r\n */\r\nvar DispatcherBase = /** @class */ (function () {\r\n    function DispatcherBase() {\r\n        this._wrap = new DispatcherWrapper(this);\r\n        this._subscriptions = new Array();\r\n    }\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.subscribe = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, false));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.one = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, true));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.has = function (fn) {\r\n        if (!fn)\r\n            return false;\r\n        return this._subscriptions.some(function (sub) { return sub.handler == fn; });\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsubscribe = function (fn) {\r\n        if (!fn)\r\n            return;\r\n        for (var i = 0; i < this._subscriptions.length; i++) {\r\n            if (this._subscriptions[i].handler == fn) {\r\n                this._subscriptions.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Generic dispatch will dispatch the handlers with the given arguments.\r\n     *\r\n     * @protected\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} The scope the scope of the event. The scope becomes the \"this\" for handler.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    DispatcherBase.prototype._dispatch = function (executeAsync, scope, args) {\r\n        var _this = this;\r\n        var _loop_1 = function (sub) {\r\n            var ev = new management_1.EventManagement(function () { return _this.unsub(sub.handler); });\r\n            var nargs = Array.prototype.slice.call(args);\r\n            nargs.push(ev);\r\n            sub.execute(executeAsync, scope, nargs);\r\n            //cleanup subs that are no longer needed\r\n            this_1.cleanup(sub);\r\n            if (!executeAsync && ev.propagationStopped) {\r\n                return \"break\";\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        //execute on a copy because of bug #9\r\n        for (var _i = 0, _a = this._subscriptions.slice(); _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            var state_1 = _loop_1(sub);\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up subs that ran and should run only once.\r\n     */\r\n    DispatcherBase.prototype.cleanup = function (sub) {\r\n        if (sub.isOnce && sub.isExecuted) {\r\n            var i = this._subscriptions.indexOf(sub);\r\n            if (i > -1) {\r\n                this._subscriptions.splice(i, 1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    DispatcherBase.prototype.asEvent = function () {\r\n        return this._wrap;\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherBase.prototype.clear = function () {\r\n        this._subscriptions.splice(0, this._subscriptions.length);\r\n    };\r\n    return DispatcherBase;\r\n}());\r\nexports.DispatcherBase = DispatcherBase;\r\n/**\r\n * Base class for event lists classes. Implements the get and remove.\r\n */\r\nvar EventListBase = /** @class */ (function () {\r\n    function EventListBase() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.get = function (name) {\r\n        var event = this._events[name];\r\n        if (event) {\r\n            return event;\r\n        }\r\n        event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    return EventListBase;\r\n}());\r\nexports.EventListBase = EventListBase;\r\n/**\r\n * Hides the implementation of the event dispatcher. Will expose methods that\r\n * are relevent to the event.\r\n */\r\nvar DispatcherWrapper = /** @class */ (function () {\r\n    /**\r\n     * Creates a new EventDispatcherWrapper instance.\r\n     * @param dispatcher The dispatcher.\r\n     */\r\n    function DispatcherWrapper(dispatcher) {\r\n        this._subscribe = function (fn) { return dispatcher.subscribe(fn); };\r\n        this._unsubscribe = function (fn) { return dispatcher.unsubscribe(fn); };\r\n        this._one = function (fn) { return dispatcher.one(fn); };\r\n        this._has = function (fn) { return dispatcher.has(fn); };\r\n        this._clear = function () { return dispatcher.clear(); };\r\n    }\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.subscribe = function (fn) {\r\n        return this._subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsubscribe = function (fn) {\r\n        this._unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.one = function (fn) {\r\n        return this._one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherWrapper.prototype.has = function (fn) {\r\n        return this._has(fn);\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherWrapper.prototype.clear = function () {\r\n        this._clear();\r\n    };\r\n    return DispatcherWrapper;\r\n}());\r\nexports.DispatcherWrapper = DispatcherWrapper;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript - Core\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dispatching_1 = require(\"./dispatching\");\r\nexports.DispatcherBase = dispatching_1.DispatcherBase;\r\nexports.DispatcherWrapper = dispatching_1.DispatcherWrapper;\r\nexports.EventListBase = dispatching_1.EventListBase;\r\nvar subscription_1 = require(\"./subscription\");\r\nexports.Subscription = subscription_1.Subscription;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * Dispatcher implementation for events. Can be used to subscribe, unsubscribe\r\n * or dispatch events. Use the ToEvent() method to expose the event.\r\n */\r\nvar EventDispatcher = /** @class */ (function (_super) {\r\n    __extends(EventDispatcher, _super);\r\n    /**\r\n     * Creates a new EventDispatcher instance.\r\n     */\r\n    function EventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatch = function (sender, args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatchAsync = function (sender, args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    EventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return EventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.EventDispatcher = EventDispatcher;\r\n/**\r\n * Storage class for multiple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar EventList = /** @class */ (function (_super) {\r\n    __extends(EventList, _super);\r\n    /**\r\n     * Creates a new EventList instance.\r\n     */\r\n    function EventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    EventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return EventList;\r\n}(ste_core_1.EventListBase));\r\nexports.EventList = EventList;\r\n/**\r\n * Extends objects with event handling capabilities.\r\n */\r\nvar EventHandlingBase = /** @class */ (function () {\r\n    function EventHandlingBase() {\r\n        this._events = new EventList();\r\n    }\r\n    Object.defineProperty(EventHandlingBase.prototype, \"events\", {\r\n        /**\r\n         * Gets the list with all the event dispatchers.\r\n         */\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    return EventHandlingBase;\r\n}());\r\nexports.EventHandlingBase = EventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nexports.EventDispatcher = events_1.EventDispatcher;\r\nexports.EventHandlingBase = events_1.EventHandlingBase;\r\nexports.EventList = events_1.EventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a simple event\r\n */\r\nvar SimpleEventDispatcher = /** @class */ (function (_super) {\r\n    __extends(SimpleEventDispatcher, _super);\r\n    /**\r\n     * Creates a new SimpleEventDispatcher instance.\r\n     */\r\n    function SimpleEventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatch = function (args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatchAsync = function (args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SimpleEventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SimpleEventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SimpleEventDispatcher = SimpleEventDispatcher;\r\n/**\r\n * Storage class for multiple simple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SimpleEventList = /** @class */ (function (_super) {\r\n    __extends(SimpleEventList, _super);\r\n    /**\r\n     * Creates a new SimpleEventList instance.\r\n     */\r\n    function SimpleEventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return SimpleEventList;\r\n}(ste_core_1.EventListBase));\r\nexports.SimpleEventList = SimpleEventList;\r\n/**\r\n * Extends objects with simple event handling capabilities.\r\n */\r\nvar SimpleEventHandlingBase = /** @class */ (function () {\r\n    function SimpleEventHandlingBase() {\r\n        this._events = new SimpleEventList();\r\n    }\r\n    Object.defineProperty(SimpleEventHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SimpleEventHandlingBase;\r\n}());\r\nexports.SimpleEventHandlingBase = SimpleEventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar simple_events_1 = require(\"./simple-events\");\r\nexports.SimpleEventDispatcher = simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = simple_events_1.SimpleEventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a signal event.\r\n */\r\nvar SignalDispatcher = /** @class */ (function (_super) {\r\n    __extends(SignalDispatcher, _super);\r\n    /**\r\n     * Creates a new SignalDispatcher instance.\r\n     */\r\n    function SignalDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the signal.\r\n     */\r\n    SignalDispatcher.prototype.dispatch = function () {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the signal threaded.\r\n     */\r\n    SignalDispatcher.prototype.dispatchAsync = function () {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SignalDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SignalDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SignalDispatcher = SignalDispatcher;\r\n/**\r\n * Storage class for multiple signal events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SignalList = /** @class */ (function (_super) {\r\n    __extends(SignalList, _super);\r\n    /**\r\n     * Creates a new SignalList instance.\r\n     */\r\n    function SignalList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SignalList.prototype.createDispatcher = function () {\r\n        return new SignalDispatcher();\r\n    };\r\n    return SignalList;\r\n}(ste_core_1.EventListBase));\r\nexports.SignalList = SignalList;\r\n/**\r\n * Extends objects with signal event handling capabilities.\r\n */\r\nvar SignalHandlingBase = /** @class */ (function () {\r\n    function SignalHandlingBase() {\r\n        this._events = new SignalList();\r\n    }\r\n    Object.defineProperty(SignalHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SignalHandlingBase;\r\n}());\r\nexports.SignalHandlingBase = SignalHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar signals_1 = require(\"./signals\");\r\nexports.SignalDispatcher = signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = signals_1.SignalHandlingBase;\r\nexports.SignalList = signals_1.SignalList;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\nexports.DispatcherBase = ste_core_1.DispatcherBase;\r\nexports.DispatcherWrapper = ste_core_1.DispatcherWrapper;\r\nexports.EventListBase = ste_core_1.EventListBase;\r\nexports.Subscription = ste_core_1.Subscription;\r\nvar ste_events_1 = require(\"ste-events\");\r\nexports.EventDispatcher = ste_events_1.EventDispatcher;\r\nexports.EventHandlingBase = ste_events_1.EventHandlingBase;\r\nexports.EventList = ste_events_1.EventList;\r\nvar ste_simple_events_1 = require(\"ste-simple-events\");\r\nexports.SimpleEventDispatcher = ste_simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = ste_simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = ste_simple_events_1.SimpleEventList;\r\nvar ste_signals_1 = require(\"ste-signals\");\r\nexports.SignalDispatcher = ste_signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = ste_signals_1.SignalHandlingBase;\r\nexports.SignalList = ste_signals_1.SignalList;\r\n","import { SimpleEventDispatcher } from \"strongly-typed-events\";\n\nconst TraktTokensKey: string = 'trakt_tokens';\n\nexport interface ITraktIDs {\n  trakt?: number;\n  slug?: string;\n  imdb?: string;\n  tmdb?: number;\n  tvdb?: number;\n}\n\nexport interface ITraktMovie {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktShow {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktSeason {\n  number?: number;\n  ids?: ITraktIDs;\n  episodes?: Array<ITraktEpisode>;\n}\n\nexport interface ITraktEpisode {\n  season?: number;\n  number?: number;\n  title?: string;\n  number_abs?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktHistoryItem {\n  id?: number;\n  watched_at: string;\n  action: string;\n  type: 'movie' | 'episode';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktSearchResult {\n  type: 'movie' | 'show' | 'episode' | 'person' | 'list';\n  score: number;\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktScrobbleData {\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n  progress: number;\n  app_version: string;\n  app_date: string;\n}\n\nexport interface ITraktScobbleResult {\n  id: number;\n  action: 'start' | 'pause' | 'scrobble';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktHistoryRemoveResult {\n  deleted: {\n    movies: number;\n    episodes: number;\n  };\n  not_found: {\n    movies: ITraktMovie[];\n    shows: ITraktShow[];\n    seasons: ITraktSeason[];\n    episodes: ITraktEpisode[];\n    ids: number[];\n  };\n}\n\nexport interface ITraktError {\n  status: number;\n  error: string;\n}\n\nconst TraktErrorCodes: { [key: number]: ITraktError } = {\n  200: { \"status\": 200, \"error\": \"Success\" },\n  201: { \"status\": 201, \"error\": \"Success - new resource created (POST)\" },\n  204: { \"status\": 204, \"error\": \"Success - no content to return (DELETE)\" },\n  400: { \"status\": 400, \"error\": \"Bad Request - request couldn't be parsed\" },\n  401: { \"status\": 401, \"error\": \"Unauthorized - OAuth must be provided\" },\n  403: { \"status\": 403, \"error\": \"Forbidden - invalid API key or unapproved app\" },\n  404: { \"status\": 404, \"error\": \"Not Found - method exists, but no record found\" },\n  405: { \"status\": 405, \"error\": \"Method Not Found - method doesn't exist\" },\n  409: { \"status\": 409, \"error\": \"Conflict - resource already created\" },\n  412: { \"status\": 412, \"error\": \"Precondition Failed - use application/json content type\" },\n  422: { \"status\": 422, \"error\": \"Unprocessible Entity - validation errors\" },\n  429: { \"status\": 429, \"error\": \"Rate Limit Exceeded\" },\n  500: { \"status\": 500, \"error\": \"Server Error - please open a support issue\" },\n  503: { \"status\": 503, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  504: { \"status\": 504, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  520: { \"status\": 520, \"error\": \"Service Unavailable - Cloudflare error\" },\n  521: { \"status\": 521, \"error\": \"Service Unavailable - Cloudflare error\" },\n  522: { \"status\": 522, \"error\": \"Service Unavailable - Cloudflare error\" }\n};\n\ninterface ITraktTokens {\n  refresh_token?: string;\n  access_token?: string;\n  expires?: number;\n  authentication_state?: string;\n}\n\nexport interface ITraktApiOptions {\n  client_id: string;\n  client_secret: string;\n  api_url?: string;\n  storage?: IStorage;\n}\n\nexport interface IStorage {\n  getValue(name: string): Promise<string>;\n  setValue(name: string, value: string): Promise<void>;\n}\n\nexport class LocalStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string> {\n    return Promise.resolve(window.localStorage.getItem(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      window.localStorage.removeItem(name);\n    } else {\n      window.localStorage.setItem(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport class GreaseMonkeyStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string> {\n    return Promise.resolve(GM_getValue(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      GM_deleteValue(name);\n    } else {\n      GM_setValue(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport default class TraktApi {\n  public onAuthenticationChanged = new SimpleEventDispatcher<boolean>();\n\n  private _tokens: ITraktTokens = {};\n\n  private _client_id: string;\n  private _client_secret: string;\n  private _redirect_uri: string;\n  private _endpoint: string;\n\n  private _storage: IStorage;\n\n  constructor(options: ITraktApiOptions) {\n    this._client_id = options.client_id;\n    this._client_secret = options.client_secret;\n    this._redirect_uri = 'https://www.crunchyroll.com';\n    this._endpoint = options.api_url || 'https://api.trakt.tv';\n    this._storage = options.storage || new LocalStorageAdapter();\n  }\n\n  static isError(obj: any, code?: number): obj is ITraktError {\n    const err = obj as ITraktError;\n    return err.status !== undefined && err.error !== undefined\n      && (code === undefined || err.status === code);\n  }\n\n  // ------ Authentication ------\n\n  public async loadTokens(): Promise<void> {\n    const data = await this._storage.getValue(TraktTokensKey);\n    if (data) {\n      this._tokens = JSON.parse(data);\n    } else {\n      this._tokens = {};\n    }\n\n    if (this._tokens.expires && this._tokens.expires < Date.now()) {\n      this._tokens = await this._refresh_token();\n      await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n    }\n\n    this.onAuthenticationChanged.dispatch(this.isAuthenticated());\n  }\n\n  isAuthenticated(): boolean {\n    return this._tokens.access_token !== undefined;\n  }\n\n  async authenticate(): Promise<void> {\n    const state = this._generate_state();\n    const url = this._get_url(state);\n\n    // Save authentication state data\n    this._tokens.authentication_state = state;\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.location.href = url;\n  }\n\n  async checkAuthenticationResult(url: string): Promise<void> {\n    const params = new URL(url).searchParams;\n    const code = params.get('code');\n    const state = params.get('state');\n    if (!code ||!state) return;\n\n    if (!await this._exchange_code(code, state)) {\n      console.error('Exchanging oauth code failed!');\n      return;\n    }\n\n    console.log('Trakt authentication successful!');\n\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.history.replaceState(null, undefined, window.location.pathname);\n\n    this.onAuthenticationChanged.dispatch(true);\n  }\n\n  disconnect(): void {\n    this._storage.setValue(TraktTokensKey, null);\n    this.onAuthenticationChanged.dispatch(false);\n    this._revoke_token();\n  }\n\n  // ------ API ------\n\n  private _getError(response: Response): ITraktError {\n    var error = TraktErrorCodes[response.status];\n    if (error) return error;\n\n    return {\n      status: response.status,\n      error: `Unknown error (${response.statusText})`\n    };\n  }\n\n  private async _request(method: 'GET' | 'POST' |'DELETE', url: string, body?: any): Promise<any> {\n    let contentType = null;\n    if (body) {\n      if (body.contentType) {\n        contentType = body.contentType;\n        body = body.body;\n      }\n\n      if (typeof body !== 'string') {\n        body = JSON.stringify(body);\n      }\n    }\n\n    let headers = new Headers();\n    headers.append('trakt-api-version', '2');\n    headers.append('trakt-api-key', this._client_id);\n    headers.append('Content-Type', contentType || 'application/json');\n\n    if (this._tokens && this._tokens.access_token) {\n      headers.append('Authorization', `Bearer ${this._tokens.access_token}`);\n    }\n\n    try {\n      let response = await fetch(this._endpoint + url, {\n        method: method,\n        mode: \"cors\",\n        headers: headers,\n        body: body\n      });\n\n      if (!response.ok) {\n        return this._getError(response);\n      }\n\n      if (response.status === 204) {\n        return null; // 204: No Content\n      }\n\n      return response.json();\n    } catch (err) {\n      return {\n        status: 0,\n        error: `An error occurred sending the request: ${err}`\n      };\n    }\n  }\n\n  private async _exchange(body: object): Promise<ITraktTokens> {\n    try {\n      const data = await this._request('POST', '/oauth/token', body);\n      return {\n        access_token: data.access_token,\n        refresh_token: data.refresh_token,\n        expires: (data.created_at + data.expires_in) * 1000\n      };\n    } catch (err) {\n      console.error(err);\n      return {};\n    }\n  }\n\n  private _generate_state(): string {\n    let data = new Uint32Array(4);\n    crypto.getRandomValues(data);\n    let state = '';\n    for (let i = 0; i < data.length; i++) {\n      state += data[i].toString(16);\n    }\n    return state;\n  }\n\n  private _get_url(state: string): string {\n     // Replace 'api' from the api_url to get the top level trakt domain\n     const base_url = this._endpoint.replace(/api\\W/, '');\n     return `${base_url}/oauth/authorize?response_type=code&client_id=${this._client_id}&redirect_uri=${this._redirect_uri}&state=${state}`;\n  }\n\n  private async _exchange_code(code: string, state: string): Promise<boolean> {\n    if (state !== this._tokens.authentication_state) {\n      console.error('Invalid CSRF (State)');\n      return false;\n    }\n\n    this._tokens = await this._exchange({\n      code: code,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'authorization_code'\n    });\n    return this.isAuthenticated();\n  }\n\n  private async _refresh_token(): Promise<ITraktTokens> {\n    if (!this._tokens.refresh_token)\n      return {};\n\n    return await this._exchange({\n      refresh_token: this._tokens.refresh_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'refresh_token'\n    });\n  }\n\n  private async _revoke_token(): Promise<{} | ITraktError> {\n    if (!this._tokens.access_token) return;\n\n    return this._request('POST', '/oauth/revoke', { \n      token: this._tokens.access_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret\n    });\n  }\n\n  async search(type: string, query: string): Promise<Array<ITraktSearchResult> | ITraktError> {\n    return this._request('GET', `/search/${type}?query=${encodeURIComponent(query)}`);\n  }\n\n  async seasons(showId: number |string, episodes?: boolean): Promise<Array<ITraktSeason> | ITraktError> {\n    return this._request('GET', `/shows/${showId}/seasons?extended=${episodes ? 'episodes' : ''}`);\n  }\n\n  async season(showId: number |string, season: number, extended?: boolean): Promise<Array<ITraktEpisode> | ITraktError> {\n    return this._request('GET', `/shows/${showId}/seasons/${season}?extended=${extended ? 'full' : ''}`);\n  }\n\n  async scrobble(type: 'start' | 'pause' | 'stop', data: ITraktScrobbleData): Promise<ITraktScobbleResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n    return this._request('POST', `/scrobble/${type}`, data);\n  }\n\n  async history(type?: 'movies' | 'shows' | 'seasons' | 'episodes', id?: number): Promise<ITraktHistoryItem[] | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    let url = '/sync/history';\n    if (type) url += '/' + type;\n    if (type && id) url += '/' + id;\n    return this._request('GET', url);\n  }\n\n  async historyRemove(id: number): Promise<ITraktHistoryRemoveResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    return this._request('POST', `/sync/history/remove`, { ids: [ id ] });\n  }\n}","import TraktApi, { ITraktScrobbleData, ITraktError, ITraktEpisode, ITraktMovie, ITraktShow, ITraktSearchResult, ITraktScobbleResult } from './TraktApi';\nimport { SimpleEventDispatcher } from 'ste-simple-events';\n\nexport enum PlaybackState {\n  Paused,\n  Playing,\n  Ended\n}\n\nexport enum TraktScrobbleState {\n  Undefined,\n  Lookup,\n  Found,\n  Started,\n  Paused,\n  Scrobbled,\n  NotFound,\n  Error\n}\n\nenum LookupResult {\n  NotFound,\n  Found,\n  Error\n}\n\nexport default class TraktScrobble {\n  /** Extract item type from scrobble data */\n  public static typeFromData(data: ITraktScrobbleData): 'movie' | 'episode' | null {\n    if (!data) return null;\n    if (data.movie) return 'movie';\n    if (data.show && data.episode) return 'episode';\n    return null;\n  }\n\n  /** Extract trakt id from scrobble data, returns 0 if id is not set */\n  public static traktIdFromData(data: ITraktScrobbleData): number {\n    if (!data) return 0;\n    let movieId = data.movie && data.movie.ids && data.movie.ids.trakt || null;\n    if (movieId) return movieId;\n    let episodeId = data.episode && data.episode.ids && data.episode.ids.trakt || null;\n    if (episodeId) return episodeId;\n    return 0;\n  }\n\n  /** Scrobble once this percentage has been reached */\n  public scrobbleAbovePecentage: number = 80;\n  /** Minimum time of the video that has to have been played before scrobbling (percent of duration) */\n  public scrobbleMimimumPlaybackPercentage: number = 0.1;\n\n  public onStateChanged = new SimpleEventDispatcher<TraktScrobbleState>();\n  public onScrobbled = new SimpleEventDispatcher<ITraktScobbleResult>();\n\n  private _client: TraktApi;\n  private _data: ITraktScrobbleData;\n\n  private _state: TraktScrobbleState;\n  private _pendingState: TraktScrobbleState;\n  private _playbackState: PlaybackState;\n  private _error: string;\n  private _enabled: boolean = false;\n\n  private _lastPlaybackTime: number = 0;\n  private _playbackTime: number = 0;\n\n  constructor(client: TraktApi, data: ITraktScrobbleData) {\n    this._client = client;\n    this._data = data;\n\n    this._init();\n  }\n\n  public get api(): TraktApi {\n    return this._client;\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n\n    this._enabled = value;\n\n    if (this._enabled) {\n      this._applyState(PlaybackState.Paused);\n    } else {\n      this._applyState(this._playbackState);\n    }\n  }\n\n  public setPlaybackTime(time: number, duration: number) {\n    let delta = time - this._lastPlaybackTime;\n    if (delta < 0.5) {\n      this._playbackTime += delta;\n    }\n\n    let progress = time / duration * 100;\n    let minimumTime = duration * this.scrobbleMimimumPlaybackPercentage;\n    if (this._state === TraktScrobbleState.Started \n        && progress > this.scrobbleAbovePecentage\n        && this._playbackTime > minimumTime) {\n      this.setPlaybackState(PlaybackState.Ended, progress);\n    }\n\n    this._lastPlaybackTime = time;\n  }\n\n  public setPlaybackState(state: PlaybackState, progress: number): void {\n    this._playbackState = state;\n    this._data.progress = progress;\n\n    if (!this.enabled) {\n      this._applyState(state);\n    }\n  }\n\n  public scrobbleNow() {\n    this._playbackState = PlaybackState.Ended;\n    this._data.progress = 100;\n    this._applyState(this._playbackState);\n  }\n\n  private _applyState(state) {\n    if (state === PlaybackState.Playing) {\n      if (this._pendingState === TraktScrobbleState.Found \n          || this._pendingState === TraktScrobbleState.Paused) {\n        this._updateScrobble('start');\n      }\n    } else if (state === PlaybackState.Paused) {\n      if (this._pendingState === TraktScrobbleState.Started) {\n        this._updateScrobble('pause');\n      }\n    } else if (state === PlaybackState.Ended) {\n      if (this._pendingState === TraktScrobbleState.Found \n          || this._pendingState === TraktScrobbleState.Started \n          || this._pendingState === TraktScrobbleState.Paused) {\n        this._updateScrobble('stop');\n      }\n    }\n  }\n\n  public get error(): string {\n    return this._error;\n  }\n\n  public scrobbleUrl(): string {\n    let url = 'https://trakt.tv/';\n    if (this._data.movie !== undefined) {\n      return url + `movies/${this._data.movie.ids!.slug}`;\n    } else if (this._data.show !== undefined && this._data.episode !== undefined) {\n      const show = this._data.show;\n      const episode = this._data.episode;\n      return url + `shows/${show.ids!.slug}/seasons/${episode.season}/episodes/${episode.number}`;\n    }\n    return '';\n  }\n\n  public get state(): TraktScrobbleState {\n    return this._state;\n  }\n\n  private setState(value: TraktScrobbleState): void {\n    if (this._state == value) return;\n    this._state = value;\n    this._pendingState = value;\n    this.onStateChanged.dispatch(value);\n  }\n\n  public get data(): ITraktScrobbleData {\n    return this._data;\n  }\n\n  private _handleError(response: any): response is ITraktError {\n    if (!TraktApi.isError(response)) return false;\n  \n    console.error(`trakt scrobbler: ${response.error}`);\n    this._error = response.error;\n    this.setState(TraktScrobbleState.Error);\n    return true;\n  }\n\n  private async _init(): Promise<void> {\n    this.setState(TraktScrobbleState.Lookup);\n\n    let result = await this._lookup();\n    if (result === LookupResult.NotFound) {\n      this.setState(TraktScrobbleState.NotFound);\n      return;\n    } else if (result === LookupResult.Error) {\n      this.setState(TraktScrobbleState.Error);\n      return;\n    }\n\n    this.setState(TraktScrobbleState.Found);\n\n    if (this._playbackState === PlaybackState.Playing) {\n      this._updateScrobble('start');\n    } else if (this._playbackState === PlaybackState.Ended) {\n      this._updateScrobble('stop');\n    }\n  }\n\n  private async _updateScrobble(type: 'start' | 'pause' | 'stop'): Promise<boolean> {\n    switch (type) {\n      case 'start':\n        this._pendingState = TraktScrobbleState.Started;\n        break;\n      case 'pause':\n        this._pendingState = TraktScrobbleState.Paused;\n        break;\n      case 'stop':\n        this._pendingState = TraktScrobbleState.Scrobbled;\n        break;\n    }\n\n    let scrobbleResponse = await this._client.scrobble(type, this._data);\n    if (this._handleError(scrobbleResponse)) {\n      return false;\n    }\n\n    switch (this._state) {\n      case TraktScrobbleState.Found:\n      case TraktScrobbleState.Started:\n      case TraktScrobbleState.Paused:\n        switch (scrobbleResponse.action) {\n          case 'start':\n            this.setState(TraktScrobbleState.Started);\n            break;\n          case 'pause':\n            this.setState(TraktScrobbleState.Paused);\n            break;\n          case 'scrobble':\n            this.setState(TraktScrobbleState.Scrobbled);\n            this.onScrobbled.dispatch(scrobbleResponse);\n            break;\n        }\n        break;\n    }\n\n    return true;\n  }\n\n  private async _lookup(): Promise<LookupResult> {\n    if (this._data.movie === undefined && this._data.show === undefined) {\n      console.error('trakt scrobbler: either movie or show needs to be set on scrobble data');\n      return LookupResult.Error;\n    }\n\n    // Start with trakt's automatic matching\n    console.log('trakt scrobbler: trying automatic matching...');\n    let result = await this._scrobbleLookup();\n    if (result !== LookupResult.NotFound) return result;\n\n    // Search for item manually\n    let type: 'movie' | 'show' = this._data.movie !== undefined ? 'movie' : 'show';\n    let title = this._data.movie !== undefined ? this._data.movie.title : this._data.show!.title;\n    if (!title) {\n      console.error('trakt scrobbler: No title set');\n      return LookupResult.Error;\n    }\n    console.log('trakt scrobbler: trying to search manually...');\n    const results = await this._search(type, title);\n    if (results === null) return LookupResult.Error;\n    if (results.length === 0) return LookupResult.NotFound;\n\n    // Try search results in order\n    for (const found of results) {\n      if (type === 'movie') {\n        console.log(`trakt scrobbler: trying result ${found.movie!.title}`, found);\n        this._data.movie = found.movie;\n      } else {\n        console.log(`trakt scrobbler: trying result ${found.show!.title}`, found);\n        this._data.show = found.show;\n      }\n\n      // Look up episode for shows\n      if (type === 'show') {\n        result = await this._lookupEpisode(found.show!);\n        if (result === LookupResult.Error) return result;\n        if (result === LookupResult.NotFound) continue;\n      }\n\n      // Retry start with new data\n      console.log('trakt scrobbler: re-trying matching');\n      result = await this._scrobbleLookup();\n      if (result === LookupResult.Error) return result;\n      if (result === LookupResult.Found) break;\n    }\n\n    return result;\n  }\n\n  private async _scrobbleLookup(): Promise<LookupResult> {\n    let scrobbleResponse = await this._client.scrobble('pause', this._data);\n    if (TraktApi.isError(scrobbleResponse, 404)) {\n      return LookupResult.NotFound;\n    } else if (this._handleError(scrobbleResponse)) {\n      return LookupResult.Error;\n    }\n\n    if (scrobbleResponse.movie !== undefined)   this._data.movie = scrobbleResponse.movie;\n    if (scrobbleResponse.show !== undefined)    this._data.show = scrobbleResponse.show;\n    if (scrobbleResponse.episode !== undefined) this._data.episode = scrobbleResponse.episode;\n\n    console.log('trakt scrobbler: scrobble lookup succeeded', scrobbleResponse);\n    return LookupResult.Found;\n  }\n\n  private async _search(type: 'movie' | 'show', title: string): Promise<Array<ITraktSearchResult> | null> {\n    const searchResponse = await this._client.search(type, title);\n    if (this._handleError(searchResponse)) {\n      return null;\n    }\n\n    const goodMatches = searchResponse.filter(r => r.score > 10);\n    if (searchResponse.length > goodMatches.length) {\n      if (goodMatches.length === 0) {\n        console.log(`trakt scrobbler: search returned only garbage results.`);\n      } else {\n        console.log(`trakt scrobbler: some search results with low scores ignored`);\n      }\n    }\n    return goodMatches;\n  }\n\n  private async _lookupEpisode(show: ITraktShow): Promise<LookupResult> {\n    if (this._data.episode === undefined || this._data.episode.number === undefined || this._data.episode.season === undefined) {\n      console.error('trakt scrobbler: data has show but episode is not set or incomplete', this._data.episode);\n      return LookupResult.Error;\n    }\n    if (show.ids === undefined || show.ids.trakt === undefined) {\n      console.error('trakt scrobbler: show data is missing trakt id', this._data.show);\n      return LookupResult.Error;\n    }\n\n    let episodeResult = LookupResult.NotFound;\n\n    // Lookup episode numbers\n    console.log('trakt scrobbler: trying to look up episode number...');\n    episodeResult = await this._lookupEpisodeNumber(show.ids.trakt, this._data.episode.season, this._data.episode.number);\n    if (episodeResult === LookupResult.Error) return episodeResult;\n\n    // Or lookup by episode title\n    if (episodeResult === LookupResult.NotFound && this._data.episode.title !== undefined) {\n      console.log('trakt scrobbler: trying to look up episode title...');\n      episodeResult = await this._lookupEpisodeTitle(show.ids.trakt, this._data.episode.title);\n      if (episodeResult === LookupResult.Error) return episodeResult;\n    }\n\n    return episodeResult;\n  }\n\n  private async _lookupEpisodeNumber(showId: number, season: number, episode: number): Promise<LookupResult> {\n    const seasonResponse = await this._client.season(showId, season, true);\n    if (TraktApi.isError(seasonResponse, 404)) {\n      console.error('trakt scrobbler: manual lookup could not find season');\n      return LookupResult.NotFound;\n    } else if (this._handleError(seasonResponse)) {\n      return LookupResult.Error;\n    }\n\n    let numberMatch = seasonResponse.filter(e => e.number === episode || e.number_abs === episode);\n    if (numberMatch.length > 1) {\n      console.error(`trakt scrobbler: got multiple episode #${episode} in season`, seasonResponse);\n      return LookupResult.NotFound;\n    } else if (numberMatch.length === 0) {\n      console.error(`trakt scrobbler: episode #${episode} not found in season`, seasonResponse);\n      return LookupResult.NotFound;\n    }\n\n    console.log(`trakt scrobbler: found episode using episode number`, numberMatch[0]);\n    this._data.episode = numberMatch[0];\n    return LookupResult.Found;\n  }\n\n  private _filterEpisodeTitle(title: string): string {\n    if (!title) debugger;\n    return title.replace(/[^\\w\\s]/gi, '').toLowerCase();\n  }\n\n  private async _lookupEpisodeTitle(showId: number, title: string): Promise<LookupResult> {\n    const seasonResponse = await this._client.seasons(showId, true);\n    if (TraktApi.isError(seasonResponse, 404)) {\n      console.error('trakt scrobbler: manual lookup could not find seasons');\n      return LookupResult.NotFound;\n    } else if (this._handleError(seasonResponse)) {\n      return LookupResult.Error;\n    }\n\n    const filteredTitle = this._filterEpisodeTitle(title);\n    let numberMatch = seasonResponse\n      .reduce((acc, s) => acc.concat(s.episodes!), new Array<ITraktEpisode>())\n      .filter(e => e.title && this._filterEpisodeTitle(e.title) === filteredTitle);\n    if (numberMatch.length > 1) {\n      console.error(`trakt scrobbler: got multiple episodes titled \"${title}\" in show`, seasonResponse);\n      return LookupResult.NotFound;\n    } else if (numberMatch.length === 0) {\n      console.error(`trakt scrobbler: episode titled \"${title}\" not found in show`, seasonResponse);\n      return LookupResult.NotFound;\n    }\n\n    console.log(`trakt scrobbler: found episode using episode title`, numberMatch[0]);\n    this._data.episode = numberMatch[0];\n    return LookupResult.Found;\n  }\n}","/**\n * Virtual DOM Node\n * @typedef VNode\n * @property {string | function} nodeName The string of the DOM node to create or Component constructor to render\n * @property {Array<VNode | string>} children The children of node\n * @property {string | number | undefined} key The key used to identify this VNode in a list\n * @property {object} attributes The properties of this VNode\n */\nexport const VNode = function VNode() {};\n","/**\n * @typedef {import('./component').Component} Component\n * @typedef {import('./vnode').VNode} VNode\n */\n\n/**\n * Global options\n * @public\n * @typedef Options\n * @property {boolean} [syncComponentUpdates] If `true`, `prop` changes trigger synchronous component updates. Defaults to true.\n * @property {(vnode: VNode) => void} [vnode] Processes all created VNodes.\n * @property {(component: Component) => void} [afterMount] Hook invoked after a component is mounted.\n * @property {(component: Component) => void} [afterUpdate] Hook invoked after the DOM is updated with a component's latest render.\n * @property {(component: Component) => void} [beforeUnmount] Hook invoked immediately before a component is unmounted.\n * @property {(rerender: function) => void} [debounceRendering] Hook invoked whenever a rerender is requested. Can be used to debounce rerenders.\n * @property {(event: Event) => Event | void} [event] Hook invoked before any Preact event listeners. The return value (if any) replaces the native browser event given to event listeners\n */\n\n/** @type {Options}  */\nconst options = {};\n\nexport default options;\n","import { VNode } from './vnode';\nimport options from './options';\n\n\nconst stack = [];\n\nconst EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility\n * reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a\n * lightweight representation of the structure of a DOM tree. This structure can\n * be realized by recursively comparing it against the current _actual_ DOM\n * structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string | function} nodeName An element name. Ex: `div`, `a`, `span`, etc.\n * @param {object | null} attributes Any attributes/props to set on the created element.\n * @param {VNode[]} [rest] Additional arguments are taken to be children to\n *  append. Can be infinitely nested Arrays.\n *\n * @public\n */\nexport function h(nodeName, attributes) {\n\tlet children=EMPTY_CHILDREN, lastSimple, child, simple, i;\n\tfor (i=arguments.length; i-- > 2; ) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children!=null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop!==undefined) {\n\t\t\tfor (i=child.length; i--; ) stack.push(child[i]);\n\t\t}\n\t\telse {\n\t\t\tif (typeof child==='boolean') child = null;\n\n\t\t\tif ((simple = typeof nodeName!=='function')) {\n\t\t\t\tif (child==null) child = '';\n\t\t\t\telse if (typeof child==='number') child = String(child);\n\t\t\t\telse if (typeof child!=='string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length-1] += child;\n\t\t\t}\n\t\t\telse if (children===EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tlet p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes==null ? undefined : attributes;\n\tp.key = attributes==null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode!==undefined) options.vnode(p);\n\n\treturn p;\n}\n","/**\n * Copy all properties from `props` onto `obj`.\n * @param {object} obj Object onto which properties should be copied.\n * @param {object} props Object from which to copy properties.\n * @returns {object}\n * @private\n */\nexport function extend(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n * @type {(callback: function) => void}\n */\nexport const defer = typeof Promise=='function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n","import { extend } from './util';\nimport { h } from './h';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./vnode').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./vnode').VNode>} [rest] Any additional arguments will be used as replacement\n *  children.\n */\nexport function cloneElement(vnode, props) {\n\treturn h(\n\t\tvnode.nodeName,\n\t\textend(extend({}, vnode.attributes), props),\n\t\targuments.length>2 ? [].slice.call(arguments, 2) : vnode.children\n\t);\n}\n","// render modes\n\n/** Do not re-render a component */\nexport const NO_RENDER = 0;\n/** Synchronously re-render a component and its children */\nexport const SYNC_RENDER = 1;\n/** Synchronously re-render a component, even if its lifecycle methods attempt to prevent it. */\nexport const FORCE_RENDER = 2;\n/** Queue asynchronous re-render of a component and it's children */\nexport const ASYNC_RENDER = 3;\n\n\nexport const ATTR_KEY = '__preactattr_';\n\n/** DOM properties that should NOT have \"px\" added when numeric */\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n","import options from './options';\nimport { defer } from './util';\nimport { renderComponent } from './vdom/component';\n\n/**\n * Managed queue of dirty components to be re-rendered\n * @type {Array<import('./component').Component>}\n */\nlet items = [];\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./component').Component} component The component to rerender\n */\nexport function enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component)==1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\n/** Rerender all enqueued dirty components */\nexport function rerender() {\n\tlet p, list = items;\n\titems = [];\n\twhile ( (p = list.pop()) ) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { extend } from '../util';\n\n\n/**\n * Check if two nodes are equivalent.\n * @param {import('../dom').PreactElement} node DOM Node to compare\n * @param {import('../vnode').VNode} vnode Virtual DOM node to compare\n * @param {boolean} [hydrating=false] If true, ignores component constructors\n *  when comparing.\n * @private\n */\nexport function isSameNodeType(node, vnode, hydrating) {\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\t\treturn node.splitText!==undefined;\n\t}\n\tif (typeof vnode.nodeName==='string') {\n\t\treturn !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n\t}\n\treturn hydrating || node._componentConstructor===vnode.nodeName;\n}\n\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n * @param {import('../dom').PreactElement} node A DOM Element to inspect the name of.\n * @param {string} nodeName Unnormalized name to compare against.\n */\nexport function isNamedNode(node, nodeName) {\n\treturn node.normalizedNodeName===nodeName || node.nodeName.toLowerCase()===nodeName.toLowerCase();\n}\n\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n * @param {import('../vnode').VNode} vnode The VNode to get props for\n * @returns {object} The props to use for this VNode\n */\nexport function getNodeProps(vnode) {\n\tlet props = extend({}, vnode.attributes);\n\tprops.children = vnode.children;\n\n\tlet defaultProps = vnode.nodeName.defaultProps;\n\tif (defaultProps!==undefined) {\n\t\tfor (let i in defaultProps) {\n\t\t\tif (props[i]===undefined) {\n\t\t\t\tprops[i] = defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn props;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * A DOM event listener\n * @typedef {(e: Event) => void} EventListner\n */\n\n/**\n * A mapping of event types to event listeners\n * @typedef {Object.<string, EventListener>} EventListenerMap\n */\n\n/**\n * Properties Preact adds to elements it creates\n * @typedef PreactElementExtensions\n * @property {string} [normalizedNodeName] A normalized node name to use in diffing\n * @property {EventListenerMap} [_listeners] A map of event listeners added by components to this DOM node\n * @property {import('../component').Component} [_component] The component that rendered this DOM node\n * @property {function} [_componentConstructor] The constructor of the component that rendered this DOM node\n */\n\n/**\n * A DOM element that has been extended with Preact properties\n * @typedef {Element & ElementCSSInlineStyle & PreactElementExtensions} PreactElement\n */\n\n/**\n * Create an element with the given nodeName.\n * @param {string} nodeName The DOM node to create\n * @param {boolean} [isSvg=false] If `true`, creates an element within the SVG\n *  namespace.\n * @returns {PreactElement} The created DOM node\n */\nexport function createNode(nodeName, isSvg) {\n\t/** @type {PreactElement} */\n\tlet node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n\n/**\n * Remove a child node from its parent if attached.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n\n/**\n * Set a named attribute on the given Node, with special behavior for some names\n * and event handlers. If `value` is `null`, the attribute/handler will be\n * removed.\n * @param {PreactElement} node An element to mutate\n * @param {string} name The name/key to set, such as an event or attribute name\n * @param {*} old The last value that was set for this name/node pair\n * @param {*} value An attribute value, such as a function to be used as an\n *  event handler\n * @param {boolean} isSvg Are we currently diffing inside an svg?\n * @private\n */\nexport function setAccessor(node, name, old, value, isSvg) {\n\tif (name==='className') name = 'class';\n\n\n\tif (name==='key') {\n\t\t// ignore\n\t}\n\telse if (name==='ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t}\n\telse if (name==='class' && !isSvg) {\n\t\tnode.className = value || '';\n\t}\n\telse if (name==='style') {\n\t\tif (!value || typeof value==='string' || typeof old==='string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value==='object') {\n\t\t\tif (typeof old!=='string') {\n\t\t\t\tfor (let i in old) if (!(i in value)) node.style[i] = '';\n\t\t\t}\n\t\t\tfor (let i in value) {\n\t\t\t\tnode.style[i] = typeof value[i]==='number' && IS_NON_DIMENSIONAL.test(i)===false ? (value[i]+'px') : value[i];\n\t\t\t}\n\t\t}\n\t}\n\telse if (name==='dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t}\n\telse if (name[0]=='o' && name[1]=='n') {\n\t\tlet useCapture = name !== (name=name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\telse {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t}\n\telse if (name!=='list' && name!=='type' && !isSvg && name in node) {\n\t\t// Attempt to set a DOM property to the given value.\n\t\t// IE & FF throw for certain property-value combinations.\n\t\ttry {\n\t\t\tnode[name] = value==null ? '' : value;\n\t\t} catch (e) { }\n\t\tif ((value==null || value===false) && name!='spellcheck') node.removeAttribute(name);\n\t}\n\telse {\n\t\tlet ns = isSvg && (name !== (name = name.replace(/^xlink:?/, '')));\n\t\t// spellcheck is treated differently than all other boolean values and\n\t\t// should not be removed when the value is `false`. See:\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-spellcheck\n\t\tif (value==null || value===false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());\n\t\t\telse node.removeAttribute(name);\n\t\t}\n\t\telse if (typeof value!=='function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);\n\t\t\telse node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n","import { ATTR_KEY } from '../constants';\nimport { isSameNodeType, isNamedNode } from './index';\nimport { buildComponentFromVNode } from './component';\nimport { createNode, setAccessor } from '../dom/index';\nimport { unmountComponent } from './component';\nimport options from '../options';\nimport { removeNode } from '../dom/index';\n\n/**\n * Queue of components that have been mounted and are awaiting componentDidMount\n * @type {Array<import('../component').Component>}\n */\nexport const mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nexport let diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nlet isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nlet hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nexport function flushMounts() {\n\tlet c;\n\twhile ((c=mounts.pop())) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n\n/**\n * Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n * @param {import('../dom').PreactElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing\n *  the desired DOM structure\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {Element} parent ?\n * @param {boolean} componentRoot ?\n * @returns {import('../dom').PreactElement} The created/mutated element\n * @private\n */\nexport function diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent!=null && parent.ownerSVGElement!==undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom!=null && !(ATTR_KEY in dom);\n\t}\n\n\tlet ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode!==parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (!--diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n\n/**\n * Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing.\n * @param {import('../dom').PreactElement} dom A DOM node to mutate into the shape of a `vnode`\n * @param {import('../vnode').VNode} vnode A VNode (with descendants forming a tree) representing the desired DOM structure\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} [componentRoot] ?\n * @private\n */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tlet out = dom,\n\t\tprevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode==null || typeof vnode==='boolean') vnode = '';\n\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode==='string' || typeof vnode==='number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText!==undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue!=vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout[ATTR_KEY] = true;\n\n\t\treturn out;\n\t}\n\n\n\t// If the VNode represents a Component, perform a component diff:\n\tlet vnodeName = vnode.nodeName;\n\tif (typeof vnodeName==='function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName==='svg' ? true : vnodeName==='foreignObject' ? false : isSvgMode;\n\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) out.appendChild(dom.firstChild);\n\n\t\t\t// if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\n\tlet fc = out.firstChild,\n\t\tprops = out[ATTR_KEY],\n\t\tvchildren = vnode.children;\n\n\tif (props==null) {\n\t\tprops = out[ATTR_KEY] = {};\n\t\tfor (let a=out.attributes, i=a.length; i--; ) props[a[i].name] = a[i].value;\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length===1 && typeof vchildren[0]==='string' && fc!=null && fc.splitText!==undefined && fc.nextSibling==null) {\n\t\tif (fc.nodeValue!=vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc!=null) {\n\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML!=null);\n\t}\n\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n\n/**\n * Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n * @param {import('../dom').PreactElement} dom Element whose children should be compared & mutated\n * @param {Array<import('../vnode').VNode>} vchildren Array of VNodes to compare to `dom.childNodes`\n * @param {object} context Implicitly descendant context object (from most\n *  recent `getChildContext()`)\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @param {boolean} isHydrating if `true`, consumes externally created elements\n *  similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tlet originalChildren = dom.childNodes,\n\t\tchildren = [],\n\t\tkeyed = {},\n\t\tkeyedLen = 0,\n\t\tmin = 0,\n\t\tlen = originalChildren.length,\n\t\tchildrenLen = 0,\n\t\tvlen = vchildren ? vchildren.length : 0,\n\t\tj, c, f, vchild, child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len!==0) {\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tlet child = originalChildren[i],\n\t\t\t\tprops = child[ATTR_KEY],\n\t\t\t\tkey = vlen && props ? child._component ? child._component.__key : props.key : null;\n\t\t\tif (key!=null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = child;\n\t\t\t}\n\t\t\telse if (props || (child.splitText!==undefined ? (isHydrating ? child.nodeValue.trim() : true) : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen!==0) {\n\t\tfor (let i=0; i<vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tlet key = vchild.key;\n\t\t\tif (key!=null) {\n\t\t\t\tif (keyedLen && keyed[key]!==undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (min<childrenLen) {\n\t\t\t\tfor (j=min; j<childrenLen; j++) {\n\t\t\t\t\tif (children[j]!==undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\tif (j===childrenLen-1) childrenLen--;\n\t\t\t\t\t\tif (j===min) min++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child!==dom && child!==f) {\n\t\t\t\tif (f==null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t}\n\t\t\t\telse if (child===f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (let i in keyed) if (keyed[i]!==undefined) recollectNodeTree(keyed[i], false);\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min<=childrenLen) {\n\t\tif ((child = children[childrenLen--])!==undefined) recollectNodeTree(child, false);\n\t}\n}\n\n\n\n/**\n * Recursively recycle (or just unmount) a node and its descendants.\n * @param {import('../dom').PreactElement} node DOM node to start\n *  unmount/removal from\n * @param {boolean} [unmountOnly=false] If `true`, only triggers unmount\n *  lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n\tlet component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t}\n\telse {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node[ATTR_KEY]!=null && node[ATTR_KEY].ref) node[ATTR_KEY].ref(null);\n\n\t\tif (unmountOnly===false || node[ATTR_KEY]==null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n\n/**\n * Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tlet next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n\n/**\n * Apply differences in attributes from a VNode to the given DOM Element.\n * @param {import('../dom').PreactElement} dom Element with attributes to diff `attrs` against\n * @param {object} attrs The desired end-state key-value attribute pairs\n * @param {object} old Current/previous attributes (from previous VNode or\n *  element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tlet name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name]!=null) && old[name]!=null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name!=='children' && name!=='innerHTML' && (!(name in old) || attrs[name]!==(name==='value' || name==='checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n","import { Component } from '../component';\n\n/**\n * Retains a pool of Components for re-use.\n * @type {Component[]}\n * @private\n */\nexport const recyclerComponents = [];\n\n\n/**\n * Create a component. Normalizes differences between PFC's and classful\n * Components.\n * @param {function} Ctor The constructor of the component to create\n * @param {object} props The initial props of the component\n * @param {object} context The initial context of the component\n * @returns {import('../component').Component}\n */\nexport function createComponent(Ctor, props, context) {\n\tlet inst, i = recyclerComponents.length;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t}\n\telse {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\n\twhile (i--) {\n\t\tif (recyclerComponents[i].constructor===Ctor) {\n\t\t\tinst.nextBase = recyclerComponents[i].nextBase;\n\t\t\trecyclerComponents.splice(i, 1);\n\t\t\treturn inst;\n\t\t}\n\t}\n\n\treturn inst;\n}\n\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { SYNC_RENDER, NO_RENDER, FORCE_RENDER, ASYNC_RENDER, ATTR_KEY } from '../constants';\nimport options from '../options';\nimport { extend } from '../util';\nimport { enqueueRender } from '../render-queue';\nimport { getNodeProps } from './index';\nimport { diff, mounts, diffLevel, flushMounts, recollectNodeTree, removeChildren } from './diff';\nimport { createComponent, recyclerComponents } from './component-recycler';\nimport { removeNode } from '../dom/index';\n\n/**\n * Set a component's `props` and possibly re-render the component\n * @param {import('../component').Component} component The Component to set props on\n * @param {object} props The new props\n * @param {number} renderMode Render options - specifies how to re-render the component\n * @param {object} context The new context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n */\nexport function setComponentProps(component, props, renderMode, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tcomponent.__ref = props.ref;\n\tcomponent.__key = props.key;\n\tdelete props.ref;\n\tdelete props.key;\n\n\tif (typeof component.constructor.getDerivedStateFromProps === 'undefined') {\n\t\tif (!component.base || mountAll) {\n\t\t\tif (component.componentWillMount) component.componentWillMount();\n\t\t}\n\t\telse if (component.componentWillReceiveProps) {\n\t\t\tcomponent.componentWillReceiveProps(props, context);\n\t\t}\n\t}\n\n\tif (context && context!==component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (renderMode!==NO_RENDER) {\n\t\tif (renderMode===SYNC_RENDER || options.syncComponentUpdates!==false || !component.base) {\n\t\t\trenderComponent(component, SYNC_RENDER, mountAll);\n\t\t}\n\t\telse {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\n\n\n/**\n * Render a Component, triggering necessary lifecycle events and taking\n * High-Order Components into account.\n * @param {import('../component').Component} component The component to render\n * @param {number} [renderMode] render mode, see constants.js for available options.\n * @param {boolean} [mountAll] Whether or not to immediately mount all components\n * @param {boolean} [isChild] ?\n * @private\n */\nexport function renderComponent(component, renderMode, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tlet props = component.props,\n\t\tstate = component.state,\n\t\tcontext = component.context,\n\t\tpreviousProps = component.prevProps || props,\n\t\tpreviousState = component.prevState || state,\n\t\tpreviousContext = component.prevContext || context,\n\t\tisUpdate = component.base,\n\t\tnextBase = component.nextBase,\n\t\tinitialBase = isUpdate || nextBase,\n\t\tinitialChildComponent = component._component,\n\t\tskip = false,\n\t\tsnapshot = previousContext,\n\t\trendered, inst, cbase;\n\n\tif (component.constructor.getDerivedStateFromProps) {\n\t\tstate = extend(extend({}, state), component.constructor.getDerivedStateFromProps(props, state));\n\t\tcomponent.state = state;\n\t}\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (renderMode!==FORCE_RENDER\n\t\t\t&& component.shouldComponentUpdate\n\t\t\t&& component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t}\n\t\telse if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tif (isUpdate && component.getSnapshotBeforeUpdate) {\n\t\t\tsnapshot = component.getSnapshotBeforeUpdate(previousProps, previousState);\n\t\t}\n\n\t\tlet childComponent = rendered && rendered.nodeName,\n\t\t\ttoUnmount, base;\n\n\t\tif (typeof childComponent==='function') {\n\t\t\t// set up high order component link\n\n\t\t\tlet childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor===childComponent && childProps.key==inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, SYNC_RENDER, context, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, NO_RENDER, context, false);\n\t\t\t\trenderComponent(inst, SYNC_RENDER, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t}\n\t\telse {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || renderMode===SYNC_RENDER) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base!==initialBase && inst!==initialChildComponent) {\n\t\t\tlet baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base!==baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tlet componentRef = component,\n\t\t\t\tt = component;\n\t\t\twhile ((t=t._parentComponent)) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t}\n\telse if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, snapshot);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\twhile (component._renderCallbacks.length) component._renderCallbacks.pop().call(component);\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n\n\n/**\n * Apply the Component referenced by a VNode to the DOM.\n * @param {import('../dom').PreactElement} dom The DOM node to mutate\n * @param {import('../vnode').VNode} vnode A Component-referencing VNode\n * @param {object} context The current context\n * @param {boolean} mountAll Whether or not to immediately mount all components\n * @returns {import('../dom').PreactElement} The created/mutated element\n * @private\n */\nexport function buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tlet c = dom && dom._component,\n\t\toriginalComponent = c,\n\t\toldDom = dom,\n\t\tisDirectOwner = c && dom._componentConstructor===vnode.nodeName,\n\t\tisOwner = isDirectOwner,\n\t\tprops = getNodeProps(vnode);\n\twhile (c && !isOwner && (c=c._parentComponent)) {\n\t\tisOwner = c.constructor===vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, ASYNC_RENDER, context, mountAll);\n\t\tdom = c.base;\n\t}\n\telse {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, SYNC_RENDER, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom!==oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n\n\n/**\n * Remove a component from the DOM and recycle it.\n * @param {import('../component').Component} component The Component instance to unmount\n * @private\n */\nexport function unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tlet base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tlet inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t}\n\telse if (base) {\n\t\tif (base[ATTR_KEY] && base[ATTR_KEY].ref) base[ATTR_KEY].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\trecyclerComponents.push(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n","import { FORCE_RENDER } from './constants';\nimport { extend } from './util';\nimport { renderComponent } from './vdom/component';\nimport { enqueueRender } from './render-queue';\n/**\n * Base Component class.\n * Provides `setState()` and `forceUpdate()`, which trigger rendering.\n * @typedef {object} Component\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components' getChildContext\n * @public\n *\n * @example\n * class MyFoo extends Component {\n *   render(props, state) {\n *     return <div />;\n *   }\n * }\n */\nexport function Component(props, context) {\n\tthis._dirty = true;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.context = context;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.props = props;\n\n\t/**\n\t * @public\n\t * @type {object}\n\t */\n\tthis.state = this.state || {};\n\n\tthis._renderCallbacks = [];\n}\n\n\nextend(Component.prototype, {\n\n\t/**\n\t * Update component state and schedule a re-render.\n\t * @param {object} state A dict of state properties to be shallowly merged\n\t * \tinto the current state, or a function that will produce such a dict. The\n\t * \tfunction is called with the current state and props.\n\t * @param {() => void} callback A function to be called once component state is\n\t * \tupdated\n\t */\n\tsetState(state, callback) {\n\t\tif (!this.prevState) this.prevState = this.state;\n\t\tthis.state = extend(\n\t\t\textend({}, this.state),\n\t\t\ttypeof state === 'function' ? state(this.state, this.props) : state\n\t\t);\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/**\n\t * Immediately perform a synchronous re-render of the component.\n\t * @param {() => void} callback A function to be called after component is\n\t * \tre-rendered.\n\t * @private\n\t */\n\tforceUpdate(callback) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\trenderComponent(this, FORCE_RENDER);\n\t},\n\n\n\t/**\n\t * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n\t * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n\t * @param {object} props Props (eg: JSX attributes) received from parent\n\t * \telement/component\n\t * @param {object} state The component's current state\n\t * @param {object} context Context object, as returned by the nearest\n\t *  ancestor's `getChildContext()`\n\t * @returns {import('./vnode').VNode | void}\n\t */\n\trender() {}\n\n});\n","import { diff } from './vdom/diff';\n\n/**\n * Render JSX into a `parent` Element.\n * @param {import('./vnode').VNode} vnode A (JSX) VNode to render\n * @param {import('./dom').PreactElement} parent DOM element to render into\n * @param {import('./dom').PreactElement} [merge] Attempt to re-use an existing DOM tree rooted at\n *  `merge`\n * @public\n *\n * @example\n * // render a div into <body>:\n * render(<div id=\"hello\">hello!</div>, document.body);\n *\n * @example\n * // render a \"Thing\" component into #foo:\n * const Thing = ({ name }) => <span>{ name }</span>;\n * render(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nexport function render(vnode, parent, merge) {\n\treturn diff(merge, vnode, {}, false, parent, false);\n}\n","import { h, h as createElement } from './h';\nimport { cloneElement } from './clone-element';\nimport { Component } from './component';\nimport { render } from './render';\nimport { rerender } from './render-queue';\nimport options from './options';\n\nexport default {\n\th,\n\tcreateElement,\n\tcloneElement,\n\tComponent,\n\trender,\n\trerender,\n\toptions\n};\n\nexport {\n\th,\n\tcreateElement,\n\tcloneElement,\n\tComponent,\n\trender,\n\trerender,\n\toptions\n};\n","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","/* eslint-disable */\n// murmurhash2 via https://github.com/garycourt/murmurhash-js/blob/master/murmurhash2_gc.js\nfunction murmurhash2_32_gc(str) {\n  var l = str.length,\n      h = l ^ l,\n      i = 0,\n      k;\n\n  while (l >= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    k ^= k >>> 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16) ^ k;\n    l -= 4;\n    ++i;\n  }\n\n  switch (l) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  }\n\n  h ^= h >>> 13;\n  h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  h ^= h >>> 15;\n  return (h >>> 0).toString(36);\n}\n\nexport default murmurhash2_32_gc;\n","function stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e, m).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e, m).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        switch (d.constructor) {\n          case Array:\n            for (var c = 0, e = d.length; c < e; ++c) {\n              T(d[c]);\n            }\n\n            break;\n\n          case Function:\n            S[A++] = d;\n            break;\n\n          case Boolean:\n            Y = !!d | 0;\n        }\n\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexport default stylis_min;\n","(function (factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? (module['exports'] = factory()) :\n\t\ttypeof define === 'function' && define['amd'] ? define(factory()) :\n\t\t\t(window['stylisRuleSheet'] = factory())\n}(function () {\n\n\t'use strict'\n\n\treturn function (insertRule) {\n\t\tvar delimiter = '/*|*/'\n\t\tvar needle = delimiter+'}'\n\n\t\tfunction toSheet (block) {\n\t\t\tif (block)\n\t\t\t\ttry {\n\t\t\t\t\tinsertRule(block + '}')\n\t\t\t\t} catch (e) {}\n\t\t}\n\n\t\treturn function ruleSheet (context, content, selectors, parents, line, column, length, ns, depth, at) {\n\t\t\tswitch (context) {\n\t\t\t\t// property\n\t\t\t\tcase 1:\n\t\t\t\t\t// @import\n\t\t\t\t\tif (depth === 0 && content.charCodeAt(0) === 64)\n\t\t\t\t\t\treturn insertRule(content+';'), ''\n\t\t\t\t\tbreak\n\t\t\t\t// selector\n\t\t\t\tcase 2:\n\t\t\t\t\tif (ns === 0)\n\t\t\t\t\t\treturn content + delimiter\n\t\t\t\t\tbreak\n\t\t\t\t// at-rule\n\t\t\t\tcase 3:\n\t\t\t\t\tswitch (ns) {\n\t\t\t\t\t\t// @font-face, @page\n\t\t\t\t\t\tcase 102:\n\t\t\t\t\t\tcase 112:\n\t\t\t\t\t\t\treturn insertRule(selectors[0]+content), ''\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn content + (at === 0 ? delimiter : '')\n\t\t\t\t\t}\n\t\t\t\tcase -2:\n\t\t\t\t\tcontent.split(needle).forEach(toSheet)\n\t\t\t}\n\t\t}\n\t}\n}))\n","import memoize from '@emotion/memoize';\nimport unitless from '@emotion/unitless';\nimport hashString from '@emotion/hash';\nimport Stylis from '@emotion/stylis';\nimport stylisRuleSheet from 'stylis-rule-sheet';\n\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar processStyleName = memoize(function (styleName) {\n  return styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\nvar processStyleValue = function processStyleValue(key, value) {\n  if (value == null || typeof value === 'boolean') {\n    return '';\n  }\n\n  if (unitless[key] !== 1 && key.charCodeAt(1) !== 45 && // custom properties\n  !isNaN(value) && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    return oldProcessStyleValue(key, value);\n  };\n}\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'function':\n        if (process.env.NODE_ENV !== 'production') {\n          console.error('Passing functions to cx is deprecated and will be removed in the next major version of Emotion.\\n' + 'Please call the function before passing it to cx.');\n        }\n\n        toAdd = classnames([arg()]);\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\nvar isBrowser = typeof document !== 'undefined';\n\n/*\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n- 'polyfills' on server side\n\n// usage\n\nimport StyleSheet from 'glamor/lib/sheet'\nlet styleSheet = new StyleSheet()\n\nstyleSheet.inject()\n- 'injects' the stylesheet into the page (or into memory if on server)\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction makeStyleTag(opts) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', opts.key || '');\n\n  if (opts.nonce !== undefined) {\n    tag.setAttribute('nonce', opts.nonce);\n  }\n\n  tag.appendChild(document.createTextNode('')) // $FlowFixMe\n  ;\n  (opts.container !== undefined ? opts.container : document.head).appendChild(tag);\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = process.env.NODE_ENV === 'production'; // the big drawback here is that the css won't be editable in devtools\n\n    this.tags = [];\n    this.ctr = 0;\n    this.opts = options;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.inject = function inject() {\n    if (this.injected) {\n      throw new Error('already injected!');\n    }\n\n    this.tags[0] = makeStyleTag(this.opts);\n    this.injected = true;\n  };\n\n  _proto.speedy = function speedy(bool) {\n    if (this.ctr !== 0) {\n      // cannot change speedy mode after inserting any rule to sheet. Either call speedy(${bool}) earlier in your app, or call flush() before speedy(${bool})\n      throw new Error(\"cannot change speedy now\");\n    }\n\n    this.isSpeedy = !!bool;\n  };\n\n  _proto.insert = function insert(rule, sourceMap) {\n    // this is the ultrafast version, works across browsers\n    if (this.isSpeedy) {\n      var tag = this.tags[this.tags.length - 1];\n      var sheet = sheetForTag(tag);\n\n      try {\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('illegal rule', rule); // eslint-disable-line no-console\n        }\n      }\n    } else {\n      var _tag = makeStyleTag(this.opts);\n\n      this.tags.push(_tag);\n\n      _tag.appendChild(document.createTextNode(rule + (sourceMap || '')));\n    }\n\n    this.ctr++;\n\n    if (this.ctr % 65000 === 0) {\n      this.tags.push(makeStyleTag(this.opts));\n    }\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0; // todo - look for remnants in document.styleSheets\n\n    this.injected = false;\n  };\n\n  return StyleSheet;\n}();\n\nfunction createEmotion(context, options) {\n  if (context.__SECRET_EMOTION__ !== undefined) {\n    return context.__SECRET_EMOTION__;\n  }\n\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var current;\n\n  function insertRule(rule) {\n    current += rule;\n\n    if (isBrowser) {\n      sheet.insert(rule, currentSourceMap);\n    }\n  }\n\n  var insertionPlugin = stylisRuleSheet(insertRule);\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var caches = {\n    registered: {},\n    inserted: {},\n    nonce: options.nonce,\n    key: key\n  };\n  var sheet = new StyleSheet(options);\n\n  if (isBrowser) {\n    // \n    sheet.inject();\n  }\n\n  var stylis = new Stylis(stylisOptions);\n  stylis.use(options.stylisPlugins)(insertionPlugin);\n  var currentSourceMap = '';\n\n  function handleInterpolation(interpolation, couldBeSelectorInterpolation) {\n    if (interpolation == null) {\n      return '';\n    }\n\n    switch (typeof interpolation) {\n      case 'boolean':\n        return '';\n\n      case 'function':\n        if (interpolation.__emotion_styles !== undefined) {\n          var selector = interpolation.toString();\n\n          if (selector === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n            throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n          }\n\n          return selector;\n        }\n\n        if (this === undefined && process.env.NODE_ENV !== 'production') {\n          console.error('Interpolating functions in css calls is deprecated and will be removed in the next major version of Emotion.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        return handleInterpolation.call(this, this === undefined ? interpolation() : // $FlowFixMe\n        interpolation(this.mergedProps, this.context), couldBeSelectorInterpolation);\n\n      case 'object':\n        return createStringFromObject.call(this, interpolation);\n\n      default:\n        var cached = caches.registered[interpolation];\n        return couldBeSelectorInterpolation === false && cached !== undefined ? cached : interpolation;\n    }\n  }\n\n  var objectToStringCache = new WeakMap();\n\n  function createStringFromObject(obj) {\n    if (objectToStringCache.has(obj)) {\n      // $FlowFixMe\n      return objectToStringCache.get(obj);\n    }\n\n    var string = '';\n\n    if (Array.isArray(obj)) {\n      obj.forEach(function (interpolation) {\n        string += handleInterpolation.call(this, interpolation, false);\n      }, this);\n    } else {\n      Object.keys(obj).forEach(function (key) {\n        if (typeof obj[key] !== 'object') {\n          if (caches.registered[obj[key]] !== undefined) {\n            string += key + \"{\" + caches.registered[obj[key]] + \"}\";\n          } else {\n            string += processStyleName(key) + \":\" + processStyleValue(key, obj[key]) + \";\";\n          }\n        } else {\n          if (key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n            throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n          }\n\n          if (Array.isArray(obj[key]) && typeof obj[key][0] === 'string' && caches.registered[obj[key][0]] === undefined) {\n            obj[key].forEach(function (value) {\n              string += processStyleName(key) + \":\" + processStyleValue(key, value) + \";\";\n            });\n          } else {\n            string += key + \"{\" + handleInterpolation.call(this, obj[key], false) + \"}\";\n          }\n        }\n      }, this);\n    }\n\n    objectToStringCache.set(obj, string);\n    return string;\n  }\n\n  var name;\n  var stylesWithLabel;\n  var labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\n\n  var createClassName = function createClassName(styles, identifierName) {\n    return hashString(styles + identifierName) + identifierName;\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    var oldCreateClassName = createClassName;\n    var sourceMappingUrlPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n\n    createClassName = function createClassName(styles, identifierName) {\n      return oldCreateClassName(styles.replace(sourceMappingUrlPattern, function (sourceMap) {\n        currentSourceMap = sourceMap;\n        return '';\n      }), identifierName);\n    };\n  }\n\n  var createStyles = function createStyles(strings) {\n    var stringMode = true;\n    var styles = '';\n    var identifierName = '';\n\n    if (strings == null || strings.raw === undefined) {\n      stringMode = false;\n      styles += handleInterpolation.call(this, strings, false);\n    } else {\n      styles += strings[0];\n    }\n\n    for (var _len = arguments.length, interpolations = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      interpolations[_key - 1] = arguments[_key];\n    }\n\n    interpolations.forEach(function (interpolation, i) {\n      styles += handleInterpolation.call(this, interpolation, styles.charCodeAt(styles.length - 1) === 46 // .\n      );\n\n      if (stringMode === true && strings[i + 1] !== undefined) {\n        styles += strings[i + 1];\n      }\n    }, this);\n    stylesWithLabel = styles;\n    styles = styles.replace(labelPattern, function (match, p1) {\n      identifierName += \"-\" + p1;\n      return '';\n    });\n    name = createClassName(styles, identifierName);\n    return styles;\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    var oldStylis = stylis;\n\n    stylis = function stylis(selector, styles) {\n      oldStylis(selector, styles);\n      currentSourceMap = '';\n    };\n  }\n\n  function insert(scope, styles) {\n    if (caches.inserted[name] === undefined) {\n      current = '';\n      stylis(scope, styles);\n      caches.inserted[name] = current;\n    }\n  }\n\n  var css = function css() {\n    var styles = createStyles.apply(this, arguments);\n    var selector = key + \"-\" + name;\n\n    if (caches.registered[selector] === undefined) {\n      caches.registered[selector] = stylesWithLabel;\n    }\n\n    insert(\".\" + selector, styles);\n    return selector;\n  };\n\n  var keyframes = function keyframes() {\n    var styles = createStyles.apply(this, arguments);\n    var animation = \"animation-\" + name;\n    insert('', \"@keyframes \" + animation + \"{\" + styles + \"}\");\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    var styles = createStyles.apply(this, arguments);\n    insert('', styles);\n  };\n\n  function getRegisteredStyles(registeredStyles, classNames) {\n    var rawClassName = '';\n    classNames.split(' ').forEach(function (className) {\n      if (caches.registered[className] !== undefined) {\n        registeredStyles.push(className);\n      } else {\n        rawClassName += className + \" \";\n      }\n    });\n    return rawClassName;\n  }\n\n  function merge(className, sourceMap) {\n    var registeredStyles = [];\n    var rawClassName = getRegisteredStyles(registeredStyles, className);\n\n    if (registeredStyles.length < 2) {\n      return className;\n    }\n\n    return rawClassName + css(registeredStyles, sourceMap);\n  }\n\n  function cx() {\n    for (var _len2 = arguments.length, classNames = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      classNames[_key2] = arguments[_key2];\n    }\n\n    return merge(classnames(classNames));\n  }\n\n  function hydrateSingleId(id) {\n    caches.inserted[id] = true;\n  }\n\n  function hydrate(ids) {\n    ids.forEach(hydrateSingleId);\n  }\n\n  function flush() {\n    if (isBrowser) {\n      sheet.flush();\n      sheet.inject();\n    }\n\n    caches.inserted = {};\n    caches.registered = {};\n  }\n\n  if (isBrowser) {\n    var chunks = document.querySelectorAll(\"[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(chunks, function (node) {\n      // $FlowFixMe\n      sheet.tags[0].parentNode.insertBefore(node, sheet.tags[0]); // $FlowFixMe\n\n      node.getAttribute(\"data-emotion-\" + key).split(' ').forEach(hydrateSingleId);\n    });\n  }\n\n  var emotion = {\n    flush: flush,\n    hydrate: hydrate,\n    cx: cx,\n    merge: merge,\n    getRegisteredStyles: getRegisteredStyles,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    css: css,\n    sheet: sheet,\n    caches: caches\n  };\n  context.__SECRET_EMOTION__ = emotion;\n  return emotion;\n}\n\nexport default createEmotion;\n","import createEmotion from 'create-emotion';\n\nvar context = typeof global !== 'undefined' ? global : {};\n\nvar _createEmotion = createEmotion(context),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    caches = _createEmotion.caches;\n\nexport { flush, hydrate, cx, merge, getRegisteredStyles, injectGlobal, keyframes, css, sheet, caches };\n","import Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nconst h = Preact.h;\n\ninterface TraktIconProps {\n  className?: string;\n}\n\nlet className = css`\n  background-image: url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTQ0LjggMTQ0LjgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE0NC44IDE0NC44IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgY3g9IjcyLjQiIGN5PSI3Mi40IiByPSI3Mi40Ii8+DQoJPHBhdGggZmlsbD0iI0VEMjIyNCIgZD0iTTI5LjUsMTExLjhjMTAuNiwxMS42LDI1LjksMTguOCw0Mi45LDE4LjhjOC43LDAsMTYuOS0xLjksMjQuMy01LjNMNTYuMyw4NUwyOS41LDExMS44eiIvPg0KCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik01Ni4xLDYwLjZMMjUuNSw5MS4xTDIxLjQsODdsMzIuMi0zMi4yaDBsMzcuNi0zNy42Yy01LjktMi0xMi4yLTMuMS0xOC44LTMuMWMtMzIuMiwwLTU4LjMsMjYuMS01OC4zLDU4LjMNCgkJYzAsMTMuMSw0LjMsMjUuMiwxMS43LDM1bDMwLjUtMzAuNWwyLjEsMmw0My43LDQzLjdjMC45LTAuNSwxLjctMSwyLjUtMS42TDU2LjMsNzIuN0wyNywxMDJsLTQuMS00LjFsMzMuNC0zMy40bDIuMSwybDUxLDUwLjkNCgkJYzAuOC0wLjYsMS41LTEuMywyLjItMS45bC01NS01NUw1Ni4xLDYwLjZ6Ii8+DQoJPHBhdGggZmlsbD0iI0VEMUMyNCIgZD0iTTExNS43LDExMS40YzkuMy0xMC4zLDE1LTI0LDE1LTM5YzAtMjMuNC0xMy44LTQzLjUtMzMuNi01Mi44TDYwLjQsNTYuMkwxMTUuNywxMTEuNHogTTc0LjUsNjYuOGwtNC4xLTQuMQ0KCQlsMjguOS0yOC45bDQuMSw0LjFMNzQuNSw2Ni44eiBNMTAxLjksMjcuMUw2OC42LDYwLjRsLTQuMS00LjFMOTcuOCwyM0wxMDEuOSwyNy4xeiIvPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik03Mi40LDE0NC44QzMyLjUsMTQ0LjgsMCwxMTIuMywwLDcyLjRDMCwzMi41LDMyLjUsMCw3Mi40LDBzNzIuNCwzMi41LDcyLjQsNzIuNA0KCQkJCUMxNDQuOCwxMTIuMywxMTIuMywxNDQuOCw3Mi40LDE0NC44eiBNNzIuNCw3LjNDMzYuNSw3LjMsNy4zLDM2LjUsNy4zLDcyLjRzMjkuMiw2NS4xLDY1LjEsNjUuMXM2NS4xLTI5LjIsNjUuMS02NS4xDQoJCQkJUzEwOC4zLDcuMyw3Mi40LDcuM3oiLz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K\");\n  background-repeat: no-repeat;\n  background-origin: content-box;\n`;\n\nexport default class TraktIcon extends Component<TraktIconProps> {\n  render() {\n    return (\n      <div className={ `${className} ${this.props.className}` } />\n    );\n  }\n}","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class)|(on[A-Z].*)|((data|aria|x)-.*))$/i;\nvar index = memoize(reactPropsRegex.test.bind(reactPropsRegex));\n\nexport default index;\n","import PropTypes from 'prop-types';\nimport isPropValid from '@emotion/is-prop-valid';\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar channel = '__EMOTION_THEMING__';\n\n// https://github.com/styled-components/styled-components/blob/e05b3fe247e9d956bcde786cec376e32afb85bca/src/utils/create-broadcast.js\n\nvar _contextTypes;\nvar contextTypes = (_contextTypes = {}, _contextTypes[channel] = PropTypes.object, _contextTypes);\n\nfunction setTheme(theme) {\n  this.setState({\n    theme: theme\n  });\n}\nvar testPickPropsOnStringTag = isPropValid;\nvar testPickPropsOnComponent = function testPickPropsOnComponent(key) {\n  return key !== 'theme' && key !== 'innerRef';\n};\nvar testAlwaysTrue = function testAlwaysTrue() {\n  return true;\n};\nvar pickAssign = function pickAssign(testFn, target) {\n  var i = 2;\n  var length = arguments.length;\n\n  for (; i < length; i++) {\n    var source = arguments[i];\n\n    var _key = void 0;\n\n    for (_key in source) {\n      if (testFn(_key)) {\n        target[_key] = source[_key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar warnedAboutExtractStatic = false;\n\nfunction createEmotionStyled(emotion, view) {\n  var _createStyled = function createStyled(tag, options) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (tag === undefined) {\n        throw new Error('You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.');\n      }\n    }\n\n    var staticClassName;\n    var identifierName;\n    var stableClassName;\n    var shouldForwardProp;\n\n    if (options !== undefined) {\n      staticClassName = options.e;\n      identifierName = options.label;\n      stableClassName = options.target;\n      shouldForwardProp = tag.__emotion_forwardProp && options.shouldForwardProp ? function (propName) {\n        return tag.__emotion_forwardProp(propName) && // $FlowFixMe\n        options.shouldForwardProp(propName);\n      } : options.shouldForwardProp;\n    }\n\n    var isReal = tag.__emotion_real === tag;\n    var baseTag = staticClassName === undefined ? isReal && tag.__emotion_base || tag : tag;\n\n    if (typeof shouldForwardProp !== 'function') {\n      shouldForwardProp = typeof baseTag === 'string' && baseTag.charAt(0) === baseTag.charAt(0).toLowerCase() ? testPickPropsOnStringTag : testPickPropsOnComponent;\n    }\n\n    return function () {\n      var args = arguments;\n      var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n      if (identifierName !== undefined) {\n        styles.push(\"label:\" + identifierName + \";\");\n      }\n\n      if (staticClassName === undefined) {\n        if (args[0] == null || args[0].raw === undefined) {\n          styles.push.apply(styles, args);\n        } else {\n          styles.push(args[0][0]);\n          var len = args.length;\n          var i = 1;\n\n          for (; i < len; i++) {\n            styles.push(args[i], args[0][i]);\n          }\n        }\n      } else if (process.env.NODE_ENV !== 'production' && !warnedAboutExtractStatic) {\n        console.warn('extractStatic is deprecated and will be removed in emotion@10. We recommend disabling extractStatic or using other libraries like linaria or css-literal-loader');\n        warnedAboutExtractStatic = true;\n      }\n\n      var Styled =\n      /*#__PURE__*/\n      function (_view$Component) {\n        _inheritsLoose(Styled, _view$Component);\n\n        function Styled() {\n          return _view$Component.apply(this, arguments) || this;\n        }\n\n        var _proto = Styled.prototype;\n\n        _proto.componentWillMount = function componentWillMount() {\n          if (this.context[channel] !== undefined) {\n            this.unsubscribe = this.context[channel].subscribe(setTheme.bind(this));\n          }\n        };\n\n        _proto.componentWillUnmount = function componentWillUnmount() {\n          if (this.unsubscribe !== undefined) {\n            this.context[channel].unsubscribe(this.unsubscribe);\n          }\n        };\n\n        _proto.render = function render() {\n          var props = this.props,\n              state = this.state;\n          this.mergedProps = pickAssign(testAlwaysTrue, {}, props, {\n            theme: state !== null && state.theme || props.theme || {}\n          });\n          var className = '';\n          var classInterpolations = [];\n\n          if (props.className) {\n            if (staticClassName === undefined) {\n              className += emotion.getRegisteredStyles(classInterpolations, props.className);\n            } else {\n              className += props.className + \" \";\n            }\n          }\n\n          if (staticClassName === undefined) {\n            className += emotion.css.apply(this, styles.concat(classInterpolations));\n          } else {\n            className += staticClassName;\n          }\n\n          if (stableClassName !== undefined) {\n            className += \" \" + stableClassName;\n          }\n\n          return view.createElement(baseTag, // $FlowFixMe\n          pickAssign(shouldForwardProp, {}, props, {\n            className: className,\n            ref: props.innerRef\n          }));\n        };\n\n        return Styled;\n      }(view.Component);\n\n      Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n\n      if (tag.defaultProps !== undefined) {\n        // $FlowFixMe\n        Styled.defaultProps = tag.defaultProps;\n      }\n\n      Styled.contextTypes = contextTypes;\n      Styled.__emotion_styles = styles;\n      Styled.__emotion_base = baseTag;\n      Styled.__emotion_real = Styled;\n      Styled.__emotion_forwardProp = shouldForwardProp;\n      Object.defineProperty(Styled, 'toString', {\n        value: function value() {\n          if (process.env.NODE_ENV !== 'production' && stableClassName === undefined) {\n            return 'NO_COMPONENT_SELECTOR';\n          } // $FlowFixMe\n\n\n          return \".\" + stableClassName;\n        }\n      });\n\n      Styled.withComponent = function (nextTag, nextOptions) {\n        return _createStyled(nextTag, nextOptions !== undefined ? // $FlowFixMe\n        pickAssign(testAlwaysTrue, {}, options, nextOptions) : options).apply(void 0, styles);\n      };\n\n      return Styled;\n    };\n  };\n\n  if (process.env.NODE_ENV !== 'production' && typeof Proxy !== 'undefined') {\n    _createStyled = new Proxy(_createStyled, {\n      get: function get(target, property) {\n        switch (property) {\n          // react-hot-loader tries to access this stuff\n          case '__proto__':\n          case 'name':\n          case 'prototype':\n          case 'displayName':\n            {\n              return target[property];\n            }\n\n          default:\n            {\n              throw new Error(\"You're trying to use the styled shorthand without babel-plugin-emotion.\" + (\"\\nPlease install and setup babel-plugin-emotion or use the function call syntax(`styled('\" + property + \"')` instead of `styled.\" + property + \"`)\"));\n            }\n        }\n      }\n    });\n  }\n\n  return _createStyled;\n}\n\nexport default createEmotionStyled;\n","import preact from 'preact';\nimport * as emotion from 'emotion';\nexport * from 'emotion';\nimport createEmotionStyled from 'create-emotion-styled';\n\nvar index = createEmotionStyled(emotion, preact);\n\nexport default index;\n","import TraktApi from \"../TraktApi\";\nimport TraktIcon from \"./TraktIcon\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nimport styled from \"preact-emotion\";\nconst h = Preact.h;\n\ninterface ConnectButtonProps {\n  api: TraktApi;\n}\n\ninterface ConnectButtonState {\n  isConnected: boolean;\n}\n\nlet className = css`\n  background-color: black;\n  border: 1px solid #222;\n  border-radius: 5px;\n  padding: 2px 7px;\n  color: white;\n  font-size: 11px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst Icon = styled(TraktIcon)`\n  height: 14px;\n  width: 14px;\n  margin-right: 5px;\n`;\n\nexport default class ConnectButton extends Component<ConnectButtonProps, ConnectButtonState> {\n  constructor(props) {\n    super(props);\n    this.state = { isConnected: this.props.api.isAuthenticated() };\n\n    this._handleAuthenticationChanged = this._handleAuthenticationChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.api.onAuthenticationChanged.sub(this._handleAuthenticationChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.api.onAuthenticationChanged.unsub(this._handleAuthenticationChanged);\n  }\n\n  private _handleAuthenticationChanged() {\n    this.setState({ isConnected: this.props.api.isAuthenticated() });\n  }\n\n  private _handleClick() {\n    let api = this.props.api;\n    if (api.isAuthenticated()) {\n      api.disconnect();\n    } else {\n      api.authenticate();\n    }\n  }\n\n  render() {\n    return (\n      <div className={className} onClick={ this._handleClick }>\n        <Icon />\n        <div class=\"text\">{ this.state.isConnected ? \"Disconnect from Trakt\" : \"Connect with Trakt\" }</div>\n      </div>\n    );\n  }\n}","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nconst h = Preact.h;\n\ninterface ScrobbleInfoProps {\n  scrobbleData: ITraktScrobbleData;\n}\n\ninterface ScrobbleInfoState {\n}\n\nconst className = css`\n& .info h2 {\n  font-size: 17px;\n  padding-bottom: 4px;\n}\n`;\n\nexport default class ScrobbleInfo extends Component<ScrobbleInfoProps, ScrobbleInfoState> {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let data = this.props.scrobbleData;\n    let info;\n\n    // Still looking up\n    if (!data) {\n      info = (\n        <div class=\"lookup\">Loading</div>\n      );\n    \n    // Lookup succeeded\n    } else {\n      \n      if (data.movie && data.movie.ids) {\n        let movieUrl = `https://trakt.tv/movies/${data.movie.ids.slug}`;\n        info = (\n          <div class=\"info\">\n            <h2><a href={ movieUrl } target=\"_blank\">{ data.movie.title } ({ data.movie.year })</a></h2>\n          </div>\n        );\n      } else if (data.show && data.show.ids && data.episode && data.episode.ids) {\n        let showUrl = `https://trakt.tv/shows/${data.show.ids.slug}`;\n        let episodeUrl = `${showUrl}/seasons/${data.episode.season}/episodes/${data.episode.number}`;\n        let episodeTitle = data.episode.title ? `: ${data.episode.title}` : null;\n        info = (\n          <div class=\"info\">\n            <h2><a href={ showUrl } target=\"_blank\">{ data.show.title } ({ data.show.year })</a></h2>\n            <p><a href={ episodeUrl } target=\"_blank\">\n              Season { data.episode.season } Episode { data.episode.number }{ episodeTitle }\n            </a></p>\n          </div>\n        );\n      } else {\n        info = (\n          <div class=\"error\">\n            <h2>Failed to scrobble:</h2>\n            <p>Missing data</p>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={ className }>\n        { info }\n      </div>\n    );\n  }\n}","import Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nconst h = Preact.h;\n\ninterface ButtonProps {\n  text: string;\n  onClick: JSX.EventHandler<MouseEvent>;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst className = css`\n  font-size: 12px;\n  font-weight: bold;\n  color: #eee;\n  background-color: #333;\n  border: none;\n  border-radius: 3px;\n  margin: 5px;\n  cursor: pointer;\n  padding: 5px 10px 5px 10px;\n  flex-grow: 1;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background-color: #555;\n  }\n`;\n\nexport default class Button extends Component<ButtonProps> {\n  render() {\n    return (\n      <button className={ `${className} ${this.props.className} ${this.props.disabled ? 'disabled' : ''}` } onClick={ this.props.onClick } >\n        { this.props.text }\n      </button>\n    );\n  }\n}","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport TraktApi, { ITraktHistoryItem, ITraktScrobbleData } from \"../TraktApi\";\nimport TraktHistory from \"../TraktHistory\";\nimport Button from \"./Button\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nconst h = Preact.h;\n\ninterface ScrobbleHistoryProps {\n  scrobbleData: ITraktScrobbleData;\n  history: TraktHistory;\n}\n\ninterface ScrobbleHistoryState {\n  historyItems: ITraktHistoryItem[];\n}\n\nconst className = css`\n  & div {\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #666;\n    height: 24px;\n    align-items: flex-end;\n  }\n\n  & button {\n    flex-grow: 0;\n    font-size: 9px;\n    padding: 2px 10px;\n    margin-right: 0;\n    font-weight: normal;\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.2s ease;\n  }\n\n  & button:hover {\n    background-color: #eb3b14;\n  }\n\n  & div:hover button {\n    opacity: 1;\n    visibility: visible;\n  }\n`;\n\nconst ActionMap = {\n  scrobble: \"Scrobbled\",\n  checkin: \"Checked in\",\n  watch: \"Watched\"\n};\n\nexport default class ScrobbleHistory extends Component<ScrobbleHistoryProps, ScrobbleHistoryState> {\n  private _traktId: number;\n  private _formatter: Intl.DateTimeFormat;\n\n  constructor(props) {\n    super(props);\n    this._formatter = new Intl.DateTimeFormat(navigator.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\", \n      hour: \"numeric\", \n      minute: \"numeric\"\n    });\n    this.state = { historyItems: null };\n\n    this._handleHistoryChanged = this._handleHistoryChanged.bind(this);\n  }\n\n  componentWillMount() {\n    let data = this.props.scrobbleData;\n    this._traktId = TraktScrobble.traktIdFromData(data);\n    if (this._traktId !== 0) {\n      let type = TraktScrobble.typeFromData(data);\n      this.props.history.sub(this._traktId, this._handleHistoryChanged);\n      this.props.history.load(type === \"movie\" ? \"movies\" : \"episodes\", this._traktId);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.history.unsub(this._traktId, this._handleHistoryChanged);\n  }\n\n  private _handleHistoryChanged(items: ITraktHistoryItem[]) {\n    this.setState({ historyItems: items });\n  }\n\n  private async _handleRemove(e: MouseEvent, item: ITraktHistoryItem) {\n    let el = e.target as HTMLElement;\n    el.classList.add(\"disabled\");\n    el.innerText = \"Removing...\";\n\n    await this.props.history.remove(item.id);\n\n    el.classList.remove(\"disabled\");\n    el.innerText = \"Remove\";\n  }\n  \n  render() {\n    if (this.state.historyItems && this.state.historyItems.length > 0) {\n      let rows = [];\n      for (let item of this.state.historyItems) {\n        rows.push(\n          <div>\n            <span>{ ActionMap[item.action] } at { this._formatter.format(new Date(item.watched_at)) }</span>\n            <Button text=\"Remove\" onClick={ (e) => this._handleRemove(e, item) } />\n          </div>\n        );\n      }\n      return (\n        <div className={ className }>\n          <h2>Watch History</h2>\n          { rows }\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}","import TraktRoller from \"../TraktRoller\";\nimport TraktScrobble, { TraktScrobbleState, PlaybackState } from \"../TraktScrobble\";\nimport Button from \"./Button\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nimport styled from \"preact-emotion\";\nconst h = Preact.h;\n\ninterface ScrobbleControlProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n}\n\ninterface ScrobbleControlState {\n  scrobbleState: TraktScrobbleState;\n  scrobblingEnabled: boolean;\n}\n\nconst className = css`\n  display: flex;\n  margin: 5px -5px;\n  justify-content: space-between;\n\n  & > div, & > button {\n    width: 33%;\n  }\n\n  & .state {\n    font-size: 12px;\n    font-weight: bold;\n    text-align: center;\n    color: #fff;\n    background-color: #ed1c24;\n    border: none;\n    border-radius: 3px;\n    margin: 5px;\n    padding: 5px 10px 5px 10px;\n    width: 20%;\n  }\n`;\n\nconst ScrobbleNowButton = styled(Button)`\n  color: #8e44ad;\n  border: 1px solid #8e44ad;\n  background: none;\n\n  &:hover {\n    background-color: #8e44ad;\n    color: #fff;\n  }\n`;\n\nconst EnableScrobbleButton = styled(Button)`\n  color: #16a085;\n  border: 1px solid #16a085;\n  background: none;\n\n  &:hover {\n    background-color: #16a085;\n    color: #fff;\n  }\n`;\n\nconst EnabledStates = [\n  TraktScrobbleState.Found,\n  TraktScrobbleState.Started,\n  TraktScrobbleState.Paused\n];\n\nexport default class ScrobbleControl extends Component<ScrobbleControlProps, ScrobbleControlState> {\n  constructor(props) {\n    super(props);\n    this.state = { scrobbleState: this.props.scrobble.state, scrobblingEnabled: this.props.roller.enabled };\n\n    this._onScrobbleStateChanged = this._onScrobbleStateChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleScrobbleNowClick = this._handleScrobbleNowClick.bind(this);\n    this._handleEnableScrobbleClick = this._handleEnableScrobbleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStateChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ scrobblingEnabled: enabled });\n  }\n\n  private _handleScrobbleNowClick() {\n    this.props.scrobble.scrobbleNow();\n  }\n\n  private _handleEnableScrobbleClick() {\n    this.props.roller.enabled = !this.props.roller.enabled;\n  }\n\n  render() {\n    let state = this.props.scrobble.enabled ? \"Disabled\" : TraktScrobbleState[this.props.scrobble.state];\n    let title = this.props.scrobble.error || \"\";\n\n    let disabled = !EnabledStates.includes(this.state.scrobbleState);\n    let label = this.props.roller.enabled ? \"Enable Scrobbling\" : \"Disable Scrobbling\";\n\n    return (\n      <div className={ className }>\n        <div class=\"state\" title={ title }>{ state }</div>\n        <ScrobbleNowButton text=\"Scrobble Now\" onClick={ this._handleScrobbleNowClick } disabled={ disabled } />\n        <EnableScrobbleButton text={ label } onClick={ this._handleEnableScrobbleClick } />\n      </div>\n    );\n  }\n}","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport ScrobbleInfo from \"./ScrobbleInfo\";\nimport ScrobbleHistory from \"./ScrobbleHistory\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\nimport TraktHistory from \"../TraktHistory\";\nimport ScrobbleControl from \"./ScrobbleControl\";\nimport TraktRoller from \"../TraktRoller\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nconst h = Preact.h;\n\ninterface PopupProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n  history: TraktHistory;\n}\n\ninterface PopupState {\n  scrobbleData: ITraktScrobbleData;\n}\n\nconst className = css`\n  color: #eee;\n\n  & > div {\n    padding: 15px;\n  }\n\n  & a, & p a {\n    color: #eee;\n    transition: color 0.2s ease;\n  }\n\n  & h2 {\n    font-size: 13px;\n    margin: 0;\n  }\n\n  & h2 a:hover, & p a:hover {\n    color: #ed1c24;\n    text-decoration: none;\n  }\n\n  button.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n`;\n\nexport default class Popup extends Component<PopupProps, PopupState> {\n  constructor(props) {\n    super(props);\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n  }\n\n  componentWillMount() {\n    this.setState({ scrobbleData: this.props.scrobble.data });\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStatusChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStatusChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleData: this.props.scrobble.data });\n  }\n\n  render() {\n    let scrobble = this.props.scrobble;\n\n    return (\n      <div className={ className }>\n        <ScrobbleInfo scrobbleData={ this.state.scrobbleData } />\n        <ScrobbleHistory \n          scrobbleData={ this.state.scrobbleData } \n          history={ this.props.history } \n          key={ TraktScrobble.traktIdFromData(this.state.scrobbleData) }\n        />\n        <ScrobbleControl scrobble={ this.props.scrobble } roller={ this.props.roller } />\n      </div>\n    );\n  }\n}","import TraktRoller from \"../TraktRoller\";\nimport TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport TraktHistory from \"../TraktHistory\";\nimport TraktIcon from \"./TraktIcon\";\nimport Popup from \"./Popup\";\n\nimport Preact, { Component } from \"preact\";\nimport { css } from \"emotion\";\nimport styled from \"preact-emotion\";\nconst h = Preact.h;\n\ninterface StatusButtonProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n  history: TraktHistory;\n}\n\ninterface StatusButtonState {\n  scrobbleState: TraktScrobbleState;\n  enabled: boolean;\n}\n\nconst popupClassName = css`\n  background: #161616;\n  border: 1px solid #fff;\n  position: absolute;\n  width: 450px;\n  z-index: 100;\n  left: -209px;\n  border-radius: 4px;\n  transition: all 0.2s ease-in;\n  transition-delay: 0.2s;\n  visibility: hidden;\n  opacity: 0;\n  bottom: 55px;\n\n  &:after, &:before {\n    top: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: \" \";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n  &:after {\n    border-color: rgba(0, 0, 0, 0);\n    border-top-color: #000000;\n    border-width: 15px;\n    margin-left: -15px;\n  }\n  &:before {\n    border-color: rgba(255, 255, 255, 0);\n    border-top-color: #fff;\n    border-width: 17px;\n    margin-left: -17px;\n  }\n  & .hover-blocker {\n    position: absolute;\n    bottom: -75px;\n    left: 33%;\n    width: 33%;\n    height: 75px;\n  }\n`;\n\nconst className = css`\n  position: relative;\n\n  &:hover .${popupClassName} {\n    visibility: visible;\n    opacity: 1;\n    bottom: 44px;\n  }\n`;\n\nconst buttonClassName = css`\n  width: 38px;\n  height: 24px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  position: relative;\n  z-index: 101;\n\n  &.state-disabled {\n    filter: opacity(0.5);\n  }\n  &.state-scrobbled {\n    filter: hue-rotate(150deg) brightness(1.3);\n  }\n  &.state-error, &.state-notfound {\n    filter: grayscale(1) brightness(2);\n  }\n`;\n\nconst Icon = styled(TraktIcon)`\n  height: 100%;\n`;\n\nexport default class StatusButton extends Component<StatusButtonProps, StatusButtonState> {\n  constructor(props) {\n    super(props);\n    this.state = { scrobbleState: this.props.scrobble.state, enabled: this.props.roller.enabled };\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ enabled: enabled });\n  }\n\n  private _handleClick() {\n    window.open(this.props.scrobble.scrobbleUrl(), '_blank');\n  }\n\n  render() {\n    let state = this.state.enabled ? \"disabled\" : TraktScrobbleState[this.state.scrobbleState].toLowerCase();\n    let stateClass = \"state-\" + state;\n    let title = this.props.scrobble.error || TraktScrobbleState[this.state.scrobbleState];\n    return (\n      <div className={ `${className} right` }>\n        <button className={ `${buttonClassName} ${stateClass}` } title={ title } onClick={ this._handleClick }>\n          <Icon />\n        </button>\n        <div className={ popupClassName }>\n          <Popup roller={ this.props.roller } scrobble={ this.props.scrobble } history={ this.props.history } />\n          <div class=\"hover-blocker\"></div>\n        </div>\n      </div>\n    );\n  }\n}","import TraktApi, { ITraktHistoryItem } from \"./TraktApi\";\n\ninterface History {\n  traktId: number;\n  items: ITraktHistoryItem[] | null, \n  subscribers: Array<(history: ITraktHistoryItem[]) => void>;\n}\n\n/** Load a manage Trakt watched history */\nexport default class TraktHistory {\n  private _api: TraktApi;\n  private _histories: { [key: string]: History } = {};\n\n  constructor(api: TraktApi) {\n    this._api = api;\n  }\n\n  /** Load history for a movie or episode */\n  public async load(type: 'movies' | 'episodes', traktId: number, reload: boolean = false): Promise<ITraktHistoryItem[]> {\n    if (!reload && this._histories[traktId] && this._histories[traktId].items) {\n      return this._histories[traktId].items;\n    }\n\n    let result = await this._api.history(type, traktId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error loading scrobble history (${result.error})`)\n      return [];\n    }\n\n    this._update(traktId, result);\n    return result;\n  }\n\n  /** Add a new item to the history */\n  public add(traktId: number, item: ITraktHistoryItem) {\n    let history = this._getOrCreateHistory(traktId);\n    if (!history.items) history.items = [];\n    history.items.push(item);\n    history.items.sort((a, b) => new Date(b.watched_at).valueOf() - new Date(a.watched_at).valueOf());\n    this._update(traktId, history.items);\n  }\n\n  /** Remove a watched entry by its id */\n  public async remove(historyId: number): Promise<void> {\n    let result = await this._api.historyRemove(historyId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error removing scrobble (${result.error})`)\n      return;\n    } else if (result.not_found.ids.includes(historyId)) {\n      console.warn(`TraktRoller: Could not remove history id ${historyId}, not found on server`);\n    }\n\n    outer:\n    for (let traktId of Object.keys(this._histories)) {\n      let history = this._histories[traktId];\n      if (!history.items) continue;\n      for (let i = 0; i < history.items.length; i++) {\n        if (history.items[i].id === historyId) {\n          history.items.splice(i, 1);\n          this._update(history.traktId, history.items);\n          break outer;\n        }\n      }\n    }\n  }\n\n  /** Get notified when the history changes */\n  public sub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._getOrCreateHistory(traktId);\n    history.subscribers.push(callback);\n  }\n\n  /** Remove a history subscriber */\n  public unsub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._histories[traktId];\n    if (!history) return;\n\n    let index = history.subscribers.indexOf(callback);\n    if (index >= 0) history.subscribers.splice(index, 1);\n  }\n\n  private _getOrCreateHistory(traktId: number) {\n    let history = this._histories[traktId];\n    if (!history) {\n      history = this._histories[traktId] = { traktId: traktId, items: null, subscribers: [] };\n    }\n    return history;\n  }\n\n  private _update(traktId: number, items: ITraktHistoryItem[]) {\n    let history = this._getOrCreateHistory(traktId);\n    history.items = items;\n    for (let sub of history.subscribers) { sub(items); }\n  }\n}","import TraktApi, { ITraktScrobbleData, ITraktApiOptions, ITraktScobbleResult, ITraktHistoryItem, IStorage, LocalStorageAdapter } from \"./TraktApi\";\nimport TraktScrobble, { TraktScrobbleState, PlaybackState } from \"./TraktScrobble\";\nimport ConnectButton from \"./ui/ConnectButton\";\nimport StatusButton from \"./ui/StatusButton\";\nimport { SimpleEventDispatcher } from \"ste-simple-events\";\n\nimport Preact, { render } from 'preact';\nimport TraktHistory from \"./TraktHistory\";\nconst h = Preact.h;\n\ninterface ITraktRollerOptions extends ITraktApiOptions {\n  //\n}\n\nconst EpisodeRegex = /Episode (\\d+)/;\nconst SeasonRegex = /Season (\\d+)/;\n\nconst MovieRegexes = [\n  /Movie$/i,\n  /Movie (Dub)$/i,\n  /Movie (Sub)$/i,\n  /Movie (Dubbed)$/i,\n  /Movie (Subtitled)$/i,\n  /^Movie - /i,\n  /The Movie/i,\n];\n\nconst ScrobblingEnabledKey: string = 'TraktRoller.enabled';\n\nexport default class TraktRoller {\n  public onEnabledChanged = new SimpleEventDispatcher<boolean>();\n\n  private _player: playerjs.Player;\n  private _storage: IStorage;\n  private _api: TraktApi;\n  private _scrobble?: TraktScrobble;\n  private _history: TraktHistory;\n  private _enabled: boolean;\n\n  private _duration: number;\n  private _currentTime: number;\n\n  constructor(options: ITraktRollerOptions) {\n    console.log(\"TraktRoller\");\n\n    this._storage = options.storage || new LocalStorageAdapter();\n    this._loadPrefs();\n\n    this._api = new TraktApi(options);\n    this._api.onAuthenticationChanged.sub(this._onAuthenticationChange.bind(this));\n    this._api.loadTokens();\n\n    this._createFooterButton();\n    this._waitForPlayer();\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n    this._enabled = value;\n\n    this._storage.setValue(ScrobblingEnabledKey, value ? \"true\" : \"false\");\n    if (this._scrobble) this._scrobble.enabled = value;\n\n    this.onEnabledChanged.dispatch(value);\n  }\n\n  private async _loadPrefs() {\n    this._enabled = await this._storage.getValue(ScrobblingEnabledKey) === \"true\";\n  }\n\n  private _waitForPlayer() {\n    if (unsafeWindow.VILOS_PLAYERJS) {\n      this._loadPlayer(unsafeWindow.VILOS_PLAYERJS);\n    } else {\n      // Use a setter to wait for the player to be set\n      let value: any;\n      Object.defineProperty(unsafeWindow, \"VILOS_PLAYERJS\", {\n        get: ()=> value,\n        set: (v)=> {\n          value = v;\n          this._loadPlayer(v);\n        }\n      });\n    }\n  }\n\n  private _loadPlayer(player: playerjs.Player) {\n    player.on(playerjs.EVENTS.READY, () => this._playerReady(player));\n  }\n\n  private _playerReady(player: playerjs.Player) {\n    if (!this._api.isAuthenticated()) return;\n\n    let data = this._getScrobbleData();\n    if (!data) return;\n\n    this._player = player;\n    this._player.on(playerjs.EVENTS.TIMEUPDATE,  (info) => this._onTimeChanged(info));\n    this._player.on(playerjs.EVENTS.PLAY,  () => this._onPlaybackStateChange(PlaybackState.Playing));\n    this._player.on(playerjs.EVENTS.PAUSE, () => this._onPlaybackStateChange(PlaybackState.Paused));\n    this._player.on(playerjs.EVENTS.ENDED, () => this._onPlaybackStateChange(PlaybackState.Ended));\n    this._player.on(playerjs.EVENTS.ERROR, () => this._onPlaybackStateChange(PlaybackState.Ended));\n\n    this._history = new TraktHistory(this._api);\n\n    this._scrobble = new TraktScrobble(this._api, data);\n    this._scrobble.enabled = this.enabled;\n    this._scrobble.onStateChanged.sub(this._onScrobbleStatusChanged.bind(this));\n    this._scrobble.onScrobbled.sub(this._onScrobbled.bind(this));\n\n    this._createStatusButton();\n  }\n\n  private _onTimeChanged(info: { seconds: number, duration: number }) {\n    this._currentTime = info.seconds;\n    this._duration = info.duration;\n    if (this._scrobble) this._scrobble.setPlaybackTime(info.seconds, info.duration);\n  }\n\n  private _onPlaybackStateChange(state: PlaybackState) {\n    if (!this._scrobble) return;\n    this._scrobble.setPlaybackState(state, this._getProgress());\n  }\n\n  private _getProgress(): number {\n    if (!this._duration) {\n      console.warn(`TraktRoller: Duration is not set (${this._duration})`);\n      return 0;\n    } else if (this._duration === undefined) {\n      console.warn(\"TraktRoller: Current time is not set\");\n      return 0;\n    }\n    \n    return this._currentTime / this._duration * 100;\n  }\n\n  private _getScrobbleData(): ITraktScrobbleData |null {\n    let buildDate = new Date(process.env.BUILD_DATE);\n    const data: ITraktScrobbleData = {\n      progress: this._getProgress(),\n      app_version: process.env.VERSION,\n      app_date: `${buildDate.getFullYear()}-${buildDate.getMonth() + 1}-${buildDate.getDate()}`\n    };\n\n    const titleElement = document.querySelector('#showmedia_about_episode_num');\n    if (!titleElement || titleElement.textContent.length == 0) {\n      console.error(\"TraktRoller: Could not find video title\");\n      return null;\n    }\n    let showTitle = titleElement.textContent.trim();\n\n    let episodeTitle: string = undefined;\n    const episodeTitleElement = document.querySelector('#showmedia_about_name');\n    if (episodeTitleElement) {\n      episodeTitle = episodeTitleElement.textContent.trim();\n      if (episodeTitle) {\n        if (episodeTitle.startsWith(\"\")) {\n          episodeTitle = episodeTitle.substring(1);\n        }\n        if (episodeTitle.endsWith(\"\")) {\n          episodeTitle = episodeTitle.substring(0, episodeTitle.length - 1);\n        }\n      }\n    }\n\n    let seasonNumber = 1;\n    let episodeNumber = 0;\n    const episodeElement = document.querySelector('#showmedia_about_media h4:nth-child(2)');\n    if (episodeElement && episodeElement.textContent.length > 0) {\n      const seasonMatch = SeasonRegex.exec(episodeElement.textContent);\n      if (seasonMatch) {\n        seasonNumber = parseInt(seasonMatch[1]);\n      }\n      \n      const episodeMatch = EpisodeRegex.exec(episodeElement.textContent);\n      if (episodeMatch) {\n        episodeNumber = parseInt(episodeMatch[1]);\n      }\n    }\n\n    if (episodeTitle && MovieRegexes.some(r => r.test(episodeTitle))) {\n      data.movie = {\n        title: showTitle\n      };\n    } else {\n      data.show = {\n        title: showTitle\n      };\n      data.episode = {\n        season: seasonNumber,\n        number: episodeNumber,\n        title: episodeTitle\n      };\n    }\n\n    return data;\n  }\n\n  private _onAuthenticationChange(isAuthenticated: boolean) {\n    if (!isAuthenticated) {\n      this._api.checkAuthenticationResult(window.location.href);\n    }\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    //\n  }\n\n  private _onScrobbled(result: ITraktScobbleResult) {\n    var item: ITraktHistoryItem = {\n      id: result.id,\n      watched_at: new Date().toISOString(),\n      action: \"scrobble\",\n      type: (result.movie ? 'movie' : 'episode'),\n      movie: result.movie,\n      show: result.show,\n      episode: result.episode\n    };\n    let traktId = result.movie ? result.movie.ids.trakt : result.episode.ids.trakt;\n    this._history.add(traktId, item);\n  }\n\n  private _createFooterButton() {\n    let footer = document.querySelector('#social_media');\n    if (!footer) {\n      console.error(\"TraktRoller: Could not find footer to add trakt connect button\");\n      return;\n    }\n\n    render(\n      <div class=\"footer-column\">\n        <ConnectButton api={ this._api } />\n      </div>,\n      footer\n    );\n  }\n\n  private _createStatusButton() {\n    let container = document.querySelector('.showmedia-submenu');\n    if (!container) {\n      console.error(\"TraktRoller: Could not find share row to add trakt status button\");\n      return;\n    }\n\n    render((\n      <StatusButton roller={ this } scrobble={ this._scrobble } history={ this._history } />\n    ), container);\n  }\n}","import TraktRoller from \"./TraktRoller\";\nimport { GreaseMonkeyStorageAdapter } from \"./TraktApi\";\n\nnew TraktRoller({\n  client_id: \"5ac1bf2ba188fc93f941eb0788ef5cb6e0e4bf96b882e914e6d0c17dacc8e7f2\",\n  client_secret: \"3712241a1c467769e6c03336abb5fb9911f8665354d2aaffaa9f817e147a34ca\",\n  storage: new GreaseMonkeyStorageAdapter()\n});\n"]}