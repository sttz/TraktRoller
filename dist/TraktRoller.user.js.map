{"version":3,"sources":["../node_modules/ste-core/dist/management.js","../node_modules/ste-core/dist/subscription.js","../node_modules/ste-core/dist/dispatching.js","../node_modules/ste-core/dist/index.js","../node_modules/ste-events/dist/events.js","../node_modules/ste-events/dist/index.js","../node_modules/ste-simple-events/dist/simple-events.js","../node_modules/ste-simple-events/dist/index.js","../node_modules/ste-signals/dist/signals.js","../node_modules/ste-signals/dist/index.js","../node_modules/strongly-typed-events/dist/index.js","TraktApi.ts","TraktScrobble.ts","../src/constants.js","../src/options.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","../node_modules/@emotion/sheet/dist/sheet.browser.esm.js","../node_modules/@emotion/stylis/dist/stylis.browser.esm.js","../node_modules/@emotion/weak-memoize/dist/weak-memoize.browser.esm.js","../node_modules/@emotion/cache/dist/cache.browser.esm.js","../node_modules/@emotion/hash/dist/hash.browser.esm.js","../node_modules/@emotion/unitless/dist/unitless.browser.esm.js","../node_modules/@emotion/memoize/dist/memoize.browser.esm.js","../node_modules/@emotion/serialize/dist/serialize.browser.esm.js","../node_modules/@emotion/utils/dist/utils.browser.esm.js","../node_modules/create-emotion/dist/create-emotion.browser.esm.js","../node_modules/emotion/dist/emotion.esm.js","ui/TraktIcon.tsx","ui/ConnectButton.tsx","ui/ScrobbleInfo.tsx","ui/Button.tsx","ui/ScrobbleHistory.tsx","ui/ScrobbleControl.tsx","ui/Popup.tsx","ui/StatusButton.tsx","TraktHistory.ts","TraktRoller.tsx","index.ts"],"names":["Object","defineProperty","exports","value","EventManagement","unsub","propagationStopped","prototype","stopPropagation","Subscription","handler","isOnce","isExecuted","execute","executeAsync","scope","args","fn","setTimeout","apply","__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","management_1","require","subscription_1","DispatcherBase","_wrap","DispatcherWrapper","_subscriptions","get","enumerable","configurable","subscribe","_this","push","unsubscribe","sub","one","has","some","splice","_dispatch","_loop_1","ev","nargs","slice","call","this_1","cleanup","_i","_a","state_1","indexOf","asEvent","clear","EventListBase","_events","name","event","createDispatcher","remove","dispatcher","_subscribe","_unsubscribe","_one","_has","_clear","_count","count","dispatching_1","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","ste_core_1","EventDispatcher","_super","dispatch","sender","dispatchAsync","NonUniformEventList","EventList","EventHandlingBase","events_1","SimpleEventDispatcher","NonUniformSimpleEventList","SimpleEventList","SimpleEventHandlingBase","simple_events_1","SignalDispatcher","SignalList","SignalHandlingBase","signals_1","ste_events_1","ste_simple_events_1","ste_signals_1","options","isValidElement","q","defer","prevDebounce","IS_HYDRATE","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","defaultProps","undefined","createVNode","key","ref","vnode","_children","_parent","_depth","_dom","_lastDomChild","_component","createRef","Fragment","Component","context","getDomSibling","childIndex","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","component","commitQueue","newDom","oldDom","parentDom","sort","_vnode","pop","_parentDom","diff","_context","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","isSvg","excessDomChildren","isHydrating","oldVNode","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","outer","appendChild","nextSibling","insertBefore","unmount","applyRef","callback","flattened","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","oldValue","useCapture","nameLower","cssText","replace","toLowerCase","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","cctx","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","render","doRender","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","_force","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","cb","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_props","old","error","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","sheetForTag","tag","sheet","styleSheets","ownerNode","createStyleElement","nonce","StyleSheet","isSpeedy","speedy","tags","ctr","container","before","_proto","insert","rule","_tag","isImportRule","charCodeAt","insertRule","cssRules","console","warn","flush","forEach","stylis_min","W","M","h","m","v","n","g","x","K","u","l","I","t","B","J","y","f","F","G","C","N","trim","charAt","substring","ca","O","A","X","H","D","z","join","da","ea","fa","w","L","P","Y","E","ha","Q","split","ia","Z","ja","ka","aa","ba","la","ma","R","na","oa","S","T","U","prefix","V","use","set","weakMemoize","func","cache","WeakMap","arg","ret","delimiter","needle","toSheet","block","Sheet","ruleSheet","content","selectors","parents","line","column","ns","depth","at","createCache","stylisOptions","stylis","Stylis","Error","inserted","head","nodes","querySelectorAll","attrib","getAttribute","id","_insert","stylisPlugins","selector","serialized","shouldCache","map","styles","commentStart","commentEnd","lastIndex","flag","unsafePseudoClasses","match","compat","unsafePseudoClass","ignoreRegExp","RegExp","ignore","registered","murmurhash2_32_gc","str","toString","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","memoize","ILLEGAL_ESCAPE_SEQUENCE_ERROR","UNDEFINED_AS_OBJECT_KEY_ERROR","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","processStyleName","styleName","processStyleValue","p1","p2","cursor","next","unitless","contentValuePattern","contentValues","oldProcessStyleValue","msPattern","hyphenPattern","hyphenatedCache","processed","_char","toUpperCase","shouldWarnAboutInterpolatingClassNameFromCss","handleInterpolation","mergedProps","interpolation","couldBeSelectorInterpolation","__emotion_styles","anim","createStringFromObject","previousCursor","result","matched","replaced","fakeVarName","concat","cached","string","_key","interpolated","labelPattern","sourceMapPattern","serializeStyles","stringMode","strings","raw","sourceMap","identifierName","exec","isBrowser","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","insertStyles","isStringTag","maybeStyles","insertWithoutScoping","merge","css","createEmotion","_len","keyframes","_len2","_key2","animation","injectGlobal","_len3","_key3","cx","_len4","_key4","classnames","ids","cls","toAdd","_createEmotion"],"mappings":"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","file":"TraktRoller.user.js","sourceRoot":"../source","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Allows the user to interact with the event.\r\n *\r\n * @class EventManagement\r\n * @implements {IEventManagement}\r\n */\r\nvar EventManagement = /** @class */ (function () {\r\n    function EventManagement(unsub) {\r\n        this.unsub = unsub;\r\n        this.propagationStopped = false;\r\n    }\r\n    EventManagement.prototype.stopPropagation = function () {\r\n        this.propagationStopped = true;\r\n    };\r\n    return EventManagement;\r\n}());\r\nexports.EventManagement = EventManagement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Stores a handler. Manages execution meta data.\r\n * @class Subscription\r\n * @template TEventHandler\r\n */\r\nvar Subscription = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of Subscription.\r\n     *\r\n     * @param {TEventHandler} handler The handler for the subscription.\r\n     * @param {boolean} isOnce Indicates if the handler should only be executed once.\r\n     */\r\n    function Subscription(handler, isOnce) {\r\n        this.handler = handler;\r\n        this.isOnce = isOnce;\r\n        /**\r\n         * Indicates if the subscription has been executed before.\r\n         */\r\n        this.isExecuted = false;\r\n    }\r\n    /**\r\n     * Executes the handler.\r\n     *\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} scope The scope the scope of the event.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    Subscription.prototype.execute = function (executeAsync, scope, args) {\r\n        if (!this.isOnce || !this.isExecuted) {\r\n            this.isExecuted = true;\r\n            var fn = this.handler;\r\n            if (executeAsync) {\r\n                setTimeout(function () {\r\n                    fn.apply(scope, args);\r\n                }, 1);\r\n            }\r\n            else {\r\n                fn.apply(scope, args);\r\n            }\r\n        }\r\n    };\r\n    return Subscription;\r\n}());\r\nexports.Subscription = Subscription;\r\n","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar management_1 = require(\"./management\");\r\nvar subscription_1 = require(\"./subscription\");\r\n/**\r\n * Base class for implementation of the dispatcher. It facilitates the subscribe\r\n * and unsubscribe methods based on generic handlers. The TEventType specifies\r\n * the type of event that should be exposed. Use the asEvent to expose the\r\n * dispatcher as event.\r\n */\r\nvar DispatcherBase = /** @class */ (function () {\r\n    function DispatcherBase() {\r\n        this._wrap = new DispatcherWrapper(this);\r\n        this._subscriptions = new Array();\r\n    }\r\n    Object.defineProperty(DispatcherBase.prototype, \"count\", {\r\n        /**\r\n         * Returns the number of subscriptions.\r\n         *\r\n         * @readonly\r\n         *\r\n         * @memberOf DispatcherBase\r\n         */\r\n        get: function () {\r\n            return this._subscriptions.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.subscribe = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, false));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.one = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, true));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.has = function (fn) {\r\n        if (!fn)\r\n            return false;\r\n        return this._subscriptions.some(function (sub) { return sub.handler == fn; });\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsubscribe = function (fn) {\r\n        if (!fn)\r\n            return;\r\n        for (var i = 0; i < this._subscriptions.length; i++) {\r\n            if (this._subscriptions[i].handler == fn) {\r\n                this._subscriptions.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Generic dispatch will dispatch the handlers with the given arguments.\r\n     *\r\n     * @protected\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} The scope the scope of the event. The scope becomes the \"this\" for handler.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    DispatcherBase.prototype._dispatch = function (executeAsync, scope, args) {\r\n        var _this = this;\r\n        var _loop_1 = function (sub) {\r\n            var ev = new management_1.EventManagement(function () { return _this.unsub(sub.handler); });\r\n            var nargs = Array.prototype.slice.call(args);\r\n            nargs.push(ev);\r\n            sub.execute(executeAsync, scope, nargs);\r\n            //cleanup subs that are no longer needed\r\n            this_1.cleanup(sub);\r\n            if (!executeAsync && ev.propagationStopped) {\r\n                return \"break\";\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        //execute on a copy because of bug #9\r\n        for (var _i = 0, _a = __spreadArrays(this._subscriptions); _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            var state_1 = _loop_1(sub);\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up subs that ran and should run only once.\r\n     */\r\n    DispatcherBase.prototype.cleanup = function (sub) {\r\n        if (sub.isOnce && sub.isExecuted) {\r\n            var i = this._subscriptions.indexOf(sub);\r\n            if (i > -1) {\r\n                this._subscriptions.splice(i, 1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    DispatcherBase.prototype.asEvent = function () {\r\n        return this._wrap;\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherBase.prototype.clear = function () {\r\n        this._subscriptions.splice(0, this._subscriptions.length);\r\n    };\r\n    return DispatcherBase;\r\n}());\r\nexports.DispatcherBase = DispatcherBase;\r\n/**\r\n * Base class for event lists classes. Implements the get and remove.\r\n */\r\nvar EventListBase = /** @class */ (function () {\r\n    function EventListBase() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.get = function (name) {\r\n        var event = this._events[name];\r\n        if (event) {\r\n            return event;\r\n        }\r\n        event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    return EventListBase;\r\n}());\r\nexports.EventListBase = EventListBase;\r\n/**\r\n * Hides the implementation of the event dispatcher. Will expose methods that\r\n * are relevent to the event.\r\n */\r\nvar DispatcherWrapper = /** @class */ (function () {\r\n    /**\r\n     * Creates a new EventDispatcherWrapper instance.\r\n     * @param dispatcher The dispatcher.\r\n     */\r\n    function DispatcherWrapper(dispatcher) {\r\n        this._subscribe = function (fn) { return dispatcher.subscribe(fn); };\r\n        this._unsubscribe = function (fn) { return dispatcher.unsubscribe(fn); };\r\n        this._one = function (fn) { return dispatcher.one(fn); };\r\n        this._has = function (fn) { return dispatcher.has(fn); };\r\n        this._clear = function () { return dispatcher.clear(); };\r\n        this._count = function () { return dispatcher.count; };\r\n    }\r\n    Object.defineProperty(DispatcherWrapper.prototype, \"count\", {\r\n        /**\r\n         * Returns the number of subscriptions.\r\n         *\r\n         * @readonly\r\n         * @type {number}\r\n         * @memberOf DispatcherWrapper\r\n         */\r\n        get: function () {\r\n            return this._count();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.subscribe = function (fn) {\r\n        return this._subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsubscribe = function (fn) {\r\n        this._unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.one = function (fn) {\r\n        return this._one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherWrapper.prototype.has = function (fn) {\r\n        return this._has(fn);\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherWrapper.prototype.clear = function () {\r\n        this._clear();\r\n    };\r\n    return DispatcherWrapper;\r\n}());\r\nexports.DispatcherWrapper = DispatcherWrapper;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript - Core\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dispatching_1 = require(\"./dispatching\");\r\nexports.DispatcherBase = dispatching_1.DispatcherBase;\r\nexports.DispatcherWrapper = dispatching_1.DispatcherWrapper;\r\nexports.EventListBase = dispatching_1.EventListBase;\r\nvar subscription_1 = require(\"./subscription\");\r\nexports.Subscription = subscription_1.Subscription;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * Dispatcher implementation for events. Can be used to subscribe, unsubscribe\r\n * or dispatch events. Use the ToEvent() method to expose the event.\r\n */\r\nvar EventDispatcher = /** @class */ (function (_super) {\r\n    __extends(EventDispatcher, _super);\r\n    /**\r\n     * Creates a new EventDispatcher instance.\r\n     */\r\n    function EventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatch = function (sender, args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatchAsync = function (sender, args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    EventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return EventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.EventDispatcher = EventDispatcher;\r\n/**\r\n * Similar to EventList, but instead of TArgs, a map of event names ang argument types is provided with TArgsMap.\r\n */\r\nvar NonUniformEventList = /** @class */ (function () {\r\n    function NonUniformEventList() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformEventList.prototype.get = function (name) {\r\n        if (this._events[name]) {\r\n            // @TODO avoid typecasting. Not sure why TS thinks this._events[name] could still be undefined.\r\n            return this._events[name];\r\n        }\r\n        var event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformEventList.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    NonUniformEventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return NonUniformEventList;\r\n}());\r\nexports.NonUniformEventList = NonUniformEventList;\r\n/**\r\n * Storage class for multiple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar EventList = /** @class */ (function (_super) {\r\n    __extends(EventList, _super);\r\n    /**\r\n     * Creates a new EventList instance.\r\n     */\r\n    function EventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    EventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return EventList;\r\n}(ste_core_1.EventListBase));\r\nexports.EventList = EventList;\r\n/**\r\n * Extends objects with event handling capabilities.\r\n */\r\nvar EventHandlingBase = /** @class */ (function () {\r\n    function EventHandlingBase() {\r\n        this._events = new EventList();\r\n    }\r\n    Object.defineProperty(EventHandlingBase.prototype, \"events\", {\r\n        /**\r\n         * Gets the list with all the event dispatchers.\r\n         */\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    return EventHandlingBase;\r\n}());\r\nexports.EventHandlingBase = EventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nexports.EventDispatcher = events_1.EventDispatcher;\r\nexports.EventHandlingBase = events_1.EventHandlingBase;\r\nexports.EventList = events_1.EventList;\r\nexports.NonUniformEventList = events_1.NonUniformEventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a simple event\r\n */\r\nvar SimpleEventDispatcher = /** @class */ (function (_super) {\r\n    __extends(SimpleEventDispatcher, _super);\r\n    /**\r\n     * Creates a new SimpleEventDispatcher instance.\r\n     */\r\n    function SimpleEventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatch = function (args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatchAsync = function (args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SimpleEventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SimpleEventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SimpleEventDispatcher = SimpleEventDispatcher;\r\n/**\r\n * Similar to EventList, but instead of TArgs, a map of event names ang argument types is provided with TArgsMap.\r\n */\r\nvar NonUniformSimpleEventList = /** @class */ (function () {\r\n    function NonUniformSimpleEventList() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformSimpleEventList.prototype.get = function (name) {\r\n        if (this._events[name]) {\r\n            // @TODO avoid typecasting. Not sure why TS thinks this._events[name] could still be undefined.\r\n            return this._events[name];\r\n        }\r\n        var event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformSimpleEventList.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    NonUniformSimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return NonUniformSimpleEventList;\r\n}());\r\nexports.NonUniformSimpleEventList = NonUniformSimpleEventList;\r\n/**\r\n * Storage class for multiple simple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SimpleEventList = /** @class */ (function (_super) {\r\n    __extends(SimpleEventList, _super);\r\n    /**\r\n     * Creates a new SimpleEventList instance.\r\n     */\r\n    function SimpleEventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return SimpleEventList;\r\n}(ste_core_1.EventListBase));\r\nexports.SimpleEventList = SimpleEventList;\r\n/**\r\n * Extends objects with simple event handling capabilities.\r\n */\r\nvar SimpleEventHandlingBase = /** @class */ (function () {\r\n    function SimpleEventHandlingBase() {\r\n        this._events = new SimpleEventList();\r\n    }\r\n    Object.defineProperty(SimpleEventHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SimpleEventHandlingBase;\r\n}());\r\nexports.SimpleEventHandlingBase = SimpleEventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar simple_events_1 = require(\"./simple-events\");\r\nexports.SimpleEventDispatcher = simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = simple_events_1.SimpleEventList;\r\nexports.NonUniformSimpleEventList = simple_events_1.NonUniformSimpleEventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a signal event.\r\n */\r\nvar SignalDispatcher = /** @class */ (function (_super) {\r\n    __extends(SignalDispatcher, _super);\r\n    /**\r\n     * Creates a new SignalDispatcher instance.\r\n     */\r\n    function SignalDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the signal.\r\n     */\r\n    SignalDispatcher.prototype.dispatch = function () {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the signal threaded.\r\n     */\r\n    SignalDispatcher.prototype.dispatchAsync = function () {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SignalDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SignalDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SignalDispatcher = SignalDispatcher;\r\n/**\r\n * Storage class for multiple signal events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SignalList = /** @class */ (function (_super) {\r\n    __extends(SignalList, _super);\r\n    /**\r\n     * Creates a new SignalList instance.\r\n     */\r\n    function SignalList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SignalList.prototype.createDispatcher = function () {\r\n        return new SignalDispatcher();\r\n    };\r\n    return SignalList;\r\n}(ste_core_1.EventListBase));\r\nexports.SignalList = SignalList;\r\n/**\r\n * Extends objects with signal event handling capabilities.\r\n */\r\nvar SignalHandlingBase = /** @class */ (function () {\r\n    function SignalHandlingBase() {\r\n        this._events = new SignalList();\r\n    }\r\n    Object.defineProperty(SignalHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SignalHandlingBase;\r\n}());\r\nexports.SignalHandlingBase = SignalHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar signals_1 = require(\"./signals\");\r\nexports.SignalDispatcher = signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = signals_1.SignalHandlingBase;\r\nexports.SignalList = signals_1.SignalList;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\nexports.DispatcherBase = ste_core_1.DispatcherBase;\r\nexports.DispatcherWrapper = ste_core_1.DispatcherWrapper;\r\nexports.EventListBase = ste_core_1.EventListBase;\r\nexports.Subscription = ste_core_1.Subscription;\r\nvar ste_events_1 = require(\"ste-events\");\r\nexports.EventDispatcher = ste_events_1.EventDispatcher;\r\nexports.EventHandlingBase = ste_events_1.EventHandlingBase;\r\nexports.EventList = ste_events_1.EventList;\r\nexports.NonUniformEventList = ste_events_1.NonUniformEventList;\r\nvar ste_simple_events_1 = require(\"ste-simple-events\");\r\nexports.SimpleEventDispatcher = ste_simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = ste_simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = ste_simple_events_1.SimpleEventList;\r\nexports.NonUniformSimpleEventList = ste_simple_events_1.NonUniformSimpleEventList;\r\nvar ste_signals_1 = require(\"ste-signals\");\r\nexports.SignalDispatcher = ste_signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = ste_signals_1.SignalHandlingBase;\r\nexports.SignalList = ste_signals_1.SignalList;\r\n","import { SimpleEventDispatcher } from \"strongly-typed-events\";\n\nconst TraktTokensKey: string = 'trakt_tokens';\n\nexport interface ITraktIDs {\n  trakt?: number;\n  slug?: string;\n  imdb?: string;\n  tmdb?: number;\n  tvdb?: number;\n}\n\nexport interface ITraktMovie {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktShow {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktSeason {\n  number?: number;\n  ids?: ITraktIDs;\n  episodes?: Array<ITraktEpisode>;\n}\n\nexport interface ITraktEpisode {\n  season?: number;\n  number?: number;\n  title?: string;\n  number_abs?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktHistoryItem {\n  id?: number;\n  watched_at: string;\n  action: 'scrobble' | 'checkin' | 'watch';\n  type: 'movie' | 'episode';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktSearchResult {\n  type: 'movie' | 'show' | 'episode' | 'person' | 'list';\n  score: number;\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktScrobbleData {\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n  progress: number;\n  app_version: string;\n  app_date: string;\n}\n\nexport interface ITraktScobbleResult {\n  id: number;\n  action: 'start' | 'pause' | 'scrobble';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktHistoryRemoveResult {\n  deleted: {\n    movies: number;\n    episodes: number;\n  };\n  not_found: {\n    movies: ITraktMovie[];\n    shows: ITraktShow[];\n    seasons: ITraktSeason[];\n    episodes: ITraktEpisode[];\n    ids: number[];\n  };\n}\n\nexport interface ITraktError {\n  status: number;\n  error: string;\n}\n\nconst TraktErrorCodes: { [key: number]: ITraktError } = {\n  200: { \"status\": 200, \"error\": \"Success\" },\n  201: { \"status\": 201, \"error\": \"Success - new resource created (POST)\" },\n  204: { \"status\": 204, \"error\": \"Success - no content to return (DELETE)\" },\n  400: { \"status\": 400, \"error\": \"Bad Request - request couldn't be parsed\" },\n  401: { \"status\": 401, \"error\": \"Unauthorized - OAuth must be provided\" },\n  403: { \"status\": 403, \"error\": \"Forbidden - invalid API key or unapproved app\" },\n  404: { \"status\": 404, \"error\": \"Not Found - method exists, but no record found\" },\n  405: { \"status\": 405, \"error\": \"Method Not Found - method doesn't exist\" },\n  409: { \"status\": 409, \"error\": \"Conflict - resource already created\" },\n  412: { \"status\": 412, \"error\": \"Precondition Failed - use application/json content type\" },\n  422: { \"status\": 422, \"error\": \"Unprocessible Entity - validation errors\" },\n  429: { \"status\": 429, \"error\": \"Rate Limit Exceeded\" },\n  500: { \"status\": 500, \"error\": \"Server Error - please open a support issue\" },\n  503: { \"status\": 503, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  504: { \"status\": 504, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  520: { \"status\": 520, \"error\": \"Service Unavailable - Cloudflare error\" },\n  521: { \"status\": 521, \"error\": \"Service Unavailable - Cloudflare error\" },\n  522: { \"status\": 522, \"error\": \"Service Unavailable - Cloudflare error\" }\n};\n\ninterface ITraktTokens {\n  refresh_token?: string;\n  access_token?: string;\n  expires?: number;\n  authentication_state?: string;\n}\n\nexport interface ITraktApiOptions {\n  client_id: string;\n  client_secret: string;\n  api_url?: string;\n  storage?: IStorage;\n}\n\nexport interface IStorage {\n  getValue(name: string): Promise<string>;\n  setValue(name: string, value: string): Promise<void>;\n}\n\nexport class LocalStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string> {\n    return Promise.resolve(window.localStorage.getItem(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      window.localStorage.removeItem(name);\n    } else {\n      window.localStorage.setItem(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport class GreaseMonkeyStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string> {\n    return Promise.resolve(GM_getValue(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      GM_deleteValue(name);\n    } else {\n      GM_setValue(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport default class TraktApi {\n  public onAuthenticationChanged = new SimpleEventDispatcher<boolean>();\n\n  private _tokens: ITraktTokens = {};\n\n  private _client_id: string;\n  private _client_secret: string;\n  private _redirect_uri: string;\n  private _endpoint: string;\n\n  private _storage: IStorage;\n\n  constructor(options: ITraktApiOptions) {\n    this._client_id = options.client_id;\n    this._client_secret = options.client_secret;\n    this._redirect_uri = 'https://www.crunchyroll.com';\n    this._endpoint = options.api_url || 'https://api.trakt.tv';\n    this._storage = options.storage || new LocalStorageAdapter();\n  }\n\n  static isError(obj: any, code?: number): obj is ITraktError {\n    const err = obj as ITraktError;\n    return err.status !== undefined && err.error !== undefined\n      && (code === undefined || err.status === code);\n  }\n\n  // ------ Authentication ------\n\n  public async loadTokens(): Promise<void> {\n    const data = await this._storage.getValue(TraktTokensKey);\n    if (data) {\n      this._tokens = JSON.parse(data);\n    } else {\n      this._tokens = {};\n    }\n\n    if (this._tokens.expires && this._tokens.expires < Date.now()) {\n      this._tokens = await this._refresh_token();\n      await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n    }\n\n    this.onAuthenticationChanged.dispatch(this.isAuthenticated());\n  }\n\n  isAuthenticated(): boolean {\n    return this._tokens.access_token !== undefined;\n  }\n\n  async authenticate(): Promise<void> {\n    const state = this._generate_state();\n    const url = this._get_url(state);\n\n    // Save authentication state data\n    this._tokens.authentication_state = state;\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.location.href = url;\n  }\n\n  async checkAuthenticationResult(url: string): Promise<void> {\n    const params = new URL(url).searchParams;\n    const code = params.get('code');\n    const state = params.get('state');\n    if (!code || !state) return;\n\n    if (!await this._exchange_code(code, state)) {\n      console.error('Exchanging oauth code failed!');\n      return;\n    }\n\n    console.log('Trakt authentication successful!');\n\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.history.replaceState(null, undefined, window.location.pathname);\n\n    this.onAuthenticationChanged.dispatch(true);\n  }\n\n  disconnect(): void {\n    this._storage.setValue(TraktTokensKey, null);\n    this.onAuthenticationChanged.dispatch(false);\n    this._revoke_token();\n  }\n\n  // ------ API ------\n\n  private _getError(response: Response): ITraktError {\n    var error = TraktErrorCodes[response.status];\n    if (error) return error;\n\n    return {\n      status: response.status,\n      error: `Unknown error (${response.statusText})`\n    };\n  }\n\n  private async _request(method: 'GET' | 'POST' | 'DELETE', url: string, body?: any): Promise<any> {\n    let contentType = null;\n    if (body) {\n      if (body.contentType) {\n        contentType = body.contentType;\n        body = body.body;\n      }\n\n      if (typeof body !== 'string') {\n        body = JSON.stringify(body);\n      }\n    }\n\n    let headers = new Headers();\n    headers.append('trakt-api-version', '2');\n    headers.append('trakt-api-key', this._client_id);\n    headers.append('Content-Type', contentType || 'application/json');\n\n    if (this._tokens && this._tokens.access_token) {\n      headers.append('Authorization', `Bearer ${this._tokens.access_token}`);\n    }\n\n    try {\n      let response = await fetch(this._endpoint + url, {\n        method: method,\n        mode: \"cors\",\n        headers: headers,\n        body: body\n      });\n\n      if (!response.ok) {\n        return this._getError(response);\n      }\n\n      if (response.status === 204) {\n        return null; // 204: No Content\n      }\n\n      return response.json();\n    } catch (err) {\n      return {\n        status: 0,\n        error: `An error occurred sending the request: ${err}`\n      };\n    }\n  }\n\n  private async _exchange(body: object): Promise<ITraktTokens> {\n    try {\n      const data = await this._request('POST', '/oauth/token', body);\n      return {\n        access_token: data.access_token,\n        refresh_token: data.refresh_token,\n        expires: (data.created_at + data.expires_in) * 1000\n      };\n    } catch (err) {\n      console.error(err);\n      return {};\n    }\n  }\n\n  private _generate_state(): string {\n    let data = new Uint32Array(4);\n    crypto.getRandomValues(data);\n    let state = '';\n    for (let i = 0; i < data.length; i++) {\n      state += data[i].toString(16);\n    }\n    return state;\n  }\n\n  private _get_url(state: string): string {\n     // Replace 'api' from the api_url to get the top level trakt domain\n     const base_url = this._endpoint.replace(/api\\W/, '');\n     return `${base_url}/oauth/authorize?response_type=code&client_id=${this._client_id}&redirect_uri=${this._redirect_uri}&state=${state}`;\n  }\n\n  private async _exchange_code(code: string, state: string): Promise<boolean> {\n    if (state !== this._tokens.authentication_state) {\n      console.error('Invalid CSRF (State)');\n      return false;\n    }\n\n    this._tokens = await this._exchange({\n      code: code,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'authorization_code'\n    });\n    return this.isAuthenticated();\n  }\n\n  private async _refresh_token(): Promise<ITraktTokens> {\n    if (!this._tokens.refresh_token)\n      return {};\n\n    return await this._exchange({\n      refresh_token: this._tokens.refresh_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'refresh_token'\n    });\n  }\n\n  private async _revoke_token(): Promise<{} | ITraktError> {\n    if (!this._tokens.access_token) return;\n\n    return this._request('POST', '/oauth/revoke', { \n      token: this._tokens.access_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret\n    });\n  }\n\n  async search(type: string, query: string): Promise<Array<ITraktSearchResult> | ITraktError> {\n    return this._request('GET', `/search/${type}?query=${encodeURIComponent(query)}`);\n  }\n\n  async seasons(showId: number | string, extended?: Array<'full' | 'episodes'>): Promise<Array<ITraktSeason> | ITraktError> {\n    let query = extended ? '?extended=' + extended.join(\",\") : '';\n    return this._request('GET', `/shows/${showId}/seasons${query}`);\n  }\n\n  async season(showId: number | string, season: number, extended?: boolean): Promise<Array<ITraktEpisode> | ITraktError> {\n    return this._request('GET', `/shows/${showId}/seasons/${season}?extended=${extended ? 'full' : ''}`);\n  }\n\n  async scrobble(type: 'start' | 'pause' | 'stop', data: ITraktScrobbleData): Promise<ITraktScobbleResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n    return this._request('POST', `/scrobble/${type}`, data);\n  }\n\n  async history(type?: 'movies' | 'shows' | 'seasons' | 'episodes', id?: number): Promise<ITraktHistoryItem[] | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    let url = '/sync/history';\n    if (type) url += '/' + type;\n    if (type && id) url += '/' + id;\n    return this._request('GET', url);\n  }\n\n  async historyRemove(id: number): Promise<ITraktHistoryRemoveResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    return this._request('POST', `/sync/history/remove`, { ids: [ id ] });\n  }\n}","import TraktApi, { ITraktScrobbleData, ITraktError, ITraktShow, ITraktSearchResult, ITraktScobbleResult, ITraktSeason } from './TraktApi';\nimport { SimpleEventDispatcher } from 'ste-simple-events';\n\nexport enum PlaybackState {\n  Paused,\n  Playing,\n  Ended\n}\n\nexport enum TraktScrobbleState {\n  Undefined,\n  Lookup,\n  Found,\n  Started,\n  Paused,\n  Scrobbled,\n  NotFound,\n  Error\n}\n\nenum LookupResult {\n  NotFound,\n  Found,\n  Error\n}\n\nexport default class TraktScrobble {\n  /** Extract item type from scrobble data */\n  public static typeFromData(data: ITraktScrobbleData): 'movie' | 'episode' | null {\n    if (!data) return null;\n    if (data.movie) return 'movie';\n    if (data.show && data.episode) return 'episode';\n    return null;\n  }\n\n  /** Extract trakt id from scrobble data, returns 0 if id is not set */\n  public static traktIdFromData(data: ITraktScrobbleData): number {\n    if (!data) return 0;\n    let movieId = data.movie && data.movie.ids && data.movie.ids.trakt || null;\n    if (movieId) return movieId;\n    let episodeId = data.episode && data.episode.ids && data.episode.ids.trakt || null;\n    if (episodeId) return episodeId;\n    return 0;\n  }\n\n  /** Scrobble once this percentage has been reached */\n  public scrobbleAbovePecentage: number = 80;\n  /** Minimum time of the video that has to have been played before scrobbling (percent of duration) */\n  public scrobbleMimimumPlaybackPercentage: number = 0.1;\n\n  public onStateChanged = new SimpleEventDispatcher<TraktScrobbleState>();\n  public onScrobbled = new SimpleEventDispatcher<ITraktScobbleResult>();\n\n  private _client: TraktApi;\n  private _data: ITraktScrobbleData;\n\n  private _state: TraktScrobbleState;\n  private _pendingState: TraktScrobbleState;\n  private _playbackState: PlaybackState;\n  private _error: string;\n  private _enabled: boolean = false;\n\n  private _lastPlaybackTime: number = 0;\n  private _playbackTime: number = 0;\n\n  constructor(client: TraktApi, data: ITraktScrobbleData) {\n    this._client = client;\n    this._data = data;\n\n    this._init();\n  }\n\n  public get api(): TraktApi {\n    return this._client;\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n\n    this._enabled = value;\n\n    if (this._enabled) {\n      this._applyState(PlaybackState.Paused);\n    } else {\n      this._applyState(this._playbackState);\n    }\n  }\n\n  public setPlaybackTime(time: number, duration: number) {\n    let delta = time - this._lastPlaybackTime;\n    if (delta < 0.5) {\n      this._playbackTime += delta;\n    }\n\n    let progress = time / duration * 100;\n    let minimumTime = duration * this.scrobbleMimimumPlaybackPercentage;\n    if (this._state === TraktScrobbleState.Started \n        && progress > this.scrobbleAbovePecentage\n        && this._playbackTime > minimumTime) {\n      this.setPlaybackState(PlaybackState.Ended, progress);\n    }\n\n    this._lastPlaybackTime = time;\n  }\n\n  public setPlaybackState(state: PlaybackState, progress: number): void {\n    this._playbackState = state;\n    this._data.progress = progress;\n\n    if (!this.enabled) {\n      this._applyState(state);\n    }\n  }\n\n  public scrobbleNow() {\n    this._playbackState = PlaybackState.Ended;\n    this._data.progress = 100;\n    this._applyState(this._playbackState);\n  }\n\n  private _applyState(state: PlaybackState) {\n    if (state === PlaybackState.Playing) {\n      if (this._pendingState === TraktScrobbleState.Found \n          || this._pendingState === TraktScrobbleState.Paused) {\n        this._updateScrobble('start');\n      }\n    } else if (state === PlaybackState.Paused) {\n      if (this._pendingState === TraktScrobbleState.Started) {\n        this._updateScrobble('pause');\n      }\n    } else if (state === PlaybackState.Ended) {\n      if (this._pendingState === TraktScrobbleState.Found \n          || this._pendingState === TraktScrobbleState.Started \n          || this._pendingState === TraktScrobbleState.Paused) {\n        this._updateScrobble('stop');\n      }\n    }\n  }\n\n  public get error(): string {\n    return this._error;\n  }\n\n  public scrobbleUrl(): string {\n    let url = 'https://trakt.tv/';\n    if (this._data.movie !== undefined) {\n      return url + `movies/${this._data.movie.ids!.slug}`;\n    } else if (this._data.show !== undefined && this._data.episode !== undefined) {\n      const show = this._data.show;\n      const episode = this._data.episode;\n      return url + `shows/${show.ids!.slug}/seasons/${episode.season}/episodes/${episode.number}`;\n    }\n    return '';\n  }\n\n  public get state(): TraktScrobbleState {\n    return this._state;\n  }\n\n  private setState(value: TraktScrobbleState): void {\n    if (this._state == value) return;\n    this._state = value;\n    this._pendingState = value;\n    this.onStateChanged.dispatch(value);\n  }\n\n  public get data(): ITraktScrobbleData {\n    return this._data;\n  }\n\n  private _handleError(response: any): response is ITraktError {\n    if (!TraktApi.isError(response)) return false;\n  \n    console.error(`trakt scrobbler: ${response.error}`);\n    this._error = response.error;\n    this.setState(TraktScrobbleState.Error);\n    return true;\n  }\n\n  private async _init(): Promise<void> {\n    this.setState(TraktScrobbleState.Lookup);\n\n    let result = await this._lookup();\n    if (result === LookupResult.NotFound) {\n      this.setState(TraktScrobbleState.NotFound);\n      return;\n    } else if (result === LookupResult.Error) {\n      this.setState(TraktScrobbleState.Error);\n      return;\n    }\n\n    this.setState(TraktScrobbleState.Found);\n\n    if (this._playbackState === PlaybackState.Playing) {\n      this._updateScrobble('start');\n    } else if (this._playbackState === PlaybackState.Ended) {\n      this._updateScrobble('stop');\n    }\n  }\n\n  private async _updateScrobble(type: 'start' | 'pause' | 'stop'): Promise<boolean> {\n    switch (type) {\n      case 'start':\n        this._pendingState = TraktScrobbleState.Started;\n        break;\n      case 'pause':\n        this._pendingState = TraktScrobbleState.Paused;\n        break;\n      case 'stop':\n        this._pendingState = TraktScrobbleState.Scrobbled;\n        break;\n    }\n\n    let scrobbleResponse = await this._client.scrobble(type, this._data);\n    if (this._handleError(scrobbleResponse)) {\n      return false;\n    }\n\n    switch (this._state) {\n      case TraktScrobbleState.Found:\n      case TraktScrobbleState.Started:\n      case TraktScrobbleState.Paused:\n        switch (scrobbleResponse.action) {\n          case 'start':\n            this.setState(TraktScrobbleState.Started);\n            break;\n          case 'pause':\n            this.setState(TraktScrobbleState.Paused);\n            break;\n          case 'scrobble':\n            this.setState(TraktScrobbleState.Scrobbled);\n            this.onScrobbled.dispatch(scrobbleResponse);\n            break;\n        }\n        break;\n    }\n\n    return true;\n  }\n\n  private async _lookup(): Promise<LookupResult> {\n    if (this._data.movie === undefined && (this._data.show === undefined || this._data.episode === undefined)) {\n      console.error('trakt scrobbler: either movie or show/episode needs to be set on scrobble data');\n      return LookupResult.Error;\n    }\n\n    console.log('trakt scrobbler: looking up media on trakt...', Object.assign({}, this._data));\n\n    let type: 'movie' | 'show' = this._data.movie !== undefined ? 'movie' : 'show';\n    let result: LookupResult;\n  \n    // Special episodes with fractional episode numbers, e.g. 14.5\n    // (Often used for recap episodes)\n    let isSpecialEp = this._data.episode && (this._data.episode.number % 1) !== 0;\n\n    if (!isSpecialEp) {\n      // Start with trakt's automatic matching\n      console.log('trakt scrobbler: trying automatic matching...');\n      result = await this._scrobbleLookup();\n      if (result !== LookupResult.NotFound) return result;\n\n      // Retry automatic matching with absolute episode number\n      if (type === 'show' && this._data.episode.number_abs === undefined && this._data.episode.number !== undefined) {\n        let data = JSON.parse(JSON.stringify(this._data)) as ITraktScrobbleData;\n        data.episode.number_abs = data.episode.number;\n        delete data.episode.number;\n        \n        result = await this._scrobbleLookup(data);\n        if (result !== LookupResult.NotFound) return result;\n      }\n    }\n\n    // Search for item manually\n    let title = this._data.movie !== undefined ? this._data.movie.title : this._data.show!.title;\n    if (!title) {\n      console.error('trakt scrobbler: No title set');\n      return LookupResult.Error;\n    }\n    console.log('trakt scrobbler: trying to search manually...');\n    const results = await this._search(type, title);\n    if (results === null) return LookupResult.Error;\n    if (results.length === 0) {\n      console.warn(`trakt scrobbler: manual search for \"${title}\" returned no results`);\n      return LookupResult.NotFound;\n    }\n\n    // Try search results in order\n    for (const found of results) {\n      if (type === 'movie') {\n        console.log(`trakt scrobbler: trying result ${found.movie!.title}`, found);\n        this._data.movie = found.movie;\n      } else {\n        console.log(`trakt scrobbler: trying result ${found.show!.title}`, found);\n        this._data.show = found.show;\n      }\n\n      // Look up episode for shows\n      if (type === 'show') {\n        result = await this._lookupEpisode(found.show!);\n        if (result === LookupResult.Error) return result;\n        if (result === LookupResult.NotFound) continue;\n      }\n\n      // Retry start with new data\n      console.log('trakt scrobbler: re-trying matching');\n      result = await this._scrobbleLookup();\n      if (result === LookupResult.Error) return result;\n      if (result === LookupResult.Found) break;\n    }\n\n    return result;\n  }\n\n  private async _scrobbleLookup(data?: ITraktScrobbleData): Promise<LookupResult> {\n    let scrobbleResponse = await this._client.scrobble('pause', data || this._data);\n    if (TraktApi.isError(scrobbleResponse, 404)) {\n      return LookupResult.NotFound;\n    } else if (this._handleError(scrobbleResponse)) {\n      return LookupResult.Error;\n    }\n\n    if (scrobbleResponse.movie !== undefined)   this._data.movie = scrobbleResponse.movie;\n    if (scrobbleResponse.show !== undefined)    this._data.show = scrobbleResponse.show;\n    if (scrobbleResponse.episode !== undefined) this._data.episode = scrobbleResponse.episode;\n\n    console.log('trakt scrobbler: scrobble lookup succeeded', scrobbleResponse);\n    return LookupResult.Found;\n  }\n\n  private async _search(type: 'movie' | 'show', title: string): Promise<Array<ITraktSearchResult> | null> {\n    // Quote and escape title to avoid special search characters interfereing with the query\n    // See https://github.com/trakt/api-help/issues/76\n    title = `\"${title.replace(/[\\\\\"']/g, '\\\\$&')}\"`;\n    const searchResponse = await this._client.search(type, title);\n    if (this._handleError(searchResponse)) {\n      return null;\n    }\n\n    const goodMatches = searchResponse.filter(r => r.score > 10);\n    if (searchResponse.length > goodMatches.length) {\n      if (goodMatches.length === 0) {\n        console.log(`trakt scrobbler: search returned only garbage results.`);\n      } else {\n        console.log(`trakt scrobbler: some search results with low scores ignored`);\n      }\n    }\n    return goodMatches;\n  }\n\n  private async _lookupEpisode(show: ITraktShow): Promise<LookupResult> {\n    if (this._data.episode === undefined || this._data.episode.number === undefined || this._data.episode.season === undefined) {\n      console.error('trakt scrobbler: data has show but episode is not set or incomplete', this._data.episode);\n      return LookupResult.Error;\n    }\n    if (show.ids === undefined || show.ids.trakt === undefined) {\n      console.error('trakt scrobbler: show data is missing trakt id', this._data.show);\n      return LookupResult.Error;\n    }\n\n    let episodeResult = LookupResult.NotFound;\n\n    const seasonsResponse = await this._client.seasons(show.ids.trakt, ['episodes', 'full']);\n    if (TraktApi.isError(seasonsResponse, 404)) {\n      console.error('trakt scrobbler: manual lookup could not find seasons');\n      return LookupResult.NotFound;\n    } else if (this._handleError(seasonsResponse)) {\n      return LookupResult.Error;\n    }\n\n    // First search in matching season\n    const season = seasonsResponse.find(s => s.number === this._data.episode.season);\n    if (!season) {\n      console.warn(`trakt scrobbler: could not find season ${this._data.episode.season} in seasons response`, seasonsResponse);\n    } else {\n      episodeResult = this._matchEpisodeOrTitle(season, this._data.episode.number, this._data.episode.title);\n    }\n\n    // Look through all other seasons\n    if (episodeResult === LookupResult.NotFound) {\n      for (let s of seasonsResponse) {\n        if (s === season) continue;\n        episodeResult = this._matchEpisodeOrTitle(s, this._data.episode.number, this._data.episode.title);\n        if (episodeResult == LookupResult.Found) break;\n      }\n    }\n\n    return episodeResult;\n  }\n\n  private _matchEpisodeOrTitle(season: ITraktSeason, episode: number, title: string): LookupResult {\n    let numberMatch = season.episodes.filter(e => e.number === episode || e.number_abs === episode);\n    if (numberMatch.length > 1) {\n      console.error(`trakt scrobbler: got multiple episode #${episode} in season`, season);\n      return LookupResult.NotFound;\n    } else if (numberMatch.length == 1) {\n      console.log(`trakt scrobbler: found episode using episode number`, numberMatch[0]);\n      this._data.episode = numberMatch[0];\n      return LookupResult.Found;\n    }\n\n    if (title) {\n      const filteredTitle = this._filterEpisodeTitle(title);\n      let titleMatch = season.episodes\n        .filter(e => e.title && this._filterEpisodeTitle(e.title) === filteredTitle);\n      if (titleMatch.length > 1) {\n        console.error(`trakt scrobbler: got multiple episodes titled \"${title}\" in show`, season);\n        return LookupResult.NotFound;\n      } else if (titleMatch.length == 1) {\n        console.log(`trakt scrobbler: found episode using episode title`, titleMatch[0]);\n        this._data.episode = titleMatch[0];\n        return LookupResult.Found;\n      }\n    }\n\n    return LookupResult.NotFound;\n  }\n\n  private _filterEpisodeTitle(title: string): string {\n    if (!title) debugger;\n    return title.replace(/[^\\w\\s]/gi, '').toLowerCase();\n  }\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import { _catchError } from './diff/catch-error';\n\n/** @type {import('./internal').Options}  */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_lastDomChild: null,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tthis._force = false;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._context,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet q = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && q.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet p;\n\tq.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((p = q.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tcontext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (childVNode._lastDomChild != null) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-null _lastDomChild. Continue the diff from the end of\n\t\t\t\t\t\t// this Fragment's DOM tree.\n\t\t\t\t\t\tnewDom = childVNode._lastDomChild;\n\n\t\t\t\t\t\t// Eagerly cleanup _lastDomChild. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments.\n\t\t\t\t\t\tchildVNode._lastDomChild = null;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\toldDom = newDom.nextSibling;\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// At this point, if childVNode._lastDomChild existed, then\n\t\t\t\t\t\t// newDom = childVNode._lastDomChild per line 101. Else it is\n\t\t\t\t\t\t// the same as childVNode._dom, meaning this component returned\n\t\t\t\t\t\t// only a single DOM node\n\t\t\t\t\t\tnewParentVNode._lastDomChild = newDom;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (value == null || value === false) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren, toChildArray } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && context[tmp._id];\n\t\t\tlet cctx = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: context;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, cctx); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, cctx);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = cctx;\n\t\t\t\tc._context = context;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, cctx) === false\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = cctx;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = toChildArray(\n\t\t\t\tisTopLevelFragment ? tmp.props.children : tmp\n\t\t\t);\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = null;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (dom == null && excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t(newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(newVNode.type);\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t}\n\n\t\tif (oldProps !== newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tapplyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\tvnode._dom = vnode._lastDomChild = null;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t} else if (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      var _tag = createStyleElement(this);\n\n      var before;\n\n      if (this.tags.length === 0) {\n        before = this.before;\n      } else {\n        before = this.tags[this.tags.length - 1].nextSibling;\n      }\n\n      this.container.insertBefore(_tag, before);\n      this.tags.push(_tag);\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is a really hot path\n        // we check the second character first because having \"i\"\n        // as the second character will happen less often than\n        // having \"@\" as the first character\n        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n\n        sheet.insertRule(rule, // we need to insert @import rules before anything else\n        // otherwise there will be an error\n        // technically this means that the @import rules will\n        // _usually_(not always since there could be multiple style tags)\n        // be the first ones in prod and generally later in dev\n        // this shouldn't really matter in the real world though\n        // @import is generally only used for font faces from google fonts and etc.\n        // so while this could be technically correct then it would be slower and larger\n        // for a tiny bit of correctness that won't matter in the real world\n        isImportRule ? 0 : sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","function stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n          T(d[c]);\n        } else Y = !!d | 0;\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexport default stylis_min;\n","var weakMemoize = function weakMemoize(func) {\n  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // $FlowFixMe\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nexport default weakMemoize;\n","import { StyleSheet } from '@emotion/sheet';\nimport Stylis from '@emotion/stylis';\nimport '@emotion/weak-memoize';\n\n// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n// since we use stylis after closure compiler\nvar delimiter = '/*|*/';\nvar needle = delimiter + '}';\n\nfunction toSheet(block) {\n  if (block) {\n    Sheet.current.insert(block + '}');\n  }\n}\n\nvar Sheet = {\n  current: null\n};\nvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n  switch (context) {\n    // property\n    case 1:\n      {\n        switch (content.charCodeAt(0)) {\n          case 64:\n            {\n              // @import\n              Sheet.current.insert(content + ';');\n              return '';\n            }\n          // charcode for l\n\n          case 108:\n            {\n              // charcode for b\n              // this ignores label\n              if (content.charCodeAt(2) === 98) {\n                return '';\n              }\n            }\n        }\n\n        break;\n      }\n    // selector\n\n    case 2:\n      {\n        if (ns === 0) return content + delimiter;\n        break;\n      }\n    // at-rule\n\n    case 3:\n      {\n        switch (ns) {\n          // @font-face, @page\n          case 102:\n          case 112:\n            {\n              Sheet.current.insert(selectors[0] + content);\n              return '';\n            }\n\n          default:\n            {\n              return content + (at === 0 ? delimiter : '');\n            }\n        }\n      }\n\n    case -2:\n      {\n        content.split(needle).forEach(toSheet);\n      }\n  }\n};\n\nvar createCache = function createCache(options) {\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var stylis = new Stylis(stylisOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n\n  {\n    container = options.container || document.head;\n    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\n      attrib.split(' ').forEach(function (id) {\n        inserted[id] = true;\n      });\n\n      if (node.parentNode !== container) {\n        container.appendChild(node);\n      }\n    });\n  }\n\n  var _insert;\n\n  {\n    stylis.use(options.stylisPlugins)(ruleSheet);\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      Sheet.current = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        var map = serialized.map;\n        Sheet.current = {\n          insert: function insert(rule) {\n            sheet.insert(rule + map);\n          }\n        };\n      }\n\n      stylis(selector, serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[name] = true;\n      }\n    };\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n    var commentStart = /\\/\\*/g;\n    var commentEnd = /\\*\\//g;\n    stylis.use(function (context, content) {\n      switch (context) {\n        case -1:\n          {\n            while (commentStart.test(content)) {\n              commentEnd.lastIndex = commentStart.lastIndex;\n\n              if (commentEnd.test(content)) {\n                commentStart.lastIndex = commentEnd.lastIndex;\n                continue;\n              }\n\n              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n            }\n\n            commentStart.lastIndex = 0;\n            break;\n          }\n      }\n    });\n    stylis.use(function (context, content, selectors) {\n      switch (context) {\n        case -1:\n          {\n            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\n            if (unsafePseudoClasses && cache.compat !== true) {\n              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n                var ignore = ignoreRegExp.test(content);\n\n                if (unsafePseudoClass && !ignore) {\n                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n                }\n              });\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  return cache;\n};\n\nexport default createCache;\n","/* eslint-disable */\n// murmurhash2 via https://github.com/garycourt/murmurhash-js/blob/master/murmurhash2_gc.js\nfunction murmurhash2_32_gc(str) {\n  var l = str.length,\n      h = l ^ l,\n      i = 0,\n      k;\n\n  while (l >= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    k ^= k >>> 24;\n    k = (k & 0xffff) * 0x5bd1e995 + (((k >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n    h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16) ^ k;\n    l -= 4;\n    ++i;\n  }\n\n  switch (l) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  }\n\n  h ^= h >>> 13;\n  h = (h & 0xffff) * 0x5bd1e995 + (((h >>> 16) * 0x5bd1e995 & 0xffff) << 16);\n  h ^= h >>> 15;\n  return (h >>> 0).toString(36);\n}\n\nexport default murmurhash2_32_gc;\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\nfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n\n  if (process.env.NODE_ENV !== 'production' && couldBeSelectorInterpolation && shouldWarnAboutInterpolatingClassNameFromCss && cached !== undefined) {\n    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n    shouldWarnAboutInterpolatingClassNameFromCss = false;\n  }\n\n  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i], false);\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings, false);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className]);\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles };\n","import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport default createEmotion;\n","import createEmotion from 'create-emotion';\n\nvar _createEmotion = createEmotion(),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n","import { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface TraktIconProps {\n  className?: string;\n}\n\nlet className = css`\n  background-image: url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTQ0LjggMTQ0LjgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE0NC44IDE0NC44IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgY3g9IjcyLjQiIGN5PSI3Mi40IiByPSI3Mi40Ii8+DQoJPHBhdGggZmlsbD0iI0VEMjIyNCIgZD0iTTI5LjUsMTExLjhjMTAuNiwxMS42LDI1LjksMTguOCw0Mi45LDE4LjhjOC43LDAsMTYuOS0xLjksMjQuMy01LjNMNTYuMyw4NUwyOS41LDExMS44eiIvPg0KCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik01Ni4xLDYwLjZMMjUuNSw5MS4xTDIxLjQsODdsMzIuMi0zMi4yaDBsMzcuNi0zNy42Yy01LjktMi0xMi4yLTMuMS0xOC44LTMuMWMtMzIuMiwwLTU4LjMsMjYuMS01OC4zLDU4LjMNCgkJYzAsMTMuMSw0LjMsMjUuMiwxMS43LDM1bDMwLjUtMzAuNWwyLjEsMmw0My43LDQzLjdjMC45LTAuNSwxLjctMSwyLjUtMS42TDU2LjMsNzIuN0wyNywxMDJsLTQuMS00LjFsMzMuNC0zMy40bDIuMSwybDUxLDUwLjkNCgkJYzAuOC0wLjYsMS41LTEuMywyLjItMS45bC01NS01NUw1Ni4xLDYwLjZ6Ii8+DQoJPHBhdGggZmlsbD0iI0VEMUMyNCIgZD0iTTExNS43LDExMS40YzkuMy0xMC4zLDE1LTI0LDE1LTM5YzAtMjMuNC0xMy44LTQzLjUtMzMuNi01Mi44TDYwLjQsNTYuMkwxMTUuNywxMTEuNHogTTc0LjUsNjYuOGwtNC4xLTQuMQ0KCQlsMjguOS0yOC45bDQuMSw0LjFMNzQuNSw2Ni44eiBNMTAxLjksMjcuMUw2OC42LDYwLjRsLTQuMS00LjFMOTcuOCwyM0wxMDEuOSwyNy4xeiIvPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik03Mi40LDE0NC44QzMyLjUsMTQ0LjgsMCwxMTIuMywwLDcyLjRDMCwzMi41LDMyLjUsMCw3Mi40LDBzNzIuNCwzMi41LDcyLjQsNzIuNA0KCQkJCUMxNDQuOCwxMTIuMywxMTIuMywxNDQuOCw3Mi40LDE0NC44eiBNNzIuNCw3LjNDMzYuNSw3LjMsNy4zLDM2LjUsNy4zLDcyLjRzMjkuMiw2NS4xLDY1LjEsNjUuMXM2NS4xLTI5LjIsNjUuMS02NS4xDQoJCQkJUzEwOC4zLDcuMyw3Mi40LDcuM3oiLz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K\");\n  background-repeat: no-repeat;\n  background-origin: content-box;\n`;\n\nexport default class TraktIcon extends Component<TraktIconProps> {\n  render() {\n    return (\n      <div className={ `${className} ${this.props.className}` } />\n    );\n  }\n}\n","import TraktApi from \"../TraktApi\";\nimport TraktIcon from \"./TraktIcon\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface ConnectButtonProps {\n  api: TraktApi;\n}\n\ninterface ConnectButtonState {\n  isConnected: boolean;\n}\n\nlet className = css`\n  background-color: black;\n  border: 1px solid #222;\n  border-radius: 5px;\n  padding: 2px 7px;\n  color: white;\n  font-size: 11px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst iconStyles = css`\n  height: 14px;\n  width: 14px;\n  margin-right: 5px;\n`;\n\nexport default class ConnectButton extends Component<ConnectButtonProps, ConnectButtonState> {\n  constructor(props: ConnectButtonProps) {\n    super(props);\n    this.state = { isConnected: this.props.api.isAuthenticated() };\n\n    this._handleAuthenticationChanged = this._handleAuthenticationChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.api.onAuthenticationChanged.sub(this._handleAuthenticationChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.api.onAuthenticationChanged.unsub(this._handleAuthenticationChanged);\n  }\n\n  private _handleAuthenticationChanged() {\n    this.setState({ isConnected: this.props.api.isAuthenticated() });\n  }\n\n  private _handleClick() {\n    let api = this.props.api;\n    if (api.isAuthenticated()) {\n      api.disconnect();\n    } else {\n      api.authenticate();\n    }\n  }\n\n  render() {\n    return (\n      <div className={className} onClick={ this._handleClick }>\n        <TraktIcon className={ iconStyles } />\n        <div class=\"text\">{ this.state.isConnected ? \"Disconnect from Trakt\" : \"Connect with Trakt\" }</div>\n      </div>\n    );\n  }\n}\n","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface ScrobbleInfoProps {\n  scrobble: TraktScrobble;\n}\n\ninterface ScrobbleInfoState {\n  scrobbleData: ITraktScrobbleData;\n  scrobbleState: TraktScrobbleState;\n  error: string;\n}\n\nconst className = css`\n& .info h2 {\n  font-size: 17px;\n  padding-bottom: 4px;\n}\n`;\n\nexport default class ScrobbleInfo extends Component<ScrobbleInfoProps, ScrobbleInfoState> {\n  constructor(props: ScrobbleInfoProps) {\n    super(props);\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n  }\n\n  componentWillMount() {\n    this.setState({ \n      scrobbleData: this.props.scrobble.data,\n      scrobbleState: this.props.scrobble.state,\n      error: this.props.scrobble.error\n    });\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStatusChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStatusChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    this.setState({ \n      scrobbleData: this.props.scrobble.data,\n      scrobbleState: this.props.scrobble.state,\n      error: this.props.scrobble.error\n    });\n  }\n\n  render() {\n    let data = this.state.scrobbleData;\n    let info;\n\n    // Still looking up\n    if (this.state.scrobbleState == TraktScrobbleState.Lookup) {\n      info = (\n        <div class=\"lookup\">Loading…</div>\n      );\n    \n    // Not found\n    } else if (this.state.scrobbleState == TraktScrobbleState.NotFound) {\n      info = (\n        <div class=\"error\">\n          <h2>Failed to scrobble:</h2>\n          <p>Could not find matching episode on Trakt</p>\n        </div>\n      );\n\n    // Error\n    } else if (this.state.scrobbleState == TraktScrobbleState.Error) {\n      info = (\n        <div class=\"error\">\n          <h2>Failed to scrobble:</h2>\n          <p>{ this.state.error }</p>\n        </div>\n      );\n\n    // Lookup succeeded\n    } else {\n      \n      if (data.movie && data.movie.ids) {\n        let movieUrl = `https://trakt.tv/movies/${data.movie.ids.slug}`;\n        info = (\n          <div class=\"info\">\n            <h2><a href={ movieUrl } target=\"_blank\">{ data.movie.title } ({ data.movie.year })</a></h2>\n          </div>\n        );\n      } else if (data.show && data.show.ids && data.episode && data.episode.ids) {\n        let showUrl = `https://trakt.tv/shows/${data.show.ids.slug}`;\n        let episodeUrl = `${showUrl}/seasons/${data.episode.season}/episodes/${data.episode.number}`;\n        let episodeTitle = data.episode.title ? `: ${data.episode.title}` : null;\n        info = (\n          <div class=\"info\">\n            <h2><a href={ showUrl } target=\"_blank\">{ data.show.title } ({ data.show.year })</a></h2>\n            <p><a href={ episodeUrl } target=\"_blank\">\n              Season { data.episode.season } Episode { data.episode.number }{ episodeTitle }\n            </a></p>\n          </div>\n        );\n      } else {\n        info = (\n          <div class=\"error\">\n            <h2>Internal error:</h2>\n            <p>Missing data</p>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div className={ className }>\n        { info }\n      </div>\n    );\n  }\n}\n","import { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface ButtonProps {\n  text: string;\n  onClick: h.JSX.MouseEventHandler<HTMLButtonElement>;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst className = css`\n  font-size: 12px;\n  font-weight: bold;\n  color: #eee;\n  background-color: #333;\n  border: none;\n  border-radius: 3px;\n  margin: 5px;\n  cursor: pointer;\n  padding: 5px 10px 5px 10px;\n  flex-grow: 1;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background-color: #555;\n  }\n`;\n\nexport default class Button extends Component<ButtonProps> {\n  render() {\n    return (\n      <button className={ `${className} ${this.props.className} ${this.props.disabled ? 'disabled' : ''}` } onClick={ this.props.onClick } >\n        { this.props.text }\n      </button>\n    );\n  }\n}\n","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport TraktApi, { ITraktHistoryItem, ITraktScrobbleData } from \"../TraktApi\";\nimport TraktHistory from \"../TraktHistory\";\nimport Button from \"./Button\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface ScrobbleHistoryProps {\n  scrobbleData: ITraktScrobbleData;\n  history: TraktHistory;\n}\n\ninterface ScrobbleHistoryState {\n  historyItems: ITraktHistoryItem[];\n}\n\nconst className = css`\n  & div {\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #666;\n    height: 24px;\n    align-items: flex-end;\n  }\n\n  & button {\n    flex-grow: 0;\n    font-size: 9px;\n    padding: 2px 10px;\n    margin-right: 0;\n    font-weight: normal;\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.2s ease;\n  }\n\n  & button:hover {\n    background-color: #eb3b14;\n  }\n\n  & div:hover button {\n    opacity: 1;\n    visibility: visible;\n  }\n`;\n\nconst ActionMap = {\n  scrobble: \"Scrobbled\",\n  checkin: \"Checked in\",\n  watch: \"Watched\"\n};\n\nexport default class ScrobbleHistory extends Component<ScrobbleHistoryProps, ScrobbleHistoryState> {\n  private _traktId: number;\n  private _formatter: Intl.DateTimeFormat;\n\n  constructor(props: ScrobbleHistoryProps) {\n    super(props);\n    this._formatter = new Intl.DateTimeFormat(navigator.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\", \n      hour: \"numeric\", \n      minute: \"numeric\"\n    });\n    this.state = { historyItems: null };\n\n    this._handleHistoryChanged = this._handleHistoryChanged.bind(this);\n  }\n\n  componentWillMount() {\n    let data = this.props.scrobbleData;\n    this._traktId = TraktScrobble.traktIdFromData(data);\n    if (this._traktId !== 0) {\n      let type = TraktScrobble.typeFromData(data);\n      this.props.history.sub(this._traktId, this._handleHistoryChanged);\n      this.props.history.load(type === \"movie\" ? \"movies\" : \"episodes\", this._traktId);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.history.unsub(this._traktId, this._handleHistoryChanged);\n  }\n\n  private _handleHistoryChanged(items: ITraktHistoryItem[]) {\n    this.setState({ historyItems: items });\n  }\n\n  private async _handleRemove(e: MouseEvent, item: ITraktHistoryItem) {\n    let el = e.target as HTMLElement;\n    el.classList.add(\"disabled\");\n    el.innerText = \"Removing...\";\n\n    await this.props.history.remove(item.id);\n\n    el.classList.remove(\"disabled\");\n    el.innerText = \"Remove\";\n  }\n  \n  render() {\n    if (this.state.historyItems && this.state.historyItems.length > 0) {\n      let rows = [];\n      for (let item of this.state.historyItems) {\n        rows.push(\n          <div>\n            <span>{ ActionMap[item.action] } at { this._formatter.format(new Date(item.watched_at)) }</span>\n            <Button text=\"Remove\" onClick={ (e) => this._handleRemove(e, item) } />\n          </div>\n        );\n      }\n      return (\n        <div className={ className }>\n          <h2>Watch History</h2>\n          { rows }\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","import TraktRoller from \"../TraktRoller\";\nimport TraktScrobble, { TraktScrobbleState, PlaybackState } from \"../TraktScrobble\";\nimport Button from \"./Button\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface ScrobbleControlProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n}\n\ninterface ScrobbleControlState {\n  scrobbleState: TraktScrobbleState;\n  scrobblingEnabled: boolean;\n}\n\nconst className = css`\n  display: flex;\n  margin: 5px -5px;\n  justify-content: space-between;\n\n  & > div, & > button {\n    width: 33%;\n  }\n\n  & .state {\n    font-size: 12px;\n    font-weight: bold;\n    text-align: center;\n    color: #fff;\n    background-color: #ed1c24;\n    border: none;\n    border-radius: 3px;\n    margin: 5px;\n    padding: 5px 10px 5px 10px;\n    width: 20%;\n  }\n`;\n\nconst scrobbleNowStyles = css`\n  color: #8e44ad;\n  border: 1px solid #8e44ad;\n  background: none;\n\n  &:hover {\n    background-color: #8e44ad;\n    color: #fff;\n  }\n`;\n\nconst enableScrobbleStyles = css`\n  color: #16a085;\n  border: 1px solid #16a085;\n  background: none;\n\n  &:hover {\n    background-color: #16a085;\n    color: #fff;\n  }\n`;\n\nconst EnabledStates = [\n  TraktScrobbleState.Found,\n  TraktScrobbleState.Started,\n  TraktScrobbleState.Paused\n];\n\nexport default class ScrobbleControl extends Component<ScrobbleControlProps, ScrobbleControlState> {\n  constructor(props: ScrobbleControlProps) {\n    super(props);\n    this.state = { scrobbleState: this.props.scrobble.state, scrobblingEnabled: this.props.roller.enabled };\n\n    this._onScrobbleStateChanged = this._onScrobbleStateChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleScrobbleNowClick = this._handleScrobbleNowClick.bind(this);\n    this._handleEnableScrobbleClick = this._handleEnableScrobbleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStateChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ scrobblingEnabled: enabled });\n  }\n\n  private _handleScrobbleNowClick() {\n    this.props.scrobble.scrobbleNow();\n  }\n\n  private _handleEnableScrobbleClick() {\n    this.props.roller.enabled = !this.props.roller.enabled;\n  }\n\n  render() {\n    let state = this.props.scrobble.enabled ? \"Disabled\" : TraktScrobbleState[this.props.scrobble.state];\n    let title = this.props.scrobble.error || \"\";\n\n    let disabled = !(EnabledStates.indexOf(this.state.scrobbleState) >= 0);\n    let label = this.props.roller.enabled ? \"Enable Scrobbling\" : \"Disable Scrobbling\";\n\n    return (\n      <div className={ className }>\n        <div class=\"state\" title={ title }>{ state }</div>\n        <Button className={ scrobbleNowStyles } text=\"Scrobble Now\" onClick={ this._handleScrobbleNowClick } disabled={ disabled } />\n        <Button className={ enableScrobbleStyles } text={ label } onClick={ this._handleEnableScrobbleClick } />\n      </div>\n    );\n  }\n}\n","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport ScrobbleInfo from \"./ScrobbleInfo\";\nimport ScrobbleHistory from \"./ScrobbleHistory\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\nimport TraktHistory from \"../TraktHistory\";\nimport ScrobbleControl from \"./ScrobbleControl\";\nimport TraktRoller from \"../TraktRoller\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface PopupProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n  history: TraktHistory;\n}\n\ninterface PopupState {\n  scrobbleData: ITraktScrobbleData;\n}\n\nconst className = css`\n  color: #eee;\n\n  & > div {\n    padding: 15px;\n  }\n\n  & a, & p a {\n    color: #eee;\n    transition: color 0.2s ease;\n  }\n\n  & h2 {\n    font-size: 13px;\n    margin: 0;\n  }\n\n  & h2 a:hover, & p a:hover {\n    color: #ed1c24;\n    text-decoration: none;\n  }\n\n  button.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n`;\n\nexport default class Popup extends Component<PopupProps, PopupState> {\n  constructor(props: PopupProps) {\n    super(props);\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n  }\n\n  componentWillMount() {\n    this.setState({ scrobbleData: this.props.scrobble.data });\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStatusChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStatusChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleData: this.props.scrobble.data });\n  }\n\n  render() {\n    let scrobble = this.props.scrobble;\n\n    return (\n      <div className={ className }>\n        <ScrobbleInfo scrobble={ this.props.scrobble } />\n        <ScrobbleHistory \n          scrobbleData={ this.state.scrobbleData } \n          history={ this.props.history } \n          key={ TraktScrobble.traktIdFromData(this.state.scrobbleData) }\n        />\n        <ScrobbleControl scrobble={ this.props.scrobble } roller={ this.props.roller } />\n      </div>\n    );\n  }\n}\n","import TraktRoller from \"../TraktRoller\";\nimport TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport TraktHistory from \"../TraktHistory\";\nimport TraktIcon from \"./TraktIcon\";\nimport Popup from \"./Popup\";\n\nimport { Component, h } from \"preact\";\nimport { css } from \"emotion\";\n\ninterface StatusButtonProps {\n  roller: TraktRoller;\n  scrobble: TraktScrobble;\n  history: TraktHistory;\n}\n\ninterface StatusButtonState {\n  scrobbleState: TraktScrobbleState;\n  enabled: boolean;\n}\n\nconst popupClassName = css`\n  background: #161616;\n  border: 1px solid #fff;\n  position: absolute;\n  width: 450px;\n  z-index: 100;\n  left: -209px;\n  border-radius: 4px;\n  transition: all 0.2s ease-in;\n  transition-delay: 0.2s;\n  visibility: hidden;\n  opacity: 0;\n  bottom: 55px;\n\n  &:after, &:before {\n    top: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: \" \";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n  &:after {\n    border-color: rgba(0, 0, 0, 0);\n    border-top-color: #000000;\n    border-width: 15px;\n    margin-left: -15px;\n  }\n  &:before {\n    border-color: rgba(255, 255, 255, 0);\n    border-top-color: #fff;\n    border-width: 17px;\n    margin-left: -17px;\n  }\n  & .hover-blocker {\n    position: absolute;\n    bottom: -75px;\n    left: 33%;\n    width: 33%;\n    height: 75px;\n  }\n`;\n\nconst className = css`\n  position: relative;\n\n  &:hover .popup {\n    visibility: visible;\n    opacity: 1;\n    bottom: 44px;\n  }\n`;\n\nconst buttonClassName = css`\n  width: 38px;\n  height: 24px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  position: relative;\n  z-index: 101;\n\n  &.state-disabled {\n    filter: opacity(0.5);\n  }\n  &.state-scrobbled {\n    filter: hue-rotate(150deg) brightness(1.3);\n  }\n  &.state-error, &.state-notfound {\n    filter: grayscale(1) brightness(2);\n  }\n`;\n\nconst iconStyles = css`\n  height: 100%;\n`;\n\nexport default class StatusButton extends Component<StatusButtonProps, StatusButtonState> {\n  constructor(props: StatusButtonProps) {\n    super(props);\n    this.state = { scrobbleState: this.props.scrobble.state, enabled: this.props.roller.enabled };\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.scrobble.onStateChanged.sub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.scrobble.onStateChanged.unsub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ enabled: enabled });\n  }\n\n  private _handleClick() {\n    window.open(this.props.scrobble.scrobbleUrl(), '_blank');\n  }\n\n  render() {\n    let state = this.state.enabled ? \"disabled\" : TraktScrobbleState[this.state.scrobbleState].toLowerCase();\n    let stateClass = \"state-\" + state;\n    let title = this.props.scrobble.error || TraktScrobbleState[this.state.scrobbleState];\n    return (\n      <div className={ `${className} right` }>\n        <button className={ `${buttonClassName} ${stateClass}` } title={ title } onClick={ this._handleClick }>\n          <TraktIcon className={ iconStyles } />\n        </button>\n        <div className={ `${popupClassName} popup` }>\n          <Popup roller={ this.props.roller } scrobble={ this.props.scrobble } history={ this.props.history } />\n          <div class=\"hover-blocker\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import TraktApi, { ITraktHistoryItem } from \"./TraktApi\";\n\ninterface History {\n  traktId: number;\n  items: ITraktHistoryItem[] | null, \n  subscribers: Array<(history: ITraktHistoryItem[]) => void>;\n}\n\n/** Load a manage Trakt watched history */\nexport default class TraktHistory {\n  private _api: TraktApi;\n  private _histories: { [key: string]: History } = {};\n\n  constructor(api: TraktApi) {\n    this._api = api;\n  }\n\n  /** Load history for a movie or episode */\n  public async load(type: 'movies' | 'episodes', traktId: number, reload: boolean = false): Promise<ITraktHistoryItem[]> {\n    if (!reload && this._histories[traktId] && this._histories[traktId].items) {\n      return this._histories[traktId].items;\n    }\n\n    let result = await this._api.history(type, traktId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error loading scrobble history (${result.error})`)\n      return [];\n    }\n\n    this._update(traktId, result);\n    return result;\n  }\n\n  /** Add a new item to the history */\n  public add(traktId: number, item: ITraktHistoryItem) {\n    let history = this._getOrCreateHistory(traktId);\n    if (!history.items) history.items = [];\n    history.items.push(item);\n    history.items.sort((a, b) => new Date(b.watched_at).valueOf() - new Date(a.watched_at).valueOf());\n    this._update(traktId, history.items);\n  }\n\n  /** Remove a watched entry by its id */\n  public async remove(historyId: number): Promise<void> {\n    let result = await this._api.historyRemove(historyId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error removing scrobble (${result.error})`)\n      return;\n    } else if (result.not_found.ids.indexOf(historyId) >= 0) {\n      console.warn(`TraktRoller: Could not remove history id ${historyId}, not found on server`);\n    }\n\n    outer:\n    for (let traktId of Object.keys(this._histories)) {\n      let history = this._histories[traktId];\n      if (!history.items) continue;\n      for (let i = 0; i < history.items.length; i++) {\n        if (history.items[i].id === historyId) {\n          history.items.splice(i, 1);\n          this._update(history.traktId, history.items);\n          break outer;\n        }\n      }\n    }\n  }\n\n  /** Get notified when the history changes */\n  public sub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._getOrCreateHistory(traktId);\n    history.subscribers.push(callback);\n  }\n\n  /** Remove a history subscriber */\n  public unsub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._histories[traktId];\n    if (!history) return;\n\n    let index = history.subscribers.indexOf(callback);\n    if (index >= 0) history.subscribers.splice(index, 1);\n  }\n\n  private _getOrCreateHistory(traktId: number) {\n    let history = this._histories[traktId];\n    if (!history) {\n      history = this._histories[traktId] = { traktId: traktId, items: null, subscribers: [] };\n    }\n    return history;\n  }\n\n  private _update(traktId: number, items: ITraktHistoryItem[]) {\n    let history = this._getOrCreateHistory(traktId);\n    history.items = items;\n    for (let sub of history.subscribers) { sub(items); }\n  }\n}","import TraktApi, { ITraktScrobbleData, ITraktApiOptions, ITraktScobbleResult, ITraktHistoryItem, IStorage, LocalStorageAdapter } from \"./TraktApi\";\nimport TraktScrobble, { TraktScrobbleState, PlaybackState } from \"./TraktScrobble\";\nimport ConnectButton from \"./ui/ConnectButton\";\nimport StatusButton from \"./ui/StatusButton\";\nimport TraktHistory from \"./TraktHistory\";\n\nimport { render, h } from 'preact';\nimport { SimpleEventDispatcher } from \"ste-simple-events\";\n\ninterface ITraktRollerOptions extends ITraktApiOptions {\n  //\n}\n\nconst EpisodeRegex = /Episode ([\\d\\.]+)/;\nconst SeasonRegex = /Season (\\d+)/;\n\nconst MovieRegexes = [\n  /Movie$/i,\n  /Movie (Dub)$/i,\n  /Movie (Sub)$/i,\n  /Movie (Dubbed)$/i,\n  /Movie (Subtitled)$/i,\n  /^Movie - /i,\n  /The Movie/i,\n];\n\nconst ScrobblingEnabledKey: string = 'TraktRoller.enabled';\n\nexport default class TraktRoller {\n  public onEnabledChanged = new SimpleEventDispatcher<boolean>();\n\n  private _player: playerjs.Player;\n  private _storage: IStorage;\n  private _api: TraktApi;\n  private _scrobble?: TraktScrobble;\n  private _history: TraktHistory;\n  private _enabled: boolean;\n\n  private _duration: number;\n  private _currentTime: number;\n\n  constructor(options: ITraktRollerOptions) {\n    console.log(\"TraktRoller\");\n\n    this._storage = options.storage || new LocalStorageAdapter();\n    this._loadPrefs();\n\n    this._api = new TraktApi(options);\n    this._api.onAuthenticationChanged.sub(this._onAuthenticationChange.bind(this));\n    this._api.loadTokens();\n\n    this._createFooterButton();\n    this._waitForPlayer();\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n    this._enabled = value;\n\n    this._storage.setValue(ScrobblingEnabledKey, value ? \"true\" : \"false\");\n    if (this._scrobble) this._scrobble.enabled = value;\n\n    this.onEnabledChanged.dispatch(value);\n  }\n\n  private async _loadPrefs() {\n    this._enabled = await this._storage.getValue(ScrobblingEnabledKey) === \"true\";\n  }\n\n  private _waitForPlayer() {\n    if (unsafeWindow.VILOS_PLAYERJS) {\n      this._loadPlayer(unsafeWindow.VILOS_PLAYERJS);\n    } else {\n      // Use a setter to wait for the player to be set\n      let value: any;\n      Object.defineProperty(unsafeWindow, \"VILOS_PLAYERJS\", {\n        get: ()=> value,\n        set: (v)=> {\n          value = v;\n          this._loadPlayer(v);\n        }\n      });\n    }\n  }\n\n  private _loadPlayer(player: playerjs.Player) {\n    player.on(playerjs.EVENTS.READY, () => this._playerReady(player));\n  }\n\n  private _playerReady(player: playerjs.Player) {\n    if (!this._api.isAuthenticated()) return;\n\n    let data = this._getScrobbleData();\n    if (!data) return;\n\n    this._player = player;\n    this._player.on(playerjs.EVENTS.TIMEUPDATE,  (info: { seconds: number, duration: number }) => this._onTimeChanged(info));\n    this._player.on(playerjs.EVENTS.PLAY,  () => this._onPlaybackStateChange(PlaybackState.Playing));\n    this._player.on(playerjs.EVENTS.PAUSE, () => this._onPlaybackStateChange(PlaybackState.Paused));\n    this._player.on(playerjs.EVENTS.ENDED, () => this._onPlaybackStateChange(PlaybackState.Ended));\n    this._player.on(playerjs.EVENTS.ERROR, () => this._onPlaybackStateChange(PlaybackState.Ended));\n\n    this._history = new TraktHistory(this._api);\n\n    this._scrobble = new TraktScrobble(this._api, data);\n    this._scrobble.enabled = this.enabled;\n    this._scrobble.onStateChanged.sub(this._onScrobbleStatusChanged.bind(this));\n    this._scrobble.onScrobbled.sub(this._onScrobbled.bind(this));\n\n    this._createStatusButton();\n  }\n\n  private _onTimeChanged(info: { seconds: number, duration: number }) {\n    this._currentTime = info.seconds;\n    this._duration = info.duration;\n    if (this._scrobble) this._scrobble.setPlaybackTime(info.seconds, info.duration);\n  }\n\n  private _onPlaybackStateChange(state: PlaybackState) {\n    if (!this._scrobble) return;\n    this._scrobble.setPlaybackState(state, this._getProgress());\n  }\n\n  private _getProgress(): number {\n    if (!this._duration) {\n      console.warn(`TraktRoller: Duration is not set (${this._duration})`);\n      return 0;\n    } else if (this._duration === undefined) {\n      console.warn(\"TraktRoller: Current time is not set\");\n      return 0;\n    }\n    \n    return this._currentTime / this._duration * 100;\n  }\n\n  private _getScrobbleData(): ITraktScrobbleData | null {\n    let buildDate = new Date(process.env.BUILD_DATE);\n    const data: ITraktScrobbleData = {\n      progress: this._getProgress(),\n      app_version: process.env.VERSION,\n      app_date: `${buildDate.getFullYear()}-${buildDate.getMonth() + 1}-${buildDate.getDate()}`\n    };\n\n    const titleElement = document.querySelector('#showmedia_about_episode_num');\n    if (!titleElement || titleElement.textContent.length == 0) {\n      console.error(\"TraktRoller: Could not find video title\");\n      return null;\n    }\n    let showTitle = titleElement.textContent.trim();\n\n    let episodeTitle: string = undefined;\n    const episodeTitleElement = document.querySelector('#showmedia_about_name');\n    if (episodeTitleElement) {\n      episodeTitle = episodeTitleElement.textContent.trim();\n      if (episodeTitle) {\n        if (episodeTitle.startsWith(\"“\")) {\n          episodeTitle = episodeTitle.substring(1);\n        }\n        if (episodeTitle.endsWith(\"”\")) {\n          episodeTitle = episodeTitle.substring(0, episodeTitle.length - 1);\n        }\n      }\n    }\n\n    let seasonNumber = 1;\n    let episodeNumber = 0;\n    const episodeElement = document.querySelector('#showmedia_about_media h4:nth-child(2)');\n    if (episodeElement && episodeElement.textContent.length > 0) {\n      const seasonMatch = SeasonRegex.exec(episodeElement.textContent);\n      if (seasonMatch) {\n        seasonNumber = parseInt(seasonMatch[1]);\n      }\n      \n      const episodeMatch = EpisodeRegex.exec(episodeElement.textContent);\n      if (episodeMatch) {\n        episodeNumber = parseFloat(episodeMatch[1]);\n      }\n    }\n\n    if (episodeTitle && MovieRegexes.some(r => r.test(episodeTitle))) {\n      data.movie = {\n        title: showTitle\n      };\n    } else {\n      data.show = {\n        title: showTitle\n      };\n      data.episode = {\n        season: seasonNumber,\n        number: episodeNumber,\n        title: episodeTitle\n      };\n    }\n\n    return data;\n  }\n\n  private _onAuthenticationChange(isAuthenticated: boolean) {\n    if (!isAuthenticated) {\n      this._api.checkAuthenticationResult(window.location.href);\n    }\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    //\n  }\n\n  private _onScrobbled(result: ITraktScobbleResult) {\n    var item: ITraktHistoryItem = {\n      id: result.id,\n      watched_at: new Date().toISOString(),\n      action: \"scrobble\",\n      type: (result.movie ? 'movie' : 'episode'),\n      movie: result.movie,\n      show: result.show,\n      episode: result.episode\n    };\n    let traktId = result.movie ? result.movie.ids.trakt : result.episode.ids.trakt;\n    this._history.add(traktId, item);\n  }\n\n  private _createFooterButton() {\n    let footer = document.querySelector('#social_media');\n    if (!footer) {\n      console.error(\"TraktRoller: Could not find footer to add trakt connect button\");\n      return;\n    }\n\n    render(\n      <div class=\"footer-column\">\n        <ConnectButton api={ this._api } />\n      </div>,\n      footer\n    );\n  }\n\n  private _createStatusButton() {\n    let container = document.querySelector('.showmedia-submenu');\n    if (!container) {\n      console.error(\"TraktRoller: Could not find share row to add trakt status button\");\n      return;\n    }\n\n    render((\n      <StatusButton roller={ this } scrobble={ this._scrobble } history={ this._history } />\n    ), container);\n  }\n}\n","import TraktRoller from \"./TraktRoller\";\nimport { GreaseMonkeyStorageAdapter } from \"./TraktApi\";\n\nnew TraktRoller({\n  client_id: \"5ac1bf2ba188fc93f941eb0788ef5cb6e0e4bf96b882e914e6d0c17dacc8e7f2\",\n  client_secret: \"3712241a1c467769e6c03336abb5fb9911f8665354d2aaffaa9f817e147a34ca\",\n  storage: new GreaseMonkeyStorageAdapter()\n});\n"]}