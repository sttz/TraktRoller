{"version":3,"sources":["../node_modules/ste-core/dist/management.js","../node_modules/ste-core/dist/subscription.js","../node_modules/ste-core/dist/dispatching.js","../node_modules/ste-core/dist/index.js","../node_modules/ste-events/dist/events.js","../node_modules/ste-events/dist/index.js","../node_modules/ste-simple-events/dist/simple-events.js","../node_modules/ste-simple-events/dist/index.js","../node_modules/ste-signals/dist/signals.js","../node_modules/ste-signals/dist/index.js","../node_modules/strongly-typed-events/dist/index.js","TraktApi.ts","TraktScrobble.ts","../src/constants.js","../src/options.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","../src/index.js","../src/PureComponent.js","../src/memo.js","../src/forwardRef.js","../src/Children.js","../src/suspense.js","../src/suspense-list.js","../src/portals.js","../src/events.js","../node_modules/@babel/runtime/helpers/inheritsLoose.js","../node_modules/@emotion/sheet/dist/sheet.browser.esm.js","../node_modules/@emotion/stylis/dist/stylis.browser.esm.js","../node_modules/@emotion/weak-memoize/dist/weak-memoize.browser.esm.js","../node_modules/@emotion/cache/dist/cache.browser.esm.js","../node_modules/@emotion/utils/dist/utils.browser.esm.js","../node_modules/@emotion/hash/dist/hash.browser.esm.js","../node_modules/@emotion/unitless/dist/unitless.browser.esm.js","../node_modules/@emotion/memoize/dist/memoize.browser.esm.js","../node_modules/@emotion/serialize/dist/serialize.browser.esm.js","../node_modules/@emotion/css/dist/css.browser.esm.js","../node_modules/@emotion/core/dist/core.browser.esm.js","ui/TraktIcon.tsx","ui/ConnectButton.tsx","ui/ScrobbleInfo.tsx","ui/Button.tsx","ui/ScrobbleHistory.tsx","ui/ScrobbleControl.tsx","ui/Popup.tsx","ui/StatusButton.tsx","TraktHistory.ts","TraktLookup.ts","../node_modules/player.js/dist/player-0.1.0.js","TraktRoller.tsx","websites/Crunchyroll.ts","websites/Funimation.ts","index.ts"],"names":["Object","defineProperty","exports","value","EventManagement","unsub","propagationStopped","prototype","stopPropagation","Subscription","handler","isOnce","isExecuted","execute","executeAsync","scope","args","fn","setTimeout","apply","__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","management_1","require","subscription_1","DispatcherBase","_wrap","DispatcherWrapper","_subscriptions","get","enumerable","configurable","subscribe","_this","push","unsubscribe","sub","one","has","some","splice","_dispatch","_loop_1","ev","nargs","slice","call","this_1","cleanup","_i","_a","state_1","indexOf","asEvent","clear","EventListBase","_events","name","event","createDispatcher","remove","dispatcher","_subscribe","_unsubscribe","_one","_has","_clear","_count","count","dispatching_1","__extends","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__","constructor","create","ste_core_1","EventDispatcher","_super","dispatch","sender","dispatchAsync","NonUniformEventList","EventList","EventHandlingBase","events_1","SimpleEventDispatcher","NonUniformSimpleEventList","SimpleEventList","SimpleEventHandlingBase","simple_events_1","SignalDispatcher","SignalList","SignalHandlingBase","signals_1","ste_events_1","ste_simple_events_1","ste_signals_1","options","isValidElement","rerenderQueue","rerenderCount","defer","prevDebounce","IS_HYDRATE","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","defaultProps","undefined","createVNode","key","ref","original","vnode","_children","_parent","_depth","_dom","_nextDom","_component","_original","createRef","Fragment","Component","context","getDomSibling","childIndex","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","queue","sort","_vnode","component","commitQueue","oldVNode","newDom","oldDom","parentDom","_parentDom","diff","_globalContext","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","nextDom","outer","appendChild","nextSibling","insertBefore","unmount","applyRef","callback","flattened","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","oldValue","useCapture","nameLower","cssText","replace","toLowerCase","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","componentContext","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","render","doRender","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","_force","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","cb","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_props","old","_contextRef","error","hasCaught","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","currentIndex","currentComponent","prevRaf","currentHook","afterPaintEffects","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","_hook","hooks","__hooks","_list","_pendingEffects","useState","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_value","action","nextValue","useEffect","_skipEffects","argsChanged","_args","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","_factory","useCallback","useContext","_context","useDebugValue","formatter","useErrorBoundary","errState","err","flushAfterPaintEffects","forEach","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","window","filter","shallowDiffers","PureComponent","isPureReactComponent","memo","comparer","shouldUpdate","nextProps","updateRef","Memoed","isReactComponent","displayName","_forwarded","oldDiffHook","forwardRef","Forwarded","clone","mapFn","reduce","acc","Children","map","only","Error","toArray","oldCatchError","detachedClone","Suspense","_pendingSuspensionCount","_suspenders","_detachOnNextRender","suspended","_suspended","lazy","loader","prom","Lazy","default","SuspenseList","_next","_map","_childDidSuspend","promise","suspendingComponent","resolved","onResolved","onSuspensionComplete","_suspendedComponentWillUnmount","pop","fallback","list","delete","revealOrder","size","delegated","unsuspend","wrappedUnsuspend","Map","reverse","set","ContextProvider","Portal","container","wrap","_container","_temp","_unmount","_hasMounted","createPortal","CAMEL_PROPS","REACT_ELEMENT_TYPE","Symbol","for","parent","firstChild","preactRender","preactHydrate","oldEventHook","setSafeDescriptor","proto","v","persist","stoppedPropagating","defaultPrevented","origStopPropagation","origPreventDefault","preventDefault","isPropagationStopped","isDefaultPrevented","nativeEvent","classNameDescriptor","class","oldVNodeHook","$$typeof","className","shouldSanitize","attrs","multiple","selected","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","applyEventNormalization","_patchedLifecycles","version","createFactory","element","preactCloneElement","unmountComponentAtNode","findDOMNode","unstable_batchedUpdates","sheetForTag","tag","sheet","styleSheets","ownerNode","createStyleElement","nonce","StyleSheet","isSpeedy","speedy","tags","ctr","before","_proto","insert","rule","_tag","isImportRule","charCodeAt","insertRule","cssRules","console","warn","flush","stylis_min","W","M","h","m","n","q","g","x","K","u","l","I","t","B","J","y","F","G","C","N","trim","charAt","substring","ca","O","A","X","H","D","z","join","da","ea","fa","w","L","P","Y","E","ha","Q","split","ia","Z","ja","ka","aa","ba","la","ma","R","na","oa","S","T","U","prefix","V","use","weakMemoize","func","cache","WeakMap","ret","delimiter","needle","toSheet","block","Sheet","ruleSheet","content","selectors","parents","line","column","ns","depth","at","createCache","stylisOptions","stylis","Stylis","inserted","head","nodes","querySelectorAll","attrib","getAttribute","id","_insert","stylisPlugins","selector","serialized","shouldCache","styles","commentStart","commentEnd","lastIndex","flag","unsafePseudoClasses","match","compat","unsafePseudoClass","ignoreRegExp","RegExp","ignore","registered","isBrowser","getRegisteredStyles","registeredStyles","classNames","rawClassName","insertStyles","isStringTag","maybeStyles","next","murmur2","str","len","toString","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","memoize","ILLEGAL_ESCAPE_SEQUENCE_ERROR","UNDEFINED_AS_OBJECT_KEY_ERROR","hyphenateRegex","animationRegex","isCustomProperty","property","isProcessableValue","processStyleName","styleName","processStyleValue","p1","p2","cursor","unitless","contentValuePattern","contentValues","oldProcessStyleValue","msPattern","hyphenPattern","hyphenatedCache","processed","_char","toUpperCase","shouldWarnAboutInterpolatingClassNameFromCss","handleInterpolation","mergedProps","interpolation","couldBeSelectorInterpolation","__emotion_styles","anim","createStringFromObject","previousCursor","matched","replaced","fakeVarName","cached","string","_key","interpolated","labelPattern","sourceMapPattern","serializeStyles","stringMode","strings","raw","sourceMap","identifierName","exec","css","_len","EmotionCacheContext","HTMLElement","ThemeContext","CacheProvider","withEmotionCache","sanitizeIdentifier","identifier","typePropName","labelPropName","theme","cssProp","labelFromStack","rules","ele","Emotion","jsx","argsLength","createElementArgArray","stack","warnedAboutCssPropForGlobal","Global","InnerGlobal","_React$Component","updater","querySelector","prevProps","insertStyles$1","nextElementSibling","keyframes","insertable","classnames","cls","toAdd","merge","ClassNames","hasRendered","cx","_len2","_key2"],"mappings":"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jB;AACD;AACF;;AAED,WAAO,IAAP;AACD;;AAEO,EAAA,mBAAmB,CAAC,KAAD,EAAc;AACvC,QAAI,CAAC,KAAL,EAAY;AACZ,WAAO,KAAK,CAAC,OAAN,CAAc,WAAd,EAA2B,EAA3B,EAA+B,WAA/B,EAAP;AACD;;AA5M6B;;AAAhC,OAAA,CAAA,OAAA,GAAA,WAAA;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1qCA,MAAA,UAAA,GAAA,YAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,MAAA,eAAA,GAAA,YAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AACA,MAAA,eAAA,GAAA,eAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;;AACA,MAAA,cAAA,GAAA,eAAA,CAAA,OAAA,CAAA,mBAAA,CAAA,CAAA;;AACA,MAAA,cAAA,GAAA,eAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;;AACA,MAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AAEA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,MAAA,WAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AACA,MAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;;AACA,MAAA,mBAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AACA,MAAA,QAAA,GAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AAEa,OAAA,CAAA,aAAA,GAAgB,OAAA,CAAA,aAAA,CAAuC,SAAvC,CAAhB;AAab,IAAY,gBAAZ;;AAAA,CAAA,UAAY,gBAAZ,EAA4B;AAC1B,EAAA,gBAAA,CAAA,WAAA,CAAA,GAAA,WAAA;AACA,EAAA,gBAAA,CAAA,QAAA,CAAA,GAAA,QAAA;AACA,EAAA,gBAAA,CAAA,UAAA,CAAA,GAAA,UAAA;AACA,EAAA,gBAAA,CAAA,YAAA,CAAA,GAAA,YAAA;AACA,EAAA,gBAAA,CAAA,OAAA,CAAA,GAAA,OAAA;AACD,CAND,EAAY,gBAAgB,GAAhB,OAAA,CAAA,gBAAA,KAAA,OAAA,CAAA,gBAAA,GAAgB,EAAhB,CAAZ;;AAMC;AAID,MAAM,aAAa,GAAG,uFAAtB;AAEA,MAAM,oBAAoB,GAAW,qBAArC;;AAEA,MAAqB,WAArB,CAAgC;AAmB9B,EAAA,WAAA,CAAY,OAAZ,EAAwC;AAlBjC,SAAA,cAAA,GAAiB,IAAI,mBAAA,CAAA,qBAAJ,EAAjB;AACA,SAAA,gBAAA,GAAmB,IAAI,mBAAA,CAAA,qBAAJ,EAAnB;AAYC,SAAA,QAAA,GAAoB,KAApB;AAEA,SAAA,SAAA,GAAoB,CAApB;AACA,SAAA,YAAA,GAAuB,CAAvB;AAGN,QAAI,CAAC,OAAO,CAAC,OAAb,EAAsB,MAAM,IAAI,KAAJ,CAAU,sCAAV,CAAN;AAEtB,IAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;AAEA,SAAK,MAAL,GAAc,gBAAgB,CAAC,SAA/B;AAEA,SAAK,QAAL,GAAgB,OAAO,CAAC,OAAxB;AAEA,SAAK,QAAL,GAAgB,OAAO,CAAC,OAAR,IAAmB,IAAI,UAAA,CAAA,mBAAJ,EAAnC;;AACA,SAAK,UAAL;;AAEA,SAAK,IAAL,GAAY,IAAI,UAAA,CAAA,OAAJ,CAAa,OAAb,CAAZ;;AACA,SAAK,IAAL,CAAU,uBAAV,CAAkC,GAAlC,CAAsC,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,CAAtC;;AACA,SAAK,IAAL,CAAU,UAAV;;AAEA,SAAK,QAAL,GAAgB,IAAI,cAAA,CAAA,OAAJ,CAAiB,KAAK,IAAtB,CAAhB;AAEA,SAAK,OAAL,GAAe,IAAI,aAAA,CAAA,OAAJ,CAAgB,KAAK,IAArB,CAAf;AAEA,SAAK,SAAL,GAAiB,IAAI,eAAA,CAAA,OAAJ,CAAkB,KAAK,IAAvB,CAAjB;AACA,SAAK,SAAL,CAAe,OAAf,GAAyB,KAAK,OAA9B;;AACA,SAAK,SAAL,CAAe,cAAf,CAA8B,GAA9B,CAAkC,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAlC;;AACA,SAAK,SAAL,CAAe,WAAf,CAA2B,GAA3B,CAA+B,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAA/B;;AAEA,SAAK,mBAAL;;AACA,SAAK,cAAL;AACD;;AAED,MAAW,QAAX,GAAmB;AACjB,WAAO,KAAK,SAAZ;AACD;;AAED,MAAW,OAAX,GAAkB;AAChB,WAAO,KAAK,QAAZ;AACD;;AAED,MAAW,KAAX,GAAgB;AACd,QAAI,KAAK,MAAL,IAAe,gBAAgB,CAAC,UAApC,EAAgD;AAC9C,aAAO,KAAK,MAAZ;AACD,KAFD,MAEO;AACL,aAAO,KAAK,SAAL,CAAe,KAAtB;AACD;AACF;;AAEO,EAAA,SAAS,CAAC,KAAD,EAAwB;AACvC,QAAI,KAAK,MAAL,IAAe,KAAnB,EAA0B;AAC1B,SAAK,MAAL,GAAc,KAAd;AACA,SAAK,cAAL,CAAoB,QAApB,CAA6B,KAAK,KAAlC;AACD;;AAED,MAAW,KAAX,GAAgB;AACd,QAAI,KAAK,MAAL,IAAe,gBAAgB,CAAC,UAApC,EAAgD;AAC9C,aAAO,KAAK,MAAZ;AACD,KAFD,MAEO;AACL,aAAO,KAAK,SAAL,CAAe,KAAtB;AACD;AACF;;AAED,MAAW,OAAX,GAAkB;AAChB,WAAO,KAAK,QAAZ;AACD;;AAED,MAAW,OAAX,CAAmB,KAAnB,EAAiC;AAC/B,QAAI,KAAK,QAAL,KAAkB,KAAtB,EAA6B;AAC7B,SAAK,QAAL,GAAgB,KAAhB;;AAEA,SAAK,QAAL,CAAc,QAAd,CAAuB,oBAAvB,EAA6C,KAAK,GAAG,MAAH,GAAY,OAA9D;;AACA,SAAK,SAAL,CAAe,OAAf,GAAyB,KAAzB;AAEA,SAAK,gBAAL,CAAsB,QAAtB,CAA+B,KAA/B;AACD;;AAEY,EAAA,cAAc,CAAC,GAAD,EAAY;;AACrC,UAAI,KAAK,GAAG,aAAa,CAAC,IAAd,CAAmB,GAAnB,CAAZ;;AACA,UAAI,CAAC,KAAL,EAAY;AACV,aAAK,MAAL,GAAc,yBAAd;;AACA,aAAK,SAAL,CAAe,gBAAgB,CAAC,KAAhC;;AACA;AACD;;AAED,UAAI,IAAI,GAAG,KAAK,iBAAL,EAAX;;AACA,UAAI,KAAK,CAAC,CAAD,CAAL,IAAY,QAAhB,EAA0B;AACxB,QAAA,IAAI,CAAC,KAAL,GAAa;AACX,UAAA,GAAG,EAAE;AACH,YAAA,IAAI,EAAE,KAAK,CAAC,CAAD;AADR;AADM,SAAb;AAKD,OAND,MAMO;AACL,QAAA,IAAI,CAAC,IAAL,GAAY;AACV,UAAA,GAAG,EAAE;AACH,YAAA,IAAI,EAAE,KAAK,CAAC,CAAD;AADR;AADK,SAAZ;;AAKA,YAAI,KAAK,CAAC,CAAD,CAAL,IAAY,KAAK,CAAC,CAAD,CAArB,EAA0B;AACxB,UAAA,IAAI,CAAC,OAAL,GAAe;AACb,YAAA,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAD,CAAN,CADH;AAEb,YAAA,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAD,CAAN;AAFH,WAAf;AAID,SALD,MAKO;AACL,cAAI,KAAK,SAAL,CAAe,IAAf,IAAuB,KAAK,SAAL,CAAe,IAAf,CAAoB,OAA/C,EAAwD;AACtD,YAAA,IAAI,CAAC,OAAL,GAAe,KAAK,SAAL,CAAe,IAAf,CAAoB,OAAnC;AACD,WAFD,MAEO;AACL,gBAAI,QAAQ,GAAG,KAAK,gBAAL,EAAf;;AACA,YAAA,IAAI,CAAC,OAAL,GAAe,QAAQ,KAAA,IAAR,IAAA,QAAQ,KAAA,KAAA,CAAR,GAAQ,KAAA,CAAR,GAAA,QAAQ,CAAE,OAAzB;AACD;AACF;AACF;;AAED,YAAM,KAAK,OAAL,CAAa,IAAb,CAAN;AACD;AAAA;;AAEa,EAAA,UAAU,GAAA;;AACtB,WAAK,QAAL,GAAgB,CAAA,MAAM,KAAK,QAAL,CAAc,QAAd,CAAuB,oBAAvB,CAAN,MAAuD,MAAvE;AACD;AAAA;;AAEa,EAAA,cAAc,GAAA;;AAC1B,UAAI;AACF,aAAK,OAAL,GAAe,MAAM,KAAK,QAAL,CAAc,UAAd,EAArB;;AACA,aAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,KAAhC,EAAuC,MAAM,KAAK,YAAL,EAA7C;AACD,OAHD,CAGE,OAAO,CAAP,EAAU;AACV,QAAA,OAAO,CAAC,GAAR,CAAY,sCAAZ;AACD;AACF;AAAA;;AAEO,EAAA,YAAY,GAAA;AAClB,QAAI,CAAC,KAAK,IAAL,CAAU,eAAV,EAAL,EAAkC;AAClC,QAAI,CAAC,KAAK,OAAV,EAAmB;;AAEnB,QAAI,IAAI,GAAG,KAAK,gBAAL,EAAX;;AACA,QAAI,CAAC,IAAL,EAAW;;AAEX,SAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,UAAhC,EAA8C,IAAD,IAAiD,KAAK,cAAL,CAAoB,IAApB,CAA9F;;AACA,SAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,IAAhC,EAAuC,MAAM,KAAK,sBAAL,CAA4B,eAAA,CAAA,aAAA,CAAc,OAA1C,CAA7C;;AACA,SAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,KAAhC,EAAuC,MAAM,KAAK,sBAAL,CAA4B,eAAA,CAAA,aAAA,CAAc,MAA1C,CAA7C;;AACA,SAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,KAAhC,EAAuC,MAAM,KAAK,sBAAL,CAA4B,eAAA,CAAA,aAAA,CAAc,KAA1C,CAA7C;;AACA,SAAK,OAAL,CAAa,EAAb,CAAgB,QAAQ,CAAC,MAAT,CAAgB,KAAhC,EAAuC,MAAM,KAAK,sBAAL,CAA4B,eAAA,CAAA,aAAA,CAAc,KAA1C,CAA7C;;AAEA,SAAK,mBAAL;;AAEA,SAAK,OAAL,CAAa,IAAb;AACD;;AAEa,EAAA,OAAO,CAAC,IAAD,EAAyB;;AAC5C,UAAI;AACF,aAAK,SAAL,CAAe,gBAAgB,CAAC,MAAhC;;AACA,YAAI,MAAM,GAAG,MAAM,KAAK,OAAL,CAAa,KAAb,CAAmB,IAAnB,CAAnB;;AACA,YAAI,MAAM,IAAI,IAAd,EAAoB;AAClB,eAAK,SAAL,CAAe,gBAAgB,CAAC,QAAhC;AACD,SAFD,MAEO;AACL,eAAK,SAAL,CAAe,QAAf,CAAwB,MAAxB;;AACA,eAAK,SAAL,CAAe,gBAAgB,CAAC,UAAhC;AACD;AACF,OATD,CASE,OAAO,KAAP,EAAc;AACd,YAAI,KAAK,CAAC,gBAAV,EAA4B;AAC1B,UAAA,OAAO,CAAC,KAAR,CAAc,KAAK,CAAC,OAApB,EAA6B,KAAK,CAAC,gBAAnC;AACD,SAFD,MAEO;AACL,UAAA,OAAO,CAAC,KAAR,CAAc,KAAK,CAAC,OAApB;AACD;;AACD,aAAK,MAAL,GAAc,KAAK,CAAC,OAApB;;AACA,aAAK,SAAL,CAAe,gBAAgB,CAAC,KAAhC;AACD;AACF;AAAA;;AAEO,EAAA,cAAc,CAAC,IAAD,EAA4C;AAChE,SAAK,YAAL,GAAoB,IAAI,CAAC,OAAzB;AACA,SAAK,SAAL,GAAiB,IAAI,CAAC,QAAtB;;AACA,SAAK,SAAL,CAAe,eAAf,CAA+B,IAAI,CAAC,OAApC,EAA6C,IAAI,CAAC,QAAlD;AACD;;AAEO,EAAA,sBAAsB,CAAC,KAAD,EAAqB;AACjD,SAAK,SAAL,CAAe,gBAAf,CAAgC,KAAhC,EAAuC,KAAK,YAAL,EAAvC;AACD;;AAEO,EAAA,YAAY,GAAA;AAClB,QAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,MAAA,OAAO,CAAC,IAAR,CAAa,qCAAqC,KAAK,SAAS,GAAhE;AACA,aAAO,CAAP;AACD,KAHD,MAGO,IAAI,KAAK,SAAL,KAAmB,SAAvB,EAAkC;AACvC,MAAA,OAAO,CAAC,IAAR,CAAa,sCAAb;AACA,aAAO,CAAP;AACD;;AAED,WAAO,KAAK,YAAL,GAAoB,KAAK,SAAzB,GAAqC,GAA5C;AACD;;AAEO,EAAA,iBAAiB,GAAA;AACvB,QAAI,SAAS,GAAG,IAAI,IAAJ,4BAAhB;AACA,WAAO;AACL,MAAA,QAAQ,EAAE,KAAK,YAAL,EADL;AAEL,MAAA,WAAW,SAFN;AAGL,MAAA,QAAQ,EAAE,GAAG,SAAS,CAAC,WAAV,EAAuB,IAAI,SAAS,CAAC,QAAV,KAAuB,CAAC,IAAI,SAAS,CAAC,OAAV,EAAmB;AAHlF,KAAP;AAKD;;AAEO,EAAA,gBAAgB,GAAA;AACtB,UAAM,IAAI,GAAG,KAAK,iBAAL,EAAb;;AAEA,UAAM,MAAM,GAAG,KAAK,QAAL,CAAc,gBAAd,EAAf;;AACA,QAAI,CAAC,MAAL,EAAa;AACX,MAAA,OAAO,CAAC,KAAR,CAAc,8CAAd;AACA,aAAO,IAAP;AACD;;AAED,WAAO,MAAM,CAAC,MAAP,CAAc,IAAd,EAAoB,MAApB,CAAP;AACD;;AAEO,EAAA,uBAAuB,CAAC,eAAD,EAAyB;AACtD,QAAI,CAAC,eAAL,EAAsB;AACpB,WAAK,IAAL,CAAU,yBAAV,CAAoC,MAAM,CAAC,QAAP,CAAgB,IAApD;AACD;AACF;;AAEO,EAAA,wBAAwB,CAAC,KAAD,EAA0B;AACxD,QAAI,KAAK,MAAL,IAAe,gBAAgB,CAAC,UAApC,EAAgD;AAC9C,WAAK,cAAL,CAAoB,QAApB,CAA6B,KAAK,KAAlC;AACD;AACF;;AAEO,EAAA,YAAY,CAAC,MAAD,EAA4B;AAC9C,QAAI,GAAG,GAA0B,SAAjC;;AACA,QAAI,MAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,KAAP,CAAa,GAAjC,EAAsC;AACpC,MAAA,GAAG,GAAG,MAAM,CAAC,KAAP,CAAa,GAAnB;AACD,KAFD,MAEO,IAAI,MAAM,CAAC,OAAP,IAAkB,MAAM,CAAC,OAAP,CAAe,GAArC,EAA0C;AAC/C,MAAA,GAAG,GAAG,MAAM,CAAC,OAAP,CAAe,GAArB;AACD;;AAED,QAAI,CAAC,GAAD,IAAQ,CAAC,GAAG,CAAC,KAAjB,EAAwB;AACtB,MAAA,OAAO,CAAC,KAAR,CAAc,kDAAd,EAAkE,MAAlE;AACA;AACD;;AAED,SAAK,QAAL,CAAc,GAAd,CAAkB,GAAG,CAAC,KAAtB,EAA6B;AAC3B,MAAA,EAAE,EAAE,MAAM,CAAC,EADgB;AAE3B,MAAA,UAAU,EAAE,IAAI,IAAJ,GAAW,WAAX,EAFe;AAG3B,MAAA,MAAM,EAAE,UAHmB;AAI3B,MAAA,IAAI,EAAG,MAAM,CAAC,KAAP,GAAe,OAAf,GAAyB,SAJL;AAK3B,MAAA,KAAK,EAAE,MAAM,CAAC,KALa;AAM3B,MAAA,IAAI,EAAE,MAAM,CAAC,IANc;AAO3B,MAAA,OAAO,EAAE,MAAM,CAAC;AAPW,KAA7B;AASD;;AAEO,EAAA,mBAAmB,GAAA;AACzB,QAAI,MAAM,GAAG,KAAK,QAAL,CAAc,sBAAd,EAAb;;AACA,QAAI,CAAC,MAAL,EAAa;AACX,MAAA,OAAO,CAAC,KAAR,CAAc,gEAAd;AACA;AACD;;AAED,UAAM,KAAK,GAAG,OAAA,CAAA,OAAA,CAAY;AACxB,MAAA,SAAS,EAAE;AADa,KAAZ,CAAd;AAIA,IAAA,WAAA,CAAA,MAAA,CACE,MAAA,CAAA,GAAA,CAAC,MAAA,CAAA,aAAD,EAAc;AAAC,MAAA,KAAK,EAAG;AAAT,KAAd,EACE,MAAA,CAAA,GAAA,CAAC,eAAA,CAAA,OAAD,EAAc;AAAC,MAAA,GAAG,EAAG,KAAK;AAAZ,KAAd,CADF,CADF,EAIE,MAJF;AAMD;;AAEO,EAAA,mBAAmB,GAAA;AACzB,IAAA,OAAO,CAAC,GAAR,CAAY,kCAAZ;;AACA,QAAI,SAAS,GAAG,KAAK,QAAL,CAAc,qBAAd,EAAhB;;AACA,QAAI,CAAC,SAAL,EAAgB;AACd,MAAA,OAAO,CAAC,KAAR,CAAc,kEAAd;AACA;AACD;;AAED,UAAM,KAAK,GAAG,OAAA,CAAA,OAAA,CAAY;AACxB,MAAA,SAAS,EAAE;AADa,KAAZ,CAAd;AAIA,IAAA,WAAA,CAAA,MAAA,CACE,MAAA,CAAA,GAAA,CAAC,MAAA,CAAA,aAAD,EAAc;AAAC,MAAA,KAAK,EAAG;AAAT,KAAd,EACE,MAAA,CAAA,GAAA,CAAC,OAAA,CAAA,aAAA,CAAc,QAAf,EAAuB;AAAC,MAAA,KAAK,EAAG;AAAT,KAAvB,EACE,MAAA,CAAA,GAAA,CAAC,cAAA,CAAA,OAAD,EAAa;AAAC,MAAA,MAAM,EAAG;AAAV,KAAb,CADF,CADF,CADF,EAMG,SANH;AAOD;;AA5S6B;;AAAhC,OAAA,CAAA,OAAA,GAAA,WAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCA,MAAA,QAAA,GAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AAEA,MAAM,YAAY,GAAG,mBAArB;AACA,MAAM,WAAW,GAAG,cAApB;AAEA,MAAM,YAAY,GAAG,CACnB,SADmB,EAEnB,eAFmB,EAGnB,eAHmB,EAInB,kBAJmB,EAKnB,qBALmB,EAMnB,YANmB,EAOnB,YAPmB,CAArB;;AAUA,MAAqB,WAArB,CAAgC;AACxB,EAAA,UAAU,GAAA;;AACd,YAAM,MAAM,GAAG,QAAQ,CAAC,cAAT,CAAwB,cAAxB,CAAf;AACA,UAAI,CAAC,MAAL,EAAa,MAAM,IAAI,KAAJ,CAAU,kBAAV,CAAN;AACb,aAAO,IAAI,QAAQ,CAAC,MAAb,CAAoB,MAApB,CAAP;AACD;AAAA;;AAED,EAAA,sBAAsB,GAAA;AACpB,UAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,eAAvB,CAAf;AACA,QAAI,CAAC,MAAL,EAAa,OAAO,IAAP;AAEb,UAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,IAAA,SAAS,CAAC,SAAV,GAAsB,eAAtB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,SAAnB;AAEA,UAAM,MAAM,GAAG,SAAS,CAAC,YAAV,CAAuB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAvB,CAAf;AACA,UAAM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAxB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,eAAnB;AAEA,WAAO,eAAP;AACD;;AAED,EAAA,qBAAqB,GAAA;AACnB,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,oBAAvB,CAAhB;AACA,QAAI,CAAC,OAAL,EAAc,OAAO,IAAP;AAEd,UAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,IAAA,SAAS,CAAC,SAAV,GAAsB,OAAtB;AACA,IAAA,OAAO,CAAC,WAAR,CAAoB,SAApB;AAEA,UAAM,MAAM,GAAG,SAAS,CAAC,YAAV,CAAuB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAvB,CAAf;AACA,UAAM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAxB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,eAAnB;AAEA,WAAO,eAAP;AACD;;AAED,EAAA,gBAAgB,GAAA;AACd,UAAM,IAAI,GAAgC,EAA1C;AACA,UAAM,YAAY,GAAG,QAAQ,CAAC,aAAT,CAAuB,8BAAvB,CAArB;;AACA,QAAI,CAAC,YAAD,IAAiB,CAAC,YAAY,CAAC,WAA/B,IAA8C,YAAY,CAAC,WAAb,CAAyB,MAAzB,IAAmC,CAArF,EAAwF;AACtF,MAAA,OAAO,CAAC,KAAR,CAAc,yCAAd;AACA,aAAO,IAAP;AACD;;AACD,QAAI,SAAS,GAAG,YAAY,CAAC,WAAb,CAAyB,IAAzB,EAAhB;AAEA,QAAI,YAAY,GAAuB,SAAvC;AACA,UAAM,mBAAmB,GAAG,QAAQ,CAAC,aAAT,CAAuB,uBAAvB,CAA5B;;AACA,QAAI,mBAAmB,IAAI,mBAAmB,CAAC,WAA/C,EAA4D;AAC1D,MAAA,YAAY,GAAG,mBAAmB,CAAC,WAApB,CAAgC,IAAhC,EAAf;;AACA,UAAI,YAAJ,EAAkB;AAChB,YAAI,YAAY,CAAC,UAAb,CAAwB,GAAxB,CAAJ,EAAkC;AAChC,UAAA,YAAY,GAAG,YAAY,CAAC,SAAb,CAAuB,CAAvB,CAAf;AACD;;AACD,YAAI,YAAY,CAAC,QAAb,CAAsB,GAAtB,CAAJ,EAAgC;AAC9B,UAAA,YAAY,GAAG,YAAY,CAAC,SAAb,CAAuB,CAAvB,EAA0B,YAAY,CAAC,MAAb,GAAsB,CAAhD,CAAf;AACD;AACF;AACF;;AAED,QAAI,YAAY,GAAG,CAAnB;AACA,QAAI,aAAa,GAAG,CAApB;AACA,UAAM,cAAc,GAAG,QAAQ,CAAC,aAAT,CAAuB,wCAAvB,CAAvB;;AACA,QAAI,cAAc,IAAI,cAAc,CAAC,WAAjC,IAAgD,cAAc,CAAC,WAAf,CAA2B,MAA3B,GAAoC,CAAxF,EAA2F;AACzF,YAAM,WAAW,GAAG,WAAW,CAAC,IAAZ,CAAiB,cAAc,CAAC,WAAhC,CAApB;;AACA,UAAI,WAAJ,EAAiB;AACf,QAAA,YAAY,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAD,CAAZ,CAAvB;AACD;;AAED,YAAM,YAAY,GAAG,YAAY,CAAC,IAAb,CAAkB,cAAc,CAAC,WAAjC,CAArB;;AACA,UAAI,YAAJ,EAAkB;AAChB,QAAA,aAAa,GAAG,UAAU,CAAC,YAAY,CAAC,CAAD,CAAb,CAA1B;AACD;AACF;;AAED,QAAI,YAAY,IAAI,YAAY,CAAC,IAAb,CAAkB,CAAC,IAAI,CAAC,CAAC,IAAF,CAAO,YAAP,CAAvB,CAApB,EAAmE;AACjE,MAAA,IAAI,CAAC,KAAL,GAAa;AACX,QAAA,KAAK,EAAE;AADI,OAAb;AAGD,KAJD,MAIO;AACL,MAAA,IAAI,CAAC,IAAL,GAAY;AACV,QAAA,KAAK,EAAE;AADG,OAAZ;AAGA,MAAA,IAAI,CAAC,OAAL,GAAe;AACb,QAAA,MAAM,EAAE,YADK;AAEb,QAAA,MAAM,EAAE,aAFK;AAGb,QAAA,KAAK,EAAE;AAHM,OAAf;AAKD;;AACD,WAAO,IAAP;AACD;;AA1F6B;;AAAhC,OAAA,CAAA,OAAA,GAAA,WAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfA,MAAA,QAAA,GAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AAcA,MAAqB,UAArB,CAA+B;AAA/B,EAAA,WAAA,GAAA;AAQE,SAAA,QAAA,GAAgC,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAhC;AAwFD;;AA/FC,SAAO,mBAAP,CAA2B,OAA3B,EAA2C;AACzC,IAAA,OAAO,CAAC,oBAAD,EAAuB,EAAvB,EAA2B,YAAA;AAChC,YAAM,OAAO,GAAG,IAAI,QAAQ,CAAC,cAAb,CAA4B,IAA5B,CAAhB;AACA,MAAA,OAAO,CAAC,KAAR;AACD,KAHM,CAAP;AAID;;AAID,EAAA,SAAS,CAAC,KAAD,EAAe;AACtB,QAAI,CAAC,KAAL,EAAY,OAAO,KAAP;AACZ,SAAK,QAAL,CAAc,SAAd,GAA0B,KAA1B;AACA,WAAO,KAAK,QAAL,CAAc,KAArB;AACD;;AAEK,EAAA,UAAU,GAAA;;AACd,YAAM,MAAM,GAAG,QAAQ,CAAC,cAAT,CAAwB,QAAxB,CAAf;AACA,UAAI,CAAC,MAAL,EAAa,MAAM,IAAI,KAAJ,CAAU,kBAAV,CAAN;AACb,aAAO,IAAI,QAAQ,CAAC,MAAb,CAAoB,MAApB,CAAP;AACD;AAAA;;AAED,EAAA,sBAAsB,GAAA;AACpB,UAAM,MAAM,GAAG,QAAQ,CAAC,aAAT,CAAuB,yEAAvB,CAAf;AACA,QAAI,CAAC,MAAL,EAAa,OAAO,IAAP;AAEb,UAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,IAAA,SAAS,CAAC,KAAV,CAAgB,KAAhB,GAAwB,OAAxB;AACA,IAAA,SAAS,CAAC,KAAV,CAAgB,KAAhB,GAAwB,MAAxB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,SAAnB;AAEA,UAAM,MAAM,GAAG,SAAS,CAAC,YAAV,CAAuB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAvB,CAAf;AACA,UAAM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAxB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,eAAnB;AAEA,WAAO,eAAP;AACD;;AAED,EAAA,qBAAqB,GAAA;AACnB,UAAM,OAAO,GAAG,QAAQ,CAAC,aAAT,CAAuB,oEAAvB,CAAhB;AACA,QAAI,CAAC,OAAL,EAAc,OAAO,IAAP;AAEd,UAAM,SAAS,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAlB;AACA,IAAA,SAAS,CAAC,KAAV,CAAgB,KAAhB,GAAwB,OAAxB;AACA,IAAA,SAAS,CAAC,KAAV,CAAgB,MAAhB,GAAyB,QAAzB;AACA,IAAA,OAAO,CAAC,WAAR,CAAoB,SAApB;AAEA,UAAM,MAAM,GAAG,SAAS,CAAC,YAAV,CAAuB;AAAE,MAAA,IAAI,EAAE;AAAR,KAAvB,CAAf;AACA,UAAM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAxB;AACA,IAAA,MAAM,CAAC,WAAP,CAAmB,eAAnB;AAEA,WAAO,eAAP;AACD;;AAED,EAAA,gBAAgB,GAAA;AACd,UAAM,IAAI,GAAgC,EAA1C;AAEA,QAAI,SAAS,GAAI,MAAc,CAAC,YAAD,CAA/B;AACA,QAAI,QAAQ,GAAI,MAAc,CAAC,uBAAD,CAA9B;;AACA,QAAI,CAAC,SAAD,IAAc,CAAC,QAAnB,EAA6B;AAC3B,aAAO,IAAP;AACD;;AAED,QAAI,IAAI,GAAG,SAAX;;AACA,QAAI,QAAQ,CAAC,SAAb,EAAwB;AACtB,UAAI,KAAK,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAyB,GAAzB,CAAZ;;AACA,UAAI,KAAK,CAAC,MAAN,IAAgB,CAApB,EAAuB;AACrB,QAAA,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAD,CAAN,CAAf;AACD;AACF;;AAED,QAAI,QAAQ,CAAC,SAAT,IAAsB,OAA1B,EAAmC;AACjC,UAAI,CAAC,SAAS,CAAC,KAAf,EAAsB,OAAO,IAAP;AACtB,MAAA,IAAI,CAAC,KAAL,GAAa;AACX,QAAA,KAAK,EAAE,QAAQ,CAAC,QADL;AAEX,QAAA,IAAI,EAAE;AAFK,OAAb;AAKD,KAPD,MAOO,IAAI,QAAQ,CAAC,SAAT,IAAsB,SAA1B,EAAqC;AAC1C,UAAI,CAAC,QAAQ,CAAC,QAAV,IAAsB,CAAC,SAAS,CAAC,SAAjC,IAA8C,CAAC,SAAS,CAAC,UAA7D,EAAyE,OAAO,IAAP;AACzE,MAAA,IAAI,CAAC,IAAL,GAAY;AACV,QAAA,KAAK,EAAE,KAAK,SAAL,CAAe,QAAQ,CAAC,QAAxB,CADG;AAEV,QAAA,IAAI,EAAE;AAFI,OAAZ;AAIA,MAAA,IAAI,CAAC,OAAL,GAAe;AACb,QAAA,MAAM,EAAE,SAAS,CAAC,SADL;AAEb,QAAA,MAAM,EAAE,SAAS,CAAC,UAFL;AAGb,QAAA,KAAK,EAAE,KAAK,SAAL,CAAe,SAAS,CAAC,KAAzB;AAHM,OAAf;AAMD,KAZM,MAYA;AACL,aAAO,IAAP;AACD;;AAED,WAAO,IAAP;AACD;;AA/F4B;;AAA/B,OAAA,CAAA,OAAA,GAAA,UAAA;;;;;;;;;;;;;;ACjBA,MAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AACA,MAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AAEA,MAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,wBAAA,CAAA,CAAA;;AACA,MAAA,YAAA,GAAA,eAAA,CAAA,OAAA,CAAA,uBAAA,CAAA,CAAA;;AAEA,MAAM,OAAO,GAAwB;AACnC,EAAA,SAAS,EAAE,kEADwB;AAEnC,EAAA,aAAa,EAAE,kEAFoB;AAGnC,EAAA,OAAO,EAAE,IAAI,UAAA,CAAA,0BAAJ,EAH0B;AAInC,EAAA,YAAY,EAAE,EAJqB;AAKnC,EAAA,OAAO,EAAE;AAL0B,CAArC;AAQA,MAAM,MAAM,GAAG,MAAM,CAAC,QAAP,CAAgB,MAA/B;;AACA,IAAI,MAAM,IAAI,6BAAd,EAA6C;AAC3C,EAAA,OAAO,CAAC,YAAR,GAAuB,6BAAvB;AACA,EAAA,OAAO,CAAC,OAAR,GAAkB,IAAI,aAAA,CAAA,OAAJ,EAAlB;AAED,CAJD,MAIO,IAAI,MAAM,IAAI,4BAAd,EAA4C;AACjD,MAAI,MAAM,CAAC,OAAX,EAAoB;AAClB,IAAA,YAAA,CAAA,OAAA,CAAW,mBAAX,CAA+B,MAAM,CAAC,OAAtC;AACD,GAFD,MAEO;AACL,IAAA,OAAO,CAAC,YAAR,GAAuB,4BAAvB;AACA,IAAA,OAAO,CAAC,OAAR,GAAkB,IAAI,YAAA,CAAA,OAAJ,EAAlB;AACD;AACF;;AAED,IAAI,OAAO,CAAC,OAAZ,EAAqB;AACnB,MAAI,aAAA,CAAA,OAAJ,CAAgB,OAAhB;AACD","file":"TraktRoller.user.js","sourceRoot":"../source","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Allows the user to interact with the event.\r\n *\r\n * @class EventManagement\r\n * @implements {IEventManagement}\r\n */\r\nvar EventManagement = /** @class */ (function () {\r\n    function EventManagement(unsub) {\r\n        this.unsub = unsub;\r\n        this.propagationStopped = false;\r\n    }\r\n    EventManagement.prototype.stopPropagation = function () {\r\n        this.propagationStopped = true;\r\n    };\r\n    return EventManagement;\r\n}());\r\nexports.EventManagement = EventManagement;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Stores a handler. Manages execution meta data.\r\n * @class Subscription\r\n * @template TEventHandler\r\n */\r\nvar Subscription = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of Subscription.\r\n     *\r\n     * @param {TEventHandler} handler The handler for the subscription.\r\n     * @param {boolean} isOnce Indicates if the handler should only be executed once.\r\n     */\r\n    function Subscription(handler, isOnce) {\r\n        this.handler = handler;\r\n        this.isOnce = isOnce;\r\n        /**\r\n         * Indicates if the subscription has been executed before.\r\n         */\r\n        this.isExecuted = false;\r\n    }\r\n    /**\r\n     * Executes the handler.\r\n     *\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} scope The scope the scope of the event.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    Subscription.prototype.execute = function (executeAsync, scope, args) {\r\n        if (!this.isOnce || !this.isExecuted) {\r\n            this.isExecuted = true;\r\n            var fn = this.handler;\r\n            if (executeAsync) {\r\n                setTimeout(function () {\r\n                    fn.apply(scope, args);\r\n                }, 1);\r\n            }\r\n            else {\r\n                fn.apply(scope, args);\r\n            }\r\n        }\r\n    };\r\n    return Subscription;\r\n}());\r\nexports.Subscription = Subscription;\r\n","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar management_1 = require(\"./management\");\r\nvar subscription_1 = require(\"./subscription\");\r\n/**\r\n * Base class for implementation of the dispatcher. It facilitates the subscribe\r\n * and unsubscribe methods based on generic handlers. The TEventType specifies\r\n * the type of event that should be exposed. Use the asEvent to expose the\r\n * dispatcher as event.\r\n */\r\nvar DispatcherBase = /** @class */ (function () {\r\n    function DispatcherBase() {\r\n        this._wrap = new DispatcherWrapper(this);\r\n        this._subscriptions = new Array();\r\n    }\r\n    Object.defineProperty(DispatcherBase.prototype, \"count\", {\r\n        /**\r\n         * Returns the number of subscriptions.\r\n         *\r\n         * @readonly\r\n         *\r\n         * @memberOf DispatcherBase\r\n         */\r\n        get: function () {\r\n            return this._subscriptions.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.subscribe = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, false));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherBase.prototype.one = function (fn) {\r\n        var _this = this;\r\n        if (fn) {\r\n            this._subscriptions.push(new subscription_1.Subscription(fn, true));\r\n        }\r\n        return function () {\r\n            _this.unsubscribe(fn);\r\n        };\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.has = function (fn) {\r\n        if (!fn)\r\n            return false;\r\n        return this._subscriptions.some(function (sub) { return sub.handler == fn; });\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsubscribe = function (fn) {\r\n        if (!fn)\r\n            return;\r\n        for (var i = 0; i < this._subscriptions.length; i++) {\r\n            if (this._subscriptions[i].handler == fn) {\r\n                this._subscriptions.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribes the handler from the dispatcher.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherBase.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Generic dispatch will dispatch the handlers with the given arguments.\r\n     *\r\n     * @protected\r\n     * @param {boolean} executeAsync True if the even should be executed async.\r\n     * @param {*} The scope the scope of the event. The scope becomes the \"this\" for handler.\r\n     * @param {IArguments} args The arguments for the event.\r\n     */\r\n    DispatcherBase.prototype._dispatch = function (executeAsync, scope, args) {\r\n        var _this = this;\r\n        var _loop_1 = function (sub) {\r\n            var ev = new management_1.EventManagement(function () { return _this.unsub(sub.handler); });\r\n            var nargs = Array.prototype.slice.call(args);\r\n            nargs.push(ev);\r\n            sub.execute(executeAsync, scope, nargs);\r\n            //cleanup subs that are no longer needed\r\n            this_1.cleanup(sub);\r\n            if (!executeAsync && ev.propagationStopped) {\r\n                return \"break\";\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        //execute on a copy because of bug #9\r\n        for (var _i = 0, _a = __spreadArrays(this._subscriptions); _i < _a.length; _i++) {\r\n            var sub = _a[_i];\r\n            var state_1 = _loop_1(sub);\r\n            if (state_1 === \"break\")\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Cleans up subs that ran and should run only once.\r\n     */\r\n    DispatcherBase.prototype.cleanup = function (sub) {\r\n        if (sub.isOnce && sub.isExecuted) {\r\n            var i = this._subscriptions.indexOf(sub);\r\n            if (i > -1) {\r\n                this._subscriptions.splice(i, 1);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    DispatcherBase.prototype.asEvent = function () {\r\n        return this._wrap;\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherBase.prototype.clear = function () {\r\n        this._subscriptions.splice(0, this._subscriptions.length);\r\n    };\r\n    return DispatcherBase;\r\n}());\r\nexports.DispatcherBase = DispatcherBase;\r\n/**\r\n * Base class for event lists classes. Implements the get and remove.\r\n */\r\nvar EventListBase = /** @class */ (function () {\r\n    function EventListBase() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.get = function (name) {\r\n        var event = this._events[name];\r\n        if (event) {\r\n            return event;\r\n        }\r\n        event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    EventListBase.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    return EventListBase;\r\n}());\r\nexports.EventListBase = EventListBase;\r\n/**\r\n * Hides the implementation of the event dispatcher. Will expose methods that\r\n * are relevent to the event.\r\n */\r\nvar DispatcherWrapper = /** @class */ (function () {\r\n    /**\r\n     * Creates a new EventDispatcherWrapper instance.\r\n     * @param dispatcher The dispatcher.\r\n     */\r\n    function DispatcherWrapper(dispatcher) {\r\n        this._subscribe = function (fn) { return dispatcher.subscribe(fn); };\r\n        this._unsubscribe = function (fn) { return dispatcher.unsubscribe(fn); };\r\n        this._one = function (fn) { return dispatcher.one(fn); };\r\n        this._has = function (fn) { return dispatcher.has(fn); };\r\n        this._clear = function () { return dispatcher.clear(); };\r\n        this._count = function () { return dispatcher.count; };\r\n    }\r\n    Object.defineProperty(DispatcherWrapper.prototype, \"count\", {\r\n        /**\r\n         * Returns the number of subscriptions.\r\n         *\r\n         * @readonly\r\n         * @type {number}\r\n         * @memberOf DispatcherWrapper\r\n         */\r\n        get: function () {\r\n            return this._count();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.subscribe = function (fn) {\r\n        return this._subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe to the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     * @returns A function that unsubscribes the event handler from the event.\r\n     */\r\n    DispatcherWrapper.prototype.sub = function (fn) {\r\n        return this.subscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsubscribe = function (fn) {\r\n        this._unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribe from the event dispatcher.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.unsub = function (fn) {\r\n        this.unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribe once to the event with the specified name.\r\n     * @param fn The event handler that is called when the event is dispatched.\r\n     */\r\n    DispatcherWrapper.prototype.one = function (fn) {\r\n        return this._one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param fn The event handler.\r\n     */\r\n    DispatcherWrapper.prototype.has = function (fn) {\r\n        return this._has(fn);\r\n    };\r\n    /**\r\n     * Clears all the subscriptions.\r\n     */\r\n    DispatcherWrapper.prototype.clear = function () {\r\n        this._clear();\r\n    };\r\n    return DispatcherWrapper;\r\n}());\r\nexports.DispatcherWrapper = DispatcherWrapper;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript - Core\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dispatching_1 = require(\"./dispatching\");\r\nexports.DispatcherBase = dispatching_1.DispatcherBase;\r\nexports.DispatcherWrapper = dispatching_1.DispatcherWrapper;\r\nexports.EventListBase = dispatching_1.EventListBase;\r\nvar subscription_1 = require(\"./subscription\");\r\nexports.Subscription = subscription_1.Subscription;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * Dispatcher implementation for events. Can be used to subscribe, unsubscribe\r\n * or dispatch events. Use the ToEvent() method to expose the event.\r\n */\r\nvar EventDispatcher = /** @class */ (function (_super) {\r\n    __extends(EventDispatcher, _super);\r\n    /**\r\n     * Creates a new EventDispatcher instance.\r\n     */\r\n    function EventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatch = function (sender, args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param sender The sender.\r\n     * @param args The arguments object.\r\n     */\r\n    EventDispatcher.prototype.dispatchAsync = function (sender, args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    EventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return EventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.EventDispatcher = EventDispatcher;\r\n/**\r\n * Similar to EventList, but instead of TArgs, a map of event names ang argument types is provided with TArgsMap.\r\n */\r\nvar NonUniformEventList = /** @class */ (function () {\r\n    function NonUniformEventList() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformEventList.prototype.get = function (name) {\r\n        if (this._events[name]) {\r\n            // @TODO avoid typecasting. Not sure why TS thinks this._events[name] could still be undefined.\r\n            return this._events[name];\r\n        }\r\n        var event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformEventList.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    NonUniformEventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return NonUniformEventList;\r\n}());\r\nexports.NonUniformEventList = NonUniformEventList;\r\n/**\r\n * Storage class for multiple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar EventList = /** @class */ (function (_super) {\r\n    __extends(EventList, _super);\r\n    /**\r\n     * Creates a new EventList instance.\r\n     */\r\n    function EventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    EventList.prototype.createDispatcher = function () {\r\n        return new EventDispatcher();\r\n    };\r\n    return EventList;\r\n}(ste_core_1.EventListBase));\r\nexports.EventList = EventList;\r\n/**\r\n * Extends objects with event handling capabilities.\r\n */\r\nvar EventHandlingBase = /** @class */ (function () {\r\n    function EventHandlingBase() {\r\n        this._events = new EventList();\r\n    }\r\n    Object.defineProperty(EventHandlingBase.prototype, \"events\", {\r\n        /**\r\n         * Gets the list with all the event dispatchers.\r\n         */\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Subscribes to once the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    EventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    return EventHandlingBase;\r\n}());\r\nexports.EventHandlingBase = EventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nexports.EventDispatcher = events_1.EventDispatcher;\r\nexports.EventHandlingBase = events_1.EventHandlingBase;\r\nexports.EventList = events_1.EventList;\r\nexports.NonUniformEventList = events_1.NonUniformEventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a simple event\r\n */\r\nvar SimpleEventDispatcher = /** @class */ (function (_super) {\r\n    __extends(SimpleEventDispatcher, _super);\r\n    /**\r\n     * Creates a new SimpleEventDispatcher instance.\r\n     */\r\n    function SimpleEventDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the event.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatch = function (args) {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the events thread.\r\n     * @param args The arguments object.\r\n     */\r\n    SimpleEventDispatcher.prototype.dispatchAsync = function (args) {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SimpleEventDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SimpleEventDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SimpleEventDispatcher = SimpleEventDispatcher;\r\n/**\r\n * Similar to EventList, but instead of TArgs, a map of event names ang argument types is provided with TArgsMap.\r\n */\r\nvar NonUniformSimpleEventList = /** @class */ (function () {\r\n    function NonUniformSimpleEventList() {\r\n        this._events = {};\r\n    }\r\n    /**\r\n     * Gets the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformSimpleEventList.prototype.get = function (name) {\r\n        if (this._events[name]) {\r\n            // @TODO avoid typecasting. Not sure why TS thinks this._events[name] could still be undefined.\r\n            return this._events[name];\r\n        }\r\n        var event = this.createDispatcher();\r\n        this._events[name] = event;\r\n        return event;\r\n    };\r\n    /**\r\n     * Removes the dispatcher associated with the name.\r\n     * @param name The name of the event.\r\n     */\r\n    NonUniformSimpleEventList.prototype.remove = function (name) {\r\n        delete this._events[name];\r\n    };\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    NonUniformSimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return NonUniformSimpleEventList;\r\n}());\r\nexports.NonUniformSimpleEventList = NonUniformSimpleEventList;\r\n/**\r\n * Storage class for multiple simple events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SimpleEventList = /** @class */ (function (_super) {\r\n    __extends(SimpleEventList, _super);\r\n    /**\r\n     * Creates a new SimpleEventList instance.\r\n     */\r\n    function SimpleEventList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SimpleEventList.prototype.createDispatcher = function () {\r\n        return new SimpleEventDispatcher();\r\n    };\r\n    return SimpleEventList;\r\n}(ste_core_1.EventListBase));\r\nexports.SimpleEventList = SimpleEventList;\r\n/**\r\n * Extends objects with simple event handling capabilities.\r\n */\r\nvar SimpleEventHandlingBase = /** @class */ (function () {\r\n    function SimpleEventHandlingBase() {\r\n        this._events = new SimpleEventList();\r\n    }\r\n    Object.defineProperty(SimpleEventHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SimpleEventHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SimpleEventHandlingBase;\r\n}());\r\nexports.SimpleEventHandlingBase = SimpleEventHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar simple_events_1 = require(\"./simple-events\");\r\nexports.SimpleEventDispatcher = simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = simple_events_1.SimpleEventList;\r\nexports.NonUniformSimpleEventList = simple_events_1.NonUniformSimpleEventList;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\n/**\r\n * The dispatcher handles the storage of subsciptions and facilitates\r\n * subscription, unsubscription and dispatching of a signal event.\r\n */\r\nvar SignalDispatcher = /** @class */ (function (_super) {\r\n    __extends(SignalDispatcher, _super);\r\n    /**\r\n     * Creates a new SignalDispatcher instance.\r\n     */\r\n    function SignalDispatcher() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Dispatches the signal.\r\n     */\r\n    SignalDispatcher.prototype.dispatch = function () {\r\n        this._dispatch(false, this, arguments);\r\n    };\r\n    /**\r\n     * Dispatches the signal threaded.\r\n     */\r\n    SignalDispatcher.prototype.dispatchAsync = function () {\r\n        this._dispatch(true, this, arguments);\r\n    };\r\n    /**\r\n     * Creates an event from the dispatcher. Will return the dispatcher\r\n     * in a wrapper. This will prevent exposure of any dispatcher methods.\r\n     */\r\n    SignalDispatcher.prototype.asEvent = function () {\r\n        return _super.prototype.asEvent.call(this);\r\n    };\r\n    return SignalDispatcher;\r\n}(ste_core_1.DispatcherBase));\r\nexports.SignalDispatcher = SignalDispatcher;\r\n/**\r\n * Storage class for multiple signal events that are accessible by name.\r\n * Events dispatchers are automatically created.\r\n */\r\nvar SignalList = /** @class */ (function (_super) {\r\n    __extends(SignalList, _super);\r\n    /**\r\n     * Creates a new SignalList instance.\r\n     */\r\n    function SignalList() {\r\n        return _super.call(this) || this;\r\n    }\r\n    /**\r\n     * Creates a new dispatcher instance.\r\n     */\r\n    SignalList.prototype.createDispatcher = function () {\r\n        return new SignalDispatcher();\r\n    };\r\n    return SignalList;\r\n}(ste_core_1.EventListBase));\r\nexports.SignalList = SignalList;\r\n/**\r\n * Extends objects with signal event handling capabilities.\r\n */\r\nvar SignalHandlingBase = /** @class */ (function () {\r\n    function SignalHandlingBase() {\r\n        this._events = new SignalList();\r\n    }\r\n    Object.defineProperty(SignalHandlingBase.prototype, \"events\", {\r\n        get: function () {\r\n            return this._events;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Subscribes once to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.one = function (name, fn) {\r\n        this._events.get(name).one(fn);\r\n    };\r\n    /**\r\n     * Checks it the event has a subscription for the specified handler.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.has = function (name, fn) {\r\n        return this._events.get(name).has(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.subscribe = function (name, fn) {\r\n        this._events.get(name).subscribe(fn);\r\n    };\r\n    /**\r\n     * Subscribes to the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.sub = function (name, fn) {\r\n        this.subscribe(name, fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsubscribe = function (name, fn) {\r\n        this._events.get(name).unsubscribe(fn);\r\n    };\r\n    /**\r\n     * Unsubscribes from the event with the specified name.\r\n     * @param name The name of the event.\r\n     * @param fn The event handler.\r\n     */\r\n    SignalHandlingBase.prototype.unsub = function (name, fn) {\r\n        this.unsubscribe(name, fn);\r\n    };\r\n    return SignalHandlingBase;\r\n}());\r\nexports.SignalHandlingBase = SignalHandlingBase;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar signals_1 = require(\"./signals\");\r\nexports.SignalDispatcher = signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = signals_1.SignalHandlingBase;\r\nexports.SignalList = signals_1.SignalList;\r\n","\"use strict\";\r\n/*!\r\n * Strongly Typed Events for TypeScript\r\n * https://github.com/KeesCBakker/StronlyTypedEvents/\r\n * http://keestalkstech.com\r\n *\r\n * Copyright Kees C. Bakker / KeesTalksTech\r\n * Released under the MIT license\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ste_core_1 = require(\"ste-core\");\r\nexports.DispatcherBase = ste_core_1.DispatcherBase;\r\nexports.DispatcherWrapper = ste_core_1.DispatcherWrapper;\r\nexports.EventListBase = ste_core_1.EventListBase;\r\nexports.Subscription = ste_core_1.Subscription;\r\nvar ste_events_1 = require(\"ste-events\");\r\nexports.EventDispatcher = ste_events_1.EventDispatcher;\r\nexports.EventHandlingBase = ste_events_1.EventHandlingBase;\r\nexports.EventList = ste_events_1.EventList;\r\nexports.NonUniformEventList = ste_events_1.NonUniformEventList;\r\nvar ste_simple_events_1 = require(\"ste-simple-events\");\r\nexports.SimpleEventDispatcher = ste_simple_events_1.SimpleEventDispatcher;\r\nexports.SimpleEventHandlingBase = ste_simple_events_1.SimpleEventHandlingBase;\r\nexports.SimpleEventList = ste_simple_events_1.SimpleEventList;\r\nexports.NonUniformSimpleEventList = ste_simple_events_1.NonUniformSimpleEventList;\r\nvar ste_signals_1 = require(\"ste-signals\");\r\nexports.SignalDispatcher = ste_signals_1.SignalDispatcher;\r\nexports.SignalHandlingBase = ste_signals_1.SignalHandlingBase;\r\nexports.SignalList = ste_signals_1.SignalList;\r\n","import { SimpleEventDispatcher } from \"strongly-typed-events\";\n\nconst TraktTokensKey: string = 'trakt_tokens';\n\nexport interface ITraktIDs {\n  trakt?: number;\n  slug?: string;\n  imdb?: string;\n  tmdb?: number;\n  tvdb?: number;\n}\n\nexport interface ITraktMovie {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktShow {\n  title?: string;\n  year?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktSeason {\n  number?: number;\n  ids?: ITraktIDs;\n  episodes?: Array<ITraktEpisode>;\n}\n\nexport interface ITraktEpisode {\n  season?: number;\n  number?: number;\n  title?: string;\n  number_abs?: number;\n  ids?: ITraktIDs;\n}\n\nexport interface ITraktHistoryItem {\n  id?: number;\n  watched_at: string;\n  action: 'scrobble' | 'checkin' | 'watch';\n  type: 'movie' | 'episode';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktSearchResult {\n  type: 'movie' | 'show' | 'episode' | 'person' | 'list';\n  score: number;\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktScrobbleData {\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n  progress: number;\n  app_version: string;\n  app_date: string;\n}\n\nexport interface ITraktScobbleResult {\n  id: number; // History ID, only set when item was scrobbled\n  action: 'start' | 'pause' | 'scrobble';\n  movie?: ITraktMovie;\n  show?: ITraktShow;\n  episode?: ITraktEpisode;\n}\n\nexport interface ITraktHistoryRemoveResult {\n  deleted: {\n    movies: number;\n    episodes: number;\n  };\n  not_found: {\n    movies: ITraktMovie[];\n    shows: ITraktShow[];\n    seasons: ITraktSeason[];\n    episodes: ITraktEpisode[];\n    ids: number[];\n  };\n}\n\nexport interface ITraktError {\n  status: number;\n  error: string;\n}\n\nexport class TraktApiError extends Error {\n  public status: number;\n\n  constructor(error: ITraktError) {\n    super(error.error);\n    this.status = error.status;\n  }\n}\n\nconst TraktErrorCodes: { [key: number]: ITraktError } = {\n  200: { \"status\": 200, \"error\": \"Success\" },\n  201: { \"status\": 201, \"error\": \"Success - new resource created (POST)\" },\n  204: { \"status\": 204, \"error\": \"Success - no content to return (DELETE)\" },\n  400: { \"status\": 400, \"error\": \"Bad Request - request couldn't be parsed\" },\n  401: { \"status\": 401, \"error\": \"Unauthorized - OAuth must be provided\" },\n  403: { \"status\": 403, \"error\": \"Forbidden - invalid API key or unapproved app\" },\n  404: { \"status\": 404, \"error\": \"Not Found - method exists, but no record found\" },\n  405: { \"status\": 405, \"error\": \"Method Not Found - method doesn't exist\" },\n  409: { \"status\": 409, \"error\": \"Conflict - resource already created\" },\n  412: { \"status\": 412, \"error\": \"Precondition Failed - use application/json content type\" },\n  422: { \"status\": 422, \"error\": \"Unprocessible Entity - validation errors\" },\n  429: { \"status\": 429, \"error\": \"Rate Limit Exceeded\" },\n  500: { \"status\": 500, \"error\": \"Server Error - please open a support issue\" },\n  503: { \"status\": 503, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  504: { \"status\": 504, \"error\": \"Service Unavailable - server overloaded (try again in 30s)\" },\n  520: { \"status\": 520, \"error\": \"Service Unavailable - Cloudflare error\" },\n  521: { \"status\": 521, \"error\": \"Service Unavailable - Cloudflare error\" },\n  522: { \"status\": 522, \"error\": \"Service Unavailable - Cloudflare error\" }\n};\n\ninterface ITraktTokens {\n  refresh_token?: string;\n  access_token?: string;\n  expires?: number;\n  authentication_state?: string;\n}\n\nexport interface ITraktApiOptions {\n  client_id: string;\n  client_secret: string;\n  redirect_url: string;\n  api_url?: string;\n  storage?: IStorage;\n}\n\nexport interface IStorage {\n  getValue(name: string): Promise<string | null>;\n  setValue(name: string, value: string | null): Promise<void>;\n}\n\nexport class LocalStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string |null> {\n    return Promise.resolve(window.localStorage.getItem(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      window.localStorage.removeItem(name);\n    } else {\n      window.localStorage.setItem(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport class GreaseMonkeyStorageAdapter implements IStorage {\n  getValue(name: string): Promise<string> {\n    return Promise.resolve(GM_getValue(name));\n  }\n  \n  setValue(name: string, value: string): Promise<void> {\n    if (!value) {\n      GM_deleteValue(name);\n    } else {\n      GM_setValue(name, value);\n    }\n    return Promise.resolve();\n  }\n}\n\nexport default class TraktApi {\n  public onAuthenticationChanged = new SimpleEventDispatcher<boolean>();\n\n  private _tokens: ITraktTokens = {};\n\n  private _client_id: string;\n  private _client_secret: string;\n  private _redirect_uri: string;\n  private _endpoint: string;\n\n  private _storage: IStorage;\n\n  constructor(options: ITraktApiOptions) {\n    this._client_id = options.client_id;\n    this._client_secret = options.client_secret;\n    this._redirect_uri = options.redirect_url;\n    this._endpoint = options.api_url || 'https://api.trakt.tv';\n    this._storage = options.storage || new LocalStorageAdapter();\n  }\n\n  static isError(obj: any, code?: number): obj is ITraktError {\n    const err = obj as ITraktError;\n    return err.status !== undefined && err.error !== undefined\n      && (code === undefined || err.status === code);\n  }\n\n  // ------ Authentication ------\n\n  public async loadTokens(): Promise<void> {\n    const data = await this._storage.getValue(TraktTokensKey);\n    if (data) {\n      this._tokens = JSON.parse(data);\n    } else {\n      this._tokens = {};\n    }\n\n    if (this._tokens.expires && this._tokens.expires < Date.now()) {\n      this._tokens = await this._refresh_token();\n      await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n    }\n\n    this.onAuthenticationChanged.dispatch(this.isAuthenticated());\n  }\n\n  isAuthenticated(): boolean {\n    return this._tokens.access_token !== undefined;\n  }\n\n  async authenticate(): Promise<void> {\n    const state = this._generate_state();\n    const url = this._get_url(state);\n\n    // Save authentication state data\n    this._tokens.authentication_state = state;\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.location.href = url;\n  }\n\n  async checkAuthenticationResult(url: string): Promise<void> {\n    const params = new URL(url).searchParams;\n    const code = params.get('code');\n    const state = params.get('state');\n    if (!code ||!state) return;\n\n    if (!await this._exchange_code(code, state)) {\n      console.error('Exchanging oauth code failed!');\n      return;\n    }\n\n    console.log('Trakt authentication successful!');\n\n    await this._storage.setValue(TraktTokensKey, JSON.stringify(this._tokens));\n\n    window.history.replaceState(null, \"\", window.location.pathname);\n\n    this.onAuthenticationChanged.dispatch(true);\n  }\n\n  disconnect(): void {\n    this._storage.setValue(TraktTokensKey, null);\n    this.onAuthenticationChanged.dispatch(false);\n    this._revoke_token();\n  }\n\n  // ------ API ------\n\n  private _getError(response: Response): ITraktError {\n    var error = TraktErrorCodes[response.status];\n    if (error) return error;\n\n    return {\n      status: response.status,\n      error: `Unknown error (${response.statusText})`\n    };\n  }\n\n  private async _request(method: 'GET' | 'POST' |'DELETE', url: string, body?: any): Promise<any> {\n    let contentType = null;\n    if (body) {\n      if (body.contentType) {\n        contentType = body.contentType;\n        body = body.body;\n      }\n\n      if (typeof body !== 'string') {\n        body = JSON.stringify(body);\n      }\n    }\n\n    let headers = new Headers();\n    headers.append('trakt-api-version', '2');\n    headers.append('trakt-api-key', this._client_id);\n    headers.append('Content-Type', contentType || 'application/json');\n\n    if (this._tokens && this._tokens.access_token) {\n      headers.append('Authorization', `Bearer ${this._tokens.access_token}`);\n    }\n\n    try {\n      let response = await fetch(this._endpoint + url, {\n        method: method,\n        mode: \"cors\",\n        headers: headers,\n        body: body\n      });\n\n      if (!response.ok) {\n        return this._getError(response);\n      }\n\n      if (response.status === 204) {\n        return null; // 204: No Content\n      }\n\n      return response.json();\n    } catch (err) {\n      return {\n        status: 0,\n        error: `An error occurred sending the request: ${err}`\n      };\n    }\n  }\n\n  private async _exchange(body: object): Promise<ITraktTokens> {\n    try {\n      const data = await this._request('POST', '/oauth/token', body);\n      return {\n        access_token: data.access_token,\n        refresh_token: data.refresh_token,\n        expires: (data.created_at + data.expires_in) * 1000\n      };\n    } catch (err) {\n      console.error(err);\n      return {};\n    }\n  }\n\n  private _generate_state(): string {\n    let data = new Uint32Array(4);\n    crypto.getRandomValues(data);\n    let state = '';\n    for (let i = 0; i < data.length; i++) {\n      state += data[i].toString(16);\n    }\n    return state;\n  }\n\n  private _get_url(state: string): string {\n     // Replace 'api' from the api_url to get the top level trakt domain\n     const base_url = this._endpoint.replace(/api\\W/, '');\n     return `${base_url}/oauth/authorize?response_type=code&client_id=${this._client_id}&redirect_uri=${this._redirect_uri}&state=${state}`;\n  }\n\n  private async _exchange_code(code: string, state: string): Promise<boolean> {\n    if (state !== this._tokens.authentication_state) {\n      console.error('Invalid CSRF (State)');\n      return false;\n    }\n\n    this._tokens = await this._exchange({\n      code: code,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'authorization_code'\n    });\n    return this.isAuthenticated();\n  }\n\n  private async _refresh_token(): Promise<ITraktTokens> {\n    if (!this._tokens.refresh_token)\n      return {};\n\n    return await this._exchange({\n      refresh_token: this._tokens.refresh_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret,\n      redirect_uri: this._redirect_uri,\n      grant_type: 'refresh_token'\n    });\n  }\n\n  private async _revoke_token(): Promise<any> {\n    if (!this._tokens.access_token) return;\n\n    return this._request('POST', '/oauth/revoke', { \n      token: this._tokens.access_token,\n      client_id: this._client_id,\n      client_secret: this._client_secret\n    });\n  }\n\n  async search(type: string, query: string): Promise<Array<ITraktSearchResult> | ITraktError> {\n    return this._request('GET', `/search/${type}?query=${encodeURIComponent(query)}`);\n  }\n\n  async seasons(showId: number |string, extended?: Array<'full' | 'episodes'>): Promise<Array<ITraktSeason> | ITraktError> {\n    let query = extended ? '?extended=' + extended.join(\",\") : '';\n    return this._request('GET', `/shows/${showId}/seasons${query}`);\n  }\n\n  async season(showId: number |string, season: number, extended?: boolean): Promise<Array<ITraktEpisode> | ITraktError> {\n    return this._request('GET', `/shows/${showId}/seasons/${season}?extended=${extended ? 'full' : ''}`);\n  }\n\n  async scrobble(type: 'start' | 'pause' | 'stop', data: ITraktScrobbleData): Promise<ITraktScobbleResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n    return this._request('POST', `/scrobble/${type}`, data);\n  }\n\n  async history(type?: 'movies' | 'shows' | 'seasons' | 'episodes', id?: number): Promise<ITraktHistoryItem[] | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    let url = '/sync/history';\n    if (type) url += '/' + type;\n    if (type && id) url += '/' + id;\n    return this._request('GET', url);\n  }\n\n  async historyRemove(id: number): Promise<ITraktHistoryRemoveResult | ITraktError> {\n    if (!this._tokens.access_token) {\n      throw new Error('Access token required.');\n    }\n\n    return this._request('POST', `/sync/history/remove`, { ids: [ id ] });\n  }\n}\n","import TraktApi, { ITraktScrobbleData, ITraktScobbleResult } from './TraktApi';\nimport { SimpleEventDispatcher } from 'ste-simple-events';\n\nexport enum PlaybackState {\n  Paused,\n  Playing,\n  Ended\n}\n\nexport enum TraktScrobbleState {\n  Undefined = 'undefined',\n  Idle = 'idle',\n  Started = 'started',\n  Paused = 'paused',\n  Scrobbled = 'scrobbled',\n  Error = 'error'\n}\n\nexport default class TraktScrobble {\n  /** Extract item type from scrobble data */\n  public static typeFromData(data: ITraktScrobbleData): 'movie' | 'episode' | null {\n    if (!data) return null;\n    if (data.movie) return 'movie';\n    if (data.show && data.episode) return 'episode';\n    return null;\n  }\n\n  /** Extract trakt id from scrobble data, returns 0 if id is not set */\n  public static traktIdFromData(data?: ITraktScrobbleData): number {\n    if (!data) return 0;\n    let movieId = data.movie && data.movie.ids && data.movie.ids.trakt || null;\n    if (movieId) return movieId;\n    let episodeId = data.episode && data.episode.ids && data.episode.ids.trakt || null;\n    if (episodeId) return episodeId;\n    return 0;\n  }\n\n  /** Scrobble once this percentage has been reached */\n  public scrobbleAbovePecentage: number = 80;\n  /** Minimum time of the video that has to have been played before scrobbling (percent of duration) */\n  public scrobbleMimimumPlaybackPercentage: number = 0.1;\n\n  public onStateChanged = new SimpleEventDispatcher<TraktScrobbleState>();\n  public onScrobbled = new SimpleEventDispatcher<ITraktScobbleResult>();\n\n  private _client: TraktApi;\n  private _data?: ITraktScrobbleData;\n\n  private _state: TraktScrobbleState = TraktScrobbleState.Undefined;\n  private _pendingState: TraktScrobbleState = TraktScrobbleState.Undefined;\n  private _playbackState: PlaybackState = PlaybackState.Paused;\n  private _playbackProgress: number = 0;\n  private _error: string | undefined;\n  private _enabled: boolean = false;\n\n  private _lastPlaybackTime: number = 0;\n  private _playbackTime: number = 0;\n\n  constructor(client: TraktApi) {\n    this._client = client;\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n\n    this._enabled = value;\n\n    if (this._enabled) {\n      this._applyState(PlaybackState.Paused);\n    } else {\n      this._applyState(this._playbackState);\n    }\n  }\n\n  public async scrobble(data: ITraktScrobbleData): Promise<void> {\n    if (this._state === TraktScrobbleState.Started) {\n      this._applyState(PlaybackState.Paused);\n    }\n\n    this._data = data;\n    this.setState(TraktScrobbleState.Idle);\n\n    if (this._playbackState === PlaybackState.Playing) {\n      this._updateScrobble('start');\n    } else if (this._playbackState === PlaybackState.Ended) {\n      this._updateScrobble('stop');\n    }\n  }\n\n  public setPlaybackTime(time: number, duration: number) {\n    let delta = time - this._lastPlaybackTime;\n    if (delta < 0.5) {\n      this._playbackTime += delta;\n    }\n\n    let progress = time / duration * 100;\n    let minimumTime = duration * this.scrobbleMimimumPlaybackPercentage;\n    if (this._state === TraktScrobbleState.Started \n        && progress > this.scrobbleAbovePecentage\n        && this._playbackTime > minimumTime) {\n      this.setPlaybackState(PlaybackState.Ended, progress);\n    }\n\n    this._lastPlaybackTime = time;\n  }\n\n  public setPlaybackState(state: PlaybackState, progress: number): void {\n    this._playbackState = state;\n    this._playbackProgress = progress;\n\n    if (!this.enabled) {\n      this._applyState(state);\n    }\n  }\n\n  public scrobbleNow() {\n    this._playbackState = PlaybackState.Ended;\n    this._playbackProgress = 100;\n    this._applyState(this._playbackState);\n  }\n\n  private async _applyState(state: PlaybackState) {\n    if (state === PlaybackState.Playing) {\n      if (this._pendingState === TraktScrobbleState.Idle \n          || this._pendingState === TraktScrobbleState.Paused) {\n        await this._updateScrobble('start');\n      }\n    } else if (state === PlaybackState.Paused) {\n      if (this._pendingState === TraktScrobbleState.Started) {\n        await this._updateScrobble('pause');\n      }\n    } else if (state === PlaybackState.Ended) {\n      if (this._pendingState === TraktScrobbleState.Idle \n          || this._pendingState === TraktScrobbleState.Started \n          || this._pendingState === TraktScrobbleState.Paused) {\n        await this._updateScrobble('stop');\n      }\n    }\n  }\n\n  public get error(): string | undefined {\n    return this._error;\n  }\n\n  public scrobbleUrl(): string {\n    if (!this._data) return '';\n    let url = 'https://trakt.tv/';\n    if (this._data.movie !== undefined) {\n      return url + `movies/${this._data.movie.ids!.slug}`;\n    } else if (this._data.show !== undefined && this._data.episode !== undefined) {\n      const show = this._data.show;\n      const episode = this._data.episode;\n      return url + `shows/${show.ids!.slug}/seasons/${episode.season}/episodes/${episode.number}`;\n    }\n    return '';\n  }\n\n  public get state(): TraktScrobbleState {\n    return this._state;\n  }\n\n  private setState(value: TraktScrobbleState): void {\n    if (this._state == value) return;\n    this._state = value;\n    this._pendingState = value;\n    this.onStateChanged.dispatch(value);\n  }\n\n  public get data(): ITraktScrobbleData | undefined {\n    return this._data;\n  }\n\n  private async _updateScrobble(type: 'start' | 'pause' | 'stop'): Promise<boolean> {\n    if (!this._data) {\n      throw new Error('TraktRoller: Scrobble data not set');\n    }\n\n    switch (type) {\n      case 'start':\n        this._pendingState = TraktScrobbleState.Started;\n        break;\n      case 'pause':\n        this._pendingState = TraktScrobbleState.Paused;\n        break;\n      case 'stop':\n        this._pendingState = TraktScrobbleState.Scrobbled;\n        break;\n    }\n\n    this._data.progress = this._playbackProgress;\n\n    let scrobbleResponse = await this._client.scrobble(type, this._data);\n    if (TraktApi.isError(scrobbleResponse)) {\n      console.error(`trakt scrobbler: ${scrobbleResponse.error}`);\n      this._error = scrobbleResponse.error;\n      this.setState(TraktScrobbleState.Error);\n      return false;\n    }\n\n    switch (this._state) {\n      case TraktScrobbleState.Idle:\n      case TraktScrobbleState.Started:\n      case TraktScrobbleState.Paused:\n        switch (scrobbleResponse.action) {\n          case 'start':\n            this.setState(TraktScrobbleState.Started);\n            break;\n          case 'pause':\n            this.setState(TraktScrobbleState.Paused);\n            break;\n          case 'scrobble':\n            this.setState(TraktScrobbleState.Scrobbled);\n            this.onScrobbled.dispatch(scrobbleResponse);\n            break;\n        }\n        break;\n    }\n\n    return true;\n  }\n}\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref,\n\t\tnull\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: original\n\t};\n\n\tif (original == null) vnode._original = vnode;\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = oldVNode;\n\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\nlet rerenderCount = 0;\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we\n\t// are in hydration mode or not by passing `IS_HYDRATE` instead of a\n\t// DOM element.\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\tcontext.Provider._contextRef = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tglobalContext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet nextDom;\n\t\t\t\t\tif (childVNode._nextDom !== undefined) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t\t\t\t\t// of last DOM child of this child VNode\n\t\t\t\t\t\tnextDom = childVNode._nextDom;\n\n\t\t\t\t\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t\t\t\t\t// can clean up the property\n\t\t\t\t\t\tchildVNode._nextDom = undefined;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t\tnextDom = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t\tnextDom = oldDom;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t\t\t\t\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t\t\t\t\t// See more detail in create-element.js:createVNode\n\t\t\t\t\tif (nextDom !== undefined) {\n\t\t\t\t\t\toldDom = nextDom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldDom = newDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t\t\t// node's nextSibling.\n\n\t\t\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\toldDom &&\n\t\t\t\t\toldVNode._dom == oldDom &&\n\t\t\t\t\toldDom.parentNode != parentDom\n\t\t\t\t) {\n\t\t\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type != 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children == 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children == 'string' || typeof children == 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null, children)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(\n\t\t\t\tcreateVNode(\n\t\t\t\t\tchildren.type,\n\t\t\t\t\tchildren.props,\n\t\t\t\t\tchildren.key,\n\t\t\t\t\tnull,\n\t\t\t\t\tchildren._original\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value == 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet s, useCapture, nameLower;\n\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'style') {\n\t\ts = dom.style;\n\n\t\tif (typeof value == 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tnameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\tname !== 'size' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (typeof value != 'function' && name !== 'dangerouslySetInnerHTML') {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (\n\t\t\tvalue == null ||\n\t\t\t(value === false &&\n\t\t\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t\t\t// The value `false` is different from the attribute not\n\t\t\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t\t\t// that other VDOM frameworks also always stringify `false`.\n\t\t\t\t!/^ar/.test(name))\n\t\t) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t(newVNode._original === oldVNode._original && !c._processingException)\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = isTopLevelFragment\n\t\t\t\t? tmp.props.children\n\t\t\t\t: Array.isArray(tmp)\n\t\t\t\t? tmp\n\t\t\t\t: [tmp];\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t((newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type) ||\n\t\t\t\t\tdom == child)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(\n\t\t\t\t\tnewVNode.type,\n\t\t\t\t\tnewProps.is && { is: newProps.is }\n\t\t\t  );\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (oldProps !== newProps && dom.data != newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tnewVNode._children = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\ti !== dom.value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type != 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\tlet normalizedProps = {};\n\tfor (const i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref,\n\t\tnull\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, hasCaught;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t}\n\n\t\t\t\tif (hasCaught)\n\t\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\ttry {\n\t\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\nexport function useErrorBoundary(cb) {\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\ttry {\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t} catch (e) {\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t\toptions._catchError(e, component._vnode);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window != 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result == 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport class PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn (\n\t\t\tshallowDiffers(this.props, props) || shallowDiffers(this.state, state)\n\t\t);\n\t}\n}\n","import { createElement } from 'preact';\nimport { shallowDiffers, assign } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n","import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref);\n\t}\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n","import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).reduce(\n\t\t(acc, value, index) => acc.concat(fn(value, index)),\n\t\t[]\n\t);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length !== 1) {\n\t\t\tthrow new Error('Children.only() expects only one child.');\n\t\t}\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n","import { Component, createElement, options } from 'preact';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function(error, newVNode, oldVNode) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode._component);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachedClone(vnode) {\n\tif (vnode) {\n\t\tvnode = assign({}, vnode);\n\t\tvnode._component = null;\n\t\tvnode._children = vnode._children && vnode._children.map(detachedClone);\n\t}\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n * @param {Component<any, any>} suspendingComponent The suspending component\n */\nSuspense.prototype._childDidSuspend = function(promise, suspendingComponent) {\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._suspendedComponentWillUnmount =\n\t\tsuspendingComponent.componentWillUnmount;\n\tsuspendingComponent.componentWillUnmount = () => {\n\t\tonResolved();\n\n\t\tif (suspendingComponent._suspendedComponentWillUnmount) {\n\t\t\tsuspendingComponent._suspendedComponentWillUnmount();\n\t\t}\n\t};\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\tc._vnode._children[0] = c.state._suspended;\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\tif (!c._pendingSuspensionCount++) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.render = function(props, state) {\n\tif (this._detachOnNextRender) {\n\t\tthis._vnode._children[0] = detachedClone(this._detachOnNextRender);\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\treturn [\n\t\tcreateElement(Component, null, state._suspended ? null : props.children),\n\t\tstate._suspended && props.fallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('../src/internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function(child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function(props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate = SuspenseList.prototype.componentDidMount = function() {\n\t// Iterate through all children after mounting for two reasons:\n\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t//    The nodes can now be completely consumed from the linked list.\n\t// 2. Handle nodes that might have gotten resolved between render and\n\t//    componentDidMount.\n\tconst list = this;\n\tlist._map.forEach((node, child) => {\n\t\tresolve(list, child, node);\n\t});\n};\n","import { createElement, hydrate, render, _unmount } from 'preact';\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = createElement(\n\t\tContextProvider,\n\t\t{ context: _this.context },\n\t\tprops.vnode\n\t);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\trender(wrap, container, _this._temp);\n\t\t\t_this._children = _this._temp._children;\n\t\t} else {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\trender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\treturn createElement(Portal, { vnode, container });\n}\n","/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nexport function applyEventNormalization({ type, props }) {\n\tif (!props || typeof type != 'string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra|Tou)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (\n\t\tnewProps.onchange &&\n\t\t(type === 'textarea' ||\n\t\t\t(type.toLowerCase() === 'input' && !/^fil|che|ra/i.test(props.type)))\n\t) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      var _tag = createStyleElement(this);\n\n      var before;\n\n      if (this.tags.length === 0) {\n        before = this.before;\n      } else {\n        before = this.tags[this.tags.length - 1].nextSibling;\n      }\n\n      this.container.insertBefore(_tag, before);\n      this.tags.push(_tag);\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is a really hot path\n        // we check the second character first because having \"i\"\n        // as the second character will happen less often than\n        // having \"@\" as the first character\n        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n\n        sheet.insertRule(rule, // we need to insert @import rules before anything else\n        // otherwise there will be an error\n        // technically this means that the @import rules will\n        // _usually_(not always since there could be multiple style tags)\n        // be the first ones in prod and generally later in dev\n        // this shouldn't really matter in the real world though\n        // @import is generally only used for font faces from google fonts and etc.\n        // so while this could be technically correct then it would be slower and larger\n        // for a tiny bit of correctness that won't matter in the real world\n        isImportRule ? 0 : sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","function stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n          T(d[c]);\n        } else Y = !!d | 0;\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexport default stylis_min;\n","var weakMemoize = function weakMemoize(func) {\n  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // $FlowFixMe\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nexport default weakMemoize;\n","import { StyleSheet } from '@emotion/sheet';\nimport Stylis from '@emotion/stylis';\nimport '@emotion/weak-memoize';\n\n// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n// since we use stylis after closure compiler\nvar delimiter = '/*|*/';\nvar needle = delimiter + '}';\n\nfunction toSheet(block) {\n  if (block) {\n    Sheet.current.insert(block + '}');\n  }\n}\n\nvar Sheet = {\n  current: null\n};\nvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n  switch (context) {\n    // property\n    case 1:\n      {\n        switch (content.charCodeAt(0)) {\n          case 64:\n            {\n              // @import\n              Sheet.current.insert(content + ';');\n              return '';\n            }\n          // charcode for l\n\n          case 108:\n            {\n              // charcode for b\n              // this ignores label\n              if (content.charCodeAt(2) === 98) {\n                return '';\n              }\n            }\n        }\n\n        break;\n      }\n    // selector\n\n    case 2:\n      {\n        if (ns === 0) return content + delimiter;\n        break;\n      }\n    // at-rule\n\n    case 3:\n      {\n        switch (ns) {\n          // @font-face, @page\n          case 102:\n          case 112:\n            {\n              Sheet.current.insert(selectors[0] + content);\n              return '';\n            }\n\n          default:\n            {\n              return content + (at === 0 ? delimiter : '');\n            }\n        }\n      }\n\n    case -2:\n      {\n        content.split(needle).forEach(toSheet);\n      }\n  }\n};\n\nvar createCache = function createCache(options) {\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var stylis = new Stylis(stylisOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n\n  {\n    container = options.container || document.head;\n    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\n      attrib.split(' ').forEach(function (id) {\n        inserted[id] = true;\n      });\n\n      if (node.parentNode !== container) {\n        container.appendChild(node);\n      }\n    });\n  }\n\n  var _insert;\n\n  {\n    stylis.use(options.stylisPlugins)(ruleSheet);\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      Sheet.current = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        var map = serialized.map;\n        Sheet.current = {\n          insert: function insert(rule) {\n            sheet.insert(rule + map);\n          }\n        };\n      }\n\n      stylis(selector, serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[name] = true;\n      }\n    };\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n    var commentStart = /\\/\\*/g;\n    var commentEnd = /\\*\\//g;\n    stylis.use(function (context, content) {\n      switch (context) {\n        case -1:\n          {\n            while (commentStart.test(content)) {\n              commentEnd.lastIndex = commentStart.lastIndex;\n\n              if (commentEnd.test(content)) {\n                commentStart.lastIndex = commentEnd.lastIndex;\n                continue;\n              }\n\n              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n            }\n\n            commentStart.lastIndex = 0;\n            break;\n          }\n      }\n    });\n    stylis.use(function (context, content, selectors) {\n      switch (context) {\n        case -1:\n          {\n            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\n            if (unsafePseudoClasses && cache.compat !== true) {\n              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n                var ignore = ignoreRegExp.test(content);\n\n                if (unsafePseudoClass && !ignore) {\n                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n                }\n              });\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  return cache;\n};\n\nexport default createCache;\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className]);\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport default murmur2;\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n","function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\nfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n\n  if (process.env.NODE_ENV !== 'production' && couldBeSelectorInterpolation && shouldWarnAboutInterpolatingClassNameFromCss && cached !== undefined) {\n    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n    shouldWarnAboutInterpolatingClassNameFromCss = false;\n  }\n\n  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i], false);\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings, false);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","import { serializeStyles } from '@emotion/serialize';\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serializeStyles(args);\n}\n\nexport default css;\n","import _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport { createContext, forwardRef, createElement, Component } from 'react';\nimport createCache from '@emotion/cache';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\nimport { StyleSheet } from '@emotion/sheet';\nimport css from '@emotion/css';\nexport { default as css } from '@emotion/css';\n\nvar EmotionCacheContext = createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? createCache() : null);\nvar ThemeContext = createContext({});\nvar CacheProvider = EmotionCacheContext.Provider;\n\nvar withEmotionCache = function withEmotionCache(func) {\n  var render = function render(props, ref) {\n    return createElement(EmotionCacheContext.Consumer, null, function (cache) {\n      return func(props, cache, ref);\n    });\n  }; // $FlowFixMe\n\n\n  return forwardRef(render);\n};\n\n// thus we only need to replace what is a valid character for JS, but not for CSS\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar render = function render(cache, props, theme, ref) {\n  var cssProp = theme === null ? props.css : props.css(theme); // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles);\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = createElement(type, newProps);\n\n  return ele;\n};\n\nvar Emotion =\n/* #__PURE__ */\nwithEmotionCache(function (props, cache, ref) {\n  // use Context.read for the theme when it's stable\n  if (typeof props.css === 'function') {\n    return createElement(ThemeContext.Consumer, null, function (theme) {\n      return render(cache, props, theme, ref);\n    });\n  }\n\n  return render(cache, props, null, ref);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n} // $FlowFixMe\n\n\nvar jsx = function jsx(type, props) {\n  var args = arguments;\n\n  if (props == null || !hasOwnProperty.call(props, 'css')) {\n    // $FlowFixMe\n    return createElement.apply(undefined, args);\n  }\n\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/css' like this: css`\" + props.css + \"`\");\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = Emotion;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type;\n\n  if (process.env.NODE_ENV !== 'production') {\n    var error = new Error();\n\n    if (error.stack) {\n      // chrome\n      var match = error.stack.match(/at (?:Object\\.|)jsx.*\\n\\s+at ([A-Z][A-Za-z$]+) /);\n\n      if (!match) {\n        // safari and firefox\n        match = error.stack.match(/.*\\n([A-Z][A-Za-z$]+)@/);\n      }\n\n      if (match) {\n        newProps[labelPropName] = sanitizeIdentifier(match[1]);\n      }\n    }\n  }\n\n  createElementArgArray[1] = newProps;\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  } // $FlowFixMe\n\n\n  return createElement.apply(null, createElementArgArray);\n};\n\nvar warnedAboutCssPropForGlobal = false;\nvar Global =\n/* #__PURE__ */\nwithEmotionCache(function (props, cache) {\n  if (process.env.NODE_ENV !== 'production' && !warnedAboutCssPropForGlobal && ( // check for className as well since the user is\n  // probably using the custom createElement which\n  // means it will be turned into a className prop\n  // $FlowFixMe I don't really want to add it to the type since it shouldn't be used\n  props.className || props.css)) {\n    console.error(\"It looks like you're using the css prop on Global, did you mean to use the styles prop instead?\");\n    warnedAboutCssPropForGlobal = true;\n  }\n\n  var styles = props.styles;\n\n  if (typeof styles === 'function') {\n    return createElement(ThemeContext.Consumer, null, function (theme) {\n      var serialized = serializeStyles([styles(theme)]);\n      return createElement(InnerGlobal, {\n        serialized: serialized,\n        cache: cache\n      });\n    });\n  }\n\n  var serialized = serializeStyles([styles]);\n  return createElement(InnerGlobal, {\n    serialized: serialized,\n    cache: cache\n  });\n});\n\n// maintain place over rerenders.\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\nvar InnerGlobal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InnerGlobal, _React$Component);\n\n  function InnerGlobal(props, context, updater) {\n    return _React$Component.call(this, props, context, updater) || this;\n  }\n\n  var _proto = InnerGlobal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.sheet = new StyleSheet({\n      key: this.props.cache.key + \"-global\",\n      nonce: this.props.cache.sheet.nonce,\n      container: this.props.cache.sheet.container\n    }); // $FlowFixMe\n\n    var node = document.querySelector(\"style[data-emotion-\" + this.props.cache.key + \"=\\\"\" + this.props.serialized.name + \"\\\"]\");\n\n    if (node !== null) {\n      this.sheet.tags.push(node);\n    }\n\n    if (this.props.cache.sheet.tags.length) {\n      this.sheet.before = this.props.cache.sheet.tags[0];\n    }\n\n    this.insertStyles();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.serialized.name !== this.props.serialized.name) {\n      this.insertStyles();\n    }\n  };\n\n  _proto.insertStyles = function insertStyles$1() {\n    if (this.props.serialized.next !== undefined) {\n      // insert keyframes\n      insertStyles(this.props.cache, this.props.serialized.next, true);\n    }\n\n    if (this.sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = this.sheet.tags[this.sheet.tags.length - 1].nextElementSibling;\n      this.sheet.before = element;\n      this.sheet.flush();\n    }\n\n    this.props.cache.insert(\"\", this.props.serialized, this.sheet, false);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.sheet.flush();\n  };\n\n  _proto.render = function render() {\n\n    return null;\n  };\n\n  return InnerGlobal;\n}(Component);\n\nvar keyframes = function keyframes() {\n  var insertable = css.apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name; // $FlowFixMe\n\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n};\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar ClassNames = withEmotionCache(function (props, context) {\n  return createElement(ThemeContext.Consumer, null, function (theme) {\n    var hasRendered = false;\n\n    var css = function css() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('css can only be used during render');\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var serialized = serializeStyles(args, context.registered);\n\n      {\n        insertStyles(context, serialized, false);\n      }\n\n      return context.key + \"-\" + serialized.name;\n    };\n\n    var cx = function cx() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('cx can only be used during render');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return merge(context.registered, css, classnames(args));\n    };\n\n    var content = {\n      css: css,\n      cx: cx,\n      theme: theme\n    };\n    var ele = props.children(content);\n    hasRendered = true;\n\n    return ele;\n  });\n});\n\nexport { CacheProvider, ClassNames, Global, ThemeContext, jsx, keyframes, withEmotionCache };\n","import { Component } from \"react\";\nimport { jsx, css, SerializedStyles } from \"@emotion/core\";\n\ninterface TraktIconProps {\n  className?: SerializedStyles;\n}\n\nlet className = css`\n  background-image: url(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMTQ0LjggMTQ0LjgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE0NC44IDE0NC44IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgY3g9IjcyLjQiIGN5PSI3Mi40IiByPSI3Mi40Ii8+DQoJPHBhdGggZmlsbD0iI0VEMjIyNCIgZD0iTTI5LjUsMTExLjhjMTAuNiwxMS42LDI1LjksMTguOCw0Mi45LDE4LjhjOC43LDAsMTYuOS0xLjksMjQuMy01LjNMNTYuMyw4NUwyOS41LDExMS44eiIvPg0KCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik01Ni4xLDYwLjZMMjUuNSw5MS4xTDIxLjQsODdsMzIuMi0zMi4yaDBsMzcuNi0zNy42Yy01LjktMi0xMi4yLTMuMS0xOC44LTMuMWMtMzIuMiwwLTU4LjMsMjYuMS01OC4zLDU4LjMNCgkJYzAsMTMuMSw0LjMsMjUuMiwxMS43LDM1bDMwLjUtMzAuNWwyLjEsMmw0My43LDQzLjdjMC45LTAuNSwxLjctMSwyLjUtMS42TDU2LjMsNzIuN0wyNywxMDJsLTQuMS00LjFsMzMuNC0zMy40bDIuMSwybDUxLDUwLjkNCgkJYzAuOC0wLjYsMS41LTEuMywyLjItMS45bC01NS01NUw1Ni4xLDYwLjZ6Ii8+DQoJPHBhdGggZmlsbD0iI0VEMUMyNCIgZD0iTTExNS43LDExMS40YzkuMy0xMC4zLDE1LTI0LDE1LTM5YzAtMjMuNC0xMy44LTQzLjUtMzMuNi01Mi44TDYwLjQsNTYuMkwxMTUuNywxMTEuNHogTTc0LjUsNjYuOGwtNC4xLTQuMQ0KCQlsMjguOS0yOC45bDQuMSw0LjFMNzQuNSw2Ni44eiBNMTAxLjksMjcuMUw2OC42LDYwLjRsLTQuMS00LjFMOTcuOCwyM0wxMDEuOSwyNy4xeiIvPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGZpbGw9IiNFRDIyMjQiIGQ9Ik03Mi40LDE0NC44QzMyLjUsMTQ0LjgsMCwxMTIuMywwLDcyLjRDMCwzMi41LDMyLjUsMCw3Mi40LDBzNzIuNCwzMi41LDcyLjQsNzIuNA0KCQkJCUMxNDQuOCwxMTIuMywxMTIuMywxNDQuOCw3Mi40LDE0NC44eiBNNzIuNCw3LjNDMzYuNSw3LjMsNy4zLDM2LjUsNy4zLDcyLjRzMjkuMiw2NS4xLDY1LjEsNjUuMXM2NS4xLTI5LjIsNjUuMS02NS4xDQoJCQkJUzEwOC4zLDcuMyw3Mi40LDcuM3oiLz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K\");\n  background-repeat: no-repeat;\n  background-origin: content-box;\n`;\n\nexport default class TraktIcon extends Component<TraktIconProps> {\n  render() {\n    return (\n      <div css={ [className, this.props.className] } />\n    );\n  }\n}\n","import TraktApi from \"../TraktApi\";\nimport TraktIcon from \"./TraktIcon\";\n\nimport { Component } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\n\ninterface ConnectButtonProps {\n  api: TraktApi;\n}\n\ninterface ConnectButtonState {\n  isConnected: boolean;\n}\n\nlet className = css`\n  background-color: black;\n  border: 1px solid #222;\n  border-radius: 5px;\n  padding: 2px 7px;\n  color: white;\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 11px;\n  font-weight: normal;\n  line-height: normal;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #444;\n  }\n`;\n\nconst iconStyles = css`\n  height: 14px;\n  width: 14px;\n  margin-right: 5px;\n`;\n\nexport default class ConnectButton extends Component<ConnectButtonProps, ConnectButtonState> {\n  constructor(props: ConnectButtonProps) {\n    super(props);\n    this.state = { isConnected: this.props.api.isAuthenticated() };\n\n    this._handleAuthenticationChanged = this._handleAuthenticationChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.api.onAuthenticationChanged.sub(this._handleAuthenticationChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.api.onAuthenticationChanged.unsub(this._handleAuthenticationChanged);\n  }\n\n  private _handleAuthenticationChanged() {\n    this.setState({ isConnected: this.props.api.isAuthenticated() });\n  }\n\n  private _handleClick() {\n    let api = this.props.api;\n    if (api.isAuthenticated()) {\n      api.disconnect();\n    } else {\n      api.authenticate();\n    }\n  }\n\n  render() {\n    return (\n      <div css={ className } onClick={ this._handleClick }>\n        <TraktIcon className={ iconStyles } />\n        <div css=\"text\">{ this.state.isConnected ? \"Disconnect from Trakt\" : \"Connect with Trakt\" }</div>\n      </div>\n    );\n  }\n}\n","import TraktRoller, { TraktRollerCombinedState, TraktRollerState } from \"../TraktRoller\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\n\nimport { Component } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\n\ninterface ScrobbleInfoProps {\n  roller: TraktRoller;\n}\n\ninterface ScrobbleInfoState {\n  scrobbleData?: ITraktScrobbleData;\n  scrobbleState: TraktRollerCombinedState;\n  error?: string;\n  isEditing: boolean;\n  lookupUrl: string;\n}\n\nconst className = css`\n& .info h2 {\n  font-size: 17px;\n  padding-bottom: 4px;\n}\n& .info a {\n  text-decoration: none;\n}\n& .info p {\n  margin: 0;\n}\n& .editbutton {\n  position: absolute;\n  top: 7px;\n  right: 7px;\n  background: none;\n  border: none;\n  color: white;\n  font-size: 15px;\n  cursor: pointer;\n}\n& .edit {\n  display: flex;\n  flex-wrap: wrap;\n}\n& .edit div {\n  flex: 0 0 100%;\n  margin: 0 5px;\n}\n& .edit input {\n  padding: 5px;\n  margin: 5px;\n}\n& .edit button {\n  padding: 5px 10px;\n  margin: 5px;\n}\n& .edit input {\n  flex-grow: 1;\n}\n`;\n\nexport default class ScrobbleInfo extends Component<ScrobbleInfoProps, ScrobbleInfoState> {\n  _focusUrlInput = false;\n\n  constructor(props: ScrobbleInfoProps) {\n    super(props);\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n\n    this.state = {\n      scrobbleData: this.props.roller.scrobble.data,\n      scrobbleState: this.props.roller.state,\n      error: this.props.roller.error,\n      isEditing: false,\n      lookupUrl: '',\n    };\n  }\n\n  componentDidMount() {\n    this.props.roller.onStateChanged.sub(this._onScrobbleStatusChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.roller.onStateChanged.unsub(this._onScrobbleStatusChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktRollerCombinedState) {\n    this.setState({ \n      scrobbleData: this.props.roller.scrobble.data,\n      scrobbleState: this.props.roller.state,\n      error: this.props.roller.error\n    });\n  }\n\n  private async _lookUpUrl() {\n    let lookupUrl = this.state.lookupUrl;\n    this.setState({\n      lookupUrl: \"\",\n      isEditing: false\n    });\n\n    try {\n      await this.props.roller.lookupTraktUrl(lookupUrl);\n    } catch (e) {\n      this.setState({\n        error: e.message\n      });\n    }\n  }\n\n  render() {\n    let data = this.state.scrobbleData;\n    let info;\n\n    // Editing\n    if (this.state.isEditing) {\n      info = (\n        <div className=\"edit\">\n          <div>Enter the Trakt URL of the correct movie, show or episode:</div>\n          <input \n            type=\"text\" \n            value={ this.state.lookupUrl } \n            ref={ ref => { if (this._focusUrlInput && ref) { ref.focus(); this._focusUrlInput = false; } } } \n            onChange={ e => this.setState({ lookupUrl: e.currentTarget.value }) }\n          />\n          <button title=\"Update\" onClick={ () => this._lookUpUrl() }>Update</button>\n        </div>\n      );\n\n    // Still looking up\n    } else if (this.state.scrobbleState == TraktRollerState.Undefined || this.state.scrobbleState == TraktRollerState.Lookup) {\n      info = (\n        <div className=\"lookup\">Loading</div>\n      );\n    \n    // Not found\n    } else if (this.state.scrobbleState == TraktRollerState.NotFound) {\n      info = (\n        <div className=\"error\">\n          <h2>Failed to scrobble:</h2>\n          <p>Could not find matching episode on Trakt</p>\n        </div>\n      );\n\n    // Error\n    } else if (this.state.scrobbleState == TraktRollerState.Error) {\n      info = (\n        <div className=\"error\">\n          <h2>Failed to scrobble:</h2>\n          <p>{ this.state.error }</p>\n        </div>\n      );\n\n    // Lookup succeeded\n    } else if (data) {\n      \n      if (data.movie && data.movie.ids) {\n        let movieUrl = `https://trakt.tv/movies/${data.movie.ids.slug}`;\n        info = (\n          <div className=\"info\">\n            <h2><a href={ movieUrl } target=\"_blank\">{ data.movie.title } ({ data.movie.year })</a></h2>\n          </div>\n        );\n      } else if (data.show && data.show.ids && data.episode && data.episode.ids) {\n        let showUrl = `https://trakt.tv/shows/${data.show.ids.slug}`;\n        let episodeUrl = `${showUrl}/seasons/${data.episode.season}/episodes/${data.episode.number}`;\n        let episodeTitle = data.episode.title ? `: ${data.episode.title}` : null;\n        info = (\n          <div className=\"info\">\n            <h2><a href={ showUrl } target=\"_blank\">{ data.show.title } ({ data.show.year })</a></h2>\n            <p><a href={ episodeUrl } target=\"_blank\">\n              Season { data.episode.season } Episode { data.episode.number }{ episodeTitle }\n            </a></p>\n          </div>\n        );\n      } else {\n        info = (\n          <div className=\"error\">\n            <h2>Internal error:</h2>\n            <p>Missing data</p>\n          </div>\n        );\n      }\n    }\n\n    return (\n      <div css={ className }>\n        <button \n            className=\"editbutton\" \n            title={ this.state.isEditing ? \"Cancel\" : \"Edit\" } \n            onClick={ () => { this.setState({ isEditing: !this.state.isEditing }); this._focusUrlInput = true; } }>\n          { this.state.isEditing ? \"\" : \"\" }\n        </button>\n        { info }\n      </div>\n    );\n  }\n}\n","import { Component, MouseEventHandler } from \"react\";\nimport { jsx, css, SerializedStyles } from \"@emotion/core\";\n\ninterface ButtonProps {\n  text: string;\n  onClick: MouseEventHandler<HTMLButtonElement>;\n  className?: SerializedStyles;\n  disabled?: boolean;\n}\n\nconst className = css`\n  font-size: 12px;\n  font-weight: bold;\n  color: #eee;\n  background-color: #333;\n  border: none;\n  border-radius: 3px;\n  margin: 5px;\n  cursor: pointer;\n  padding: 5px 10px 5px 10px;\n  flex-grow: 1;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background-color: #555;\n  }\n`;\n\nexport default class Button extends Component<ButtonProps> {\n  render() {\n    return (\n      <button css={ [className, this.props.className] } className={ this.props.disabled ? 'disabled' : '' } onClick={ this.props.onClick } >\n        { this.props.text }\n      </button>\n    );\n  }\n}\n","import TraktScrobble, { TraktScrobbleState } from \"../TraktScrobble\";\nimport TraktApi, { ITraktHistoryItem, ITraktScrobbleData } from \"../TraktApi\";\nimport TraktHistory from \"../TraktHistory\";\nimport Button from \"./Button\";\n\nimport { Component, MouseEvent } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\n\ninterface ScrobbleHistoryProps {\n  scrobbleData: ITraktScrobbleData;\n  history: TraktHistory;\n}\n\ninterface ScrobbleHistoryState {\n  historyItems: ITraktHistoryItem[] | null;\n}\n\nconst className = css`\n  & div {\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid #666;\n    height: 24px;\n    align-items: flex-end;\n  }\n\n  & button {\n    flex-grow: 0;\n    font-size: 9px;\n    padding: 2px 10px;\n    margin-right: 0;\n    font-weight: normal;\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.2s ease;\n  }\n\n  & button:hover {\n    background-color: #eb3b14;\n  }\n\n  & div:hover button {\n    opacity: 1;\n    visibility: visible;\n  }\n`;\n\nconst ActionMap = {\n  scrobble: \"Scrobbled\",\n  checkin: \"Checked in\",\n  watch: \"Watched\"\n};\n\nexport default class ScrobbleHistory extends Component<ScrobbleHistoryProps, ScrobbleHistoryState> {\n  private _traktId: number = 0;\n  private _formatter: Intl.DateTimeFormat;\n\n  constructor(props: ScrobbleHistoryProps) {\n    super(props);\n    this._formatter = new Intl.DateTimeFormat(navigator.language, {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\", \n      hour: \"numeric\", \n      minute: \"numeric\"\n    });\n    this.state = { historyItems: null };\n\n    this._handleHistoryChanged = this._handleHistoryChanged.bind(this);\n  }\n\n  componentDidMount() {\n    let data = this.props.scrobbleData;\n    this._traktId = TraktScrobble.traktIdFromData(data);\n    if (this._traktId !== 0) {\n      let type = TraktScrobble.typeFromData(data);\n      this.props.history.sub(this._traktId, this._handleHistoryChanged);\n      this.props.history.load(type === \"movie\" ? \"movies\" : \"episodes\", this._traktId);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.history.unsub(this._traktId, this._handleHistoryChanged);\n  }\n\n  private _handleHistoryChanged(items: ITraktHistoryItem[]) {\n    this.setState({ historyItems: items });\n  }\n\n  private async _handleRemove(e: MouseEvent<any, any>, item: ITraktHistoryItem) {\n    let el = e.target as HTMLElement;\n    el.classList.add(\"disabled\");\n    el.innerText = \"Removing...\";\n\n    await this.props.history.remove(item.id!);\n\n    el.classList.remove(\"disabled\");\n    el.innerText = \"Remove\";\n  }\n  \n  render() {\n    if (this.state.historyItems && this.state.historyItems.length > 0) {\n      let rows = [];\n      for (let item of this.state.historyItems) {\n        rows.push(\n          <div>\n            <span>{ ActionMap[item.action] } at { this._formatter.format(new Date(item.watched_at)) }</span>\n            <Button text=\"Remove\" onClick={ (e) => this._handleRemove(e, item) } />\n          </div>\n        );\n      }\n      return (\n        <div css={ className }>\n          <h2>Watch History</h2>\n          { rows }\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n","import TraktRoller, { TraktRollerCombinedState } from \"../TraktRoller\";\nimport Button from \"./Button\";\n\nimport { Component } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\nimport { TraktScrobbleState } from \"../TraktScrobble\";\n\ninterface ScrobbleControlProps {\n  roller: TraktRoller;\n}\n\ninterface ScrobbleControlState {\n  scrobbleState: TraktRollerCombinedState;\n  scrobblingEnabled: boolean;\n}\n\nconst className = css`\n  display: flex;\n  margin: 5px -5px;\n  justify-content: space-between;\n\n  & > div, & > button {\n    width: 33%;\n  }\n\n  & .state {\n    font-size: 12px;\n    font-weight: bold;\n    text-align: center;\n    color: #fff;\n    background-color: #ed1c24;\n    border: none;\n    border-radius: 3px;\n    margin: 5px;\n    padding: 5px 10px 5px 10px;\n    width: 20%;\n    text-transform: capitalize;\n  }\n`;\n\nconst scrobbleNowStyles = css`\n  color: #8e44ad;\n  border: 1px solid #8e44ad;\n  background: none;\n\n  &:hover {\n    background-color: #8e44ad;\n    color: #fff;\n  }\n`;\n\nconst enableScrobbleStyles = css`\n  color: #16a085;\n  border: 1px solid #16a085;\n  background: none;\n\n  &:hover {\n    background-color: #16a085;\n    color: #fff;\n  }\n`;\n\nconst EnabledStates: TraktRollerCombinedState[] = [\n  TraktScrobbleState.Idle,\n  TraktScrobbleState.Started,\n  TraktScrobbleState.Paused\n];\n\nexport default class ScrobbleControl extends Component<ScrobbleControlProps, ScrobbleControlState> {\n  constructor(props: ScrobbleControlProps) {\n    super(props);\n    this.state = { scrobbleState: this.props.roller.state, scrobblingEnabled: this.props.roller.enabled };\n\n    this._onScrobbleStateChanged = this._onScrobbleStateChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleScrobbleNowClick = this._handleScrobbleNowClick.bind(this);\n    this._handleEnableScrobbleClick = this._handleEnableScrobbleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.roller.onStateChanged.sub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.roller.onStateChanged.unsub(this._onScrobbleStateChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStateChanged(state: TraktRollerCombinedState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ scrobblingEnabled: enabled });\n  }\n\n  private _handleScrobbleNowClick() {\n    this.props.roller.scrobble.scrobbleNow();\n  }\n\n  private _handleEnableScrobbleClick() {\n    this.props.roller.enabled = !this.props.roller.enabled;\n  }\n\n  render() {\n    let state = this.props.roller.enabled ? \"Disabled\" : this.props.roller.state;\n    let title = this.props.roller.error || \"\";\n\n    let disabled = !(EnabledStates.indexOf(this.state.scrobbleState) >= 0);\n    let label = this.props.roller.enabled ? \"Enable Scrobbling\" : \"Disable Scrobbling\";\n\n    return (\n      <div css={ className }>\n        <div className=\"state\" title={ title }>{ state }</div>\n        <Button className={ scrobbleNowStyles } text=\"Scrobble Now\" onClick={ this._handleScrobbleNowClick } disabled={ disabled } />\n        <Button className={ enableScrobbleStyles } text={ label } onClick={ this._handleEnableScrobbleClick } />\n      </div>\n    );\n  }\n}\n","import TraktScrobble from \"../TraktScrobble\";\nimport ScrobbleInfo from \"./ScrobbleInfo\";\nimport ScrobbleHistory from \"./ScrobbleHistory\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\nimport ScrobbleControl from \"./ScrobbleControl\";\nimport TraktRoller, { TraktRollerCombinedState } from \"../TraktRoller\";\n\nimport { Component } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\n\ninterface PopupProps {\n  roller: TraktRoller;\n}\n\ninterface PopupState {\n  scrobbleData?: ITraktScrobbleData;\n}\n\nconst className = css`\n  color: #eee;\n  z-index: 10000;\n\n  & > div {\n    padding: 15px;\n  }\n\n  & a, & p a {\n    color: #eee;\n    transition: color 0.2s ease;\n  }\n\n  & h2 {\n    font-size: 13px;\n    margin: 0;\n  }\n\n  & h2 a:hover, & p a:hover {\n    color: #ed1c24;\n    text-decoration: none;\n  }\n\n  button.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n`;\n\nexport default class Popup extends Component<PopupProps, PopupState> {\n  constructor(props: PopupProps) {\n    super(props);\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n\n    this.state = {\n      scrobbleData: this.props.roller.scrobble.data \n    };\n  }\n\n  componentDidMount() {\n    this.props.roller.onStateChanged.sub(this._onScrobbleStatusChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.roller.onStateChanged.unsub(this._onScrobbleStatusChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktRollerCombinedState) {\n    this.setState({ scrobbleData: this.props.roller.scrobble.data });\n  }\n\n  render() {\n    let history = null;\n    if (this.state.scrobbleData) {\n      history = <ScrobbleHistory \n        scrobbleData={ this.state.scrobbleData } \n        history={ this.props.roller.history } \n        key={ TraktScrobble.traktIdFromData(this.state.scrobbleData) }\n      />;\n    }\n\n    return (\n      <div css={ className }>\n        <ScrobbleInfo roller={ this.props.roller } />\n        { history }\n        <ScrobbleControl roller={ this.props.roller } />\n      </div>\n    );\n  }\n}\n","import TraktRoller, { TraktRollerCombinedState } from \"../TraktRoller\";\nimport TraktIcon from \"./TraktIcon\";\nimport Popup from \"./Popup\";\n\nimport { Component } from \"react\";\nimport { jsx, css } from \"@emotion/core\";\n\ninterface StatusButtonProps {\n  roller: TraktRoller;\n}\n\ninterface StatusButtonState {\n  scrobbleState: TraktRollerCombinedState;\n  enabled: boolean;\n}\n\nconst popupClassName = css`\n  background: #161616;\n  border: 1px solid #fff;\n  position: absolute;\n  width: 450px;\n  z-index: 10000;\n  left: -209px;\n  border-radius: 4px;\n  transition: all 0.2s ease-in;\n  transition-delay: 0.2s;\n  visibility: hidden;\n  opacity: 0;\n  bottom: 55px;\n\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 12px;\n  font-weight: normal;\n  line-height: normal;\n\n  &:after, &:before {\n    top: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: \" \";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n  }\n  &:after {\n    border-color: rgba(0, 0, 0, 0);\n    border-top-color: #000000;\n    border-width: 15px;\n    margin-left: -15px;\n  }\n  &:before {\n    border-color: rgba(255, 255, 255, 0);\n    border-top-color: #fff;\n    border-width: 17px;\n    margin-left: -17px;\n  }\n  & .hover-blocker {\n    position: absolute;\n    bottom: -75px;\n    left: 33%;\n    width: 33%;\n    height: 75px;\n  }\n`;\n\nconst className = css`\n  position: relative;\n\n  &:hover .popup {\n    visibility: visible;\n    opacity: 1;\n    bottom: 44px;\n  }\n`;\n\nconst buttonClassName = css`\n  width: 38px;\n  height: 24px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  position: relative;\n  z-index: 101;\n\n  &.state-disabled {\n    filter: opacity(0.5);\n  }\n  &.state-scrobbled {\n    filter: hue-rotate(150deg) brightness(1.3);\n  }\n  &.state-error, &.state-notfound {\n    filter: grayscale(1) brightness(2);\n  }\n`;\n\nconst iconStyles = css`\n  height: 100%;\n`;\n\nexport default class StatusButton extends Component<StatusButtonProps, StatusButtonState> {\n  constructor(props: StatusButtonProps) {\n    super(props);\n    this.state = { scrobbleState: this.props.roller.state, enabled: this.props.roller.enabled };\n\n    this._onScrobbleStatusChanged = this._onScrobbleStatusChanged.bind(this);\n    this._onEnabledChanged = this._onEnabledChanged.bind(this);\n    this._handleClick = this._handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.roller.onStateChanged.sub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.sub(this._onEnabledChanged);\n  }\n\n  componentWillUnmount() {\n    this.props.roller.onStateChanged.unsub(this._onScrobbleStatusChanged);\n    this.props.roller.onEnabledChanged.unsub(this._onEnabledChanged);\n  }\n\n  private _onScrobbleStatusChanged(state: TraktRollerCombinedState) {\n    this.setState({ scrobbleState: state });\n  }\n\n  private _onEnabledChanged(enabled: boolean) {\n    this.setState({ enabled: enabled });\n  }\n\n  private _handleClick() {\n    const url = this.props.roller.scrobble.scrobbleUrl();\n    if (url != '') {\n      window.open(this.props.roller.scrobble.scrobbleUrl(), '_blank');\n    }\n  }\n\n  render() {\n    let state = this.state.enabled ? \"disabled\" : this.state.scrobbleState;\n    let stateClass = \"state-\" + state;\n    let title = this.props.roller.error || this.state.scrobbleState;\n    return (\n      <div css={ className }>\n        <button css={ buttonClassName } className={ stateClass } title={ title } onClick={ this._handleClick }>\n          <TraktIcon className={ iconStyles } />\n        </button>\n        <div css={ popupClassName } className=\"popup\">\n          <Popup roller={ this.props.roller } />\n          <div className=\"hover-blocker\"></div>\n        </div>\n      </div>\n    );\n  }\n}\n","import TraktApi, { ITraktHistoryItem } from \"./TraktApi\";\n\ninterface History {\n  traktId: number;\n  items: ITraktHistoryItem[] | null, \n  subscribers: Array<(history: ITraktHistoryItem[]) => void>;\n}\n\n/** Load a manage Trakt watched history */\nexport default class TraktHistory {\n  private _api: TraktApi;\n  private _histories: { [key: string]: History } = {};\n\n  constructor(api: TraktApi) {\n    this._api = api;\n  }\n\n  /** Load history for a movie or episode */\n  public async load(type: 'movies' | 'episodes', traktId: number, reload: boolean = false): Promise<ITraktHistoryItem[]> {\n    if (!reload && this._histories[traktId] && this._histories[traktId].items) {\n      return this._histories[traktId].items!;\n    }\n\n    let result = await this._api.history(type, traktId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error loading scrobble history (${result.error})`)\n      return [];\n    }\n\n    this._update(traktId, result);\n    return result;\n  }\n\n  /** Add a new item to the history */\n  public add(traktId: number, item: ITraktHistoryItem) {\n    let history = this._getOrCreateHistory(traktId);\n    if (!history.items) history.items = [];\n    history.items.push(item);\n    history.items.sort((a, b) => new Date(b.watched_at).valueOf() - new Date(a.watched_at).valueOf());\n    this._update(traktId, history.items);\n  }\n\n  /** Remove a watched entry by its id */\n  public async remove(historyId: number): Promise<void> {\n    let result = await this._api.historyRemove(historyId);\n    if (TraktApi.isError(result)) {\n      console.error(`TraktRoller: Error removing scrobble (${result.error})`)\n      return;\n    } else if (result.not_found.ids.indexOf(historyId) >= 0) {\n      console.warn(`TraktRoller: Could not remove history id ${historyId}, not found on server`);\n    }\n\n    outer:\n    for (let traktId of Object.keys(this._histories)) {\n      let history = this._histories[traktId];\n      if (!history.items) continue;\n      for (let i = 0; i < history.items.length; i++) {\n        if (history.items[i].id === historyId) {\n          history.items.splice(i, 1);\n          this._update(history.traktId, history.items);\n          break outer;\n        }\n      }\n    }\n  }\n\n  /** Get notified when the history changes */\n  public sub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._getOrCreateHistory(traktId);\n    history.subscribers.push(callback);\n  }\n\n  /** Remove a history subscriber */\n  public unsub(traktId: number, callback: (history: ITraktHistoryItem[]) => void) {\n    let history = this._histories[traktId];\n    if (!history) return;\n\n    let index = history.subscribers.indexOf(callback);\n    if (index >= 0) history.subscribers.splice(index, 1);\n  }\n\n  private _getOrCreateHistory(traktId: number) {\n    let history = this._histories[traktId];\n    if (!history) {\n      history = this._histories[traktId] = { traktId: traktId, items: null, subscribers: [] };\n    }\n    return history;\n  }\n\n  private _update(traktId: number, items: ITraktHistoryItem[]) {\n    let history = this._getOrCreateHistory(traktId);\n    history.items = items;\n    for (let sub of history.subscribers) { sub(items); }\n  }\n}\n","import TraktApi, { ITraktScrobbleData, TraktApiError, ITraktSearchResult, ITraktShow, ITraktSeason, ITraktEpisode } from \"./TraktApi\";\n\nexport class TraktLookupError extends Error {\n  public associatedObject: any;\n\n  constructor(message: string, object?: any) {\n    super(message);\n    this.associatedObject = object;\n  }\n}\n\n/** Token allowing to cancel the async lookup operation */\nexport class CancellationToken {\n  private _isCancelled: boolean = false;\n\n  public cancel(): void {\n    this._isCancelled = true;\n  }\n\n  public get isCancelled(): boolean {\n    return this._isCancelled;\n  }\n\n  public static throwIfCancelled(token?: CancellationToken) {\n    if (token && token.isCancelled) {\n      throw new CancellationError();\n    }\n  }\n}\n\n/** Error thrown by async lookup method if it has been cancelled */\nexport class CancellationError extends Error {\n  constructor() {\n    super(\"The operation has been cancelled.\");\n  }\n}\n\n/** Look up a show on trakt */\nexport default class TraktLookup {\n  private _client: TraktApi;\n\n  constructor(client: TraktApi) {\n    this._client = client;\n  }\n\n  /** Start the lookup */\n  public async start(scrobbleData: ITraktScrobbleData, cancellation?: CancellationToken): Promise<ITraktScrobbleData | null> {\n    let data = Object.assign({}, scrobbleData);\n\n    if (data.movie === undefined && (data.show === undefined || data.episode === undefined)) {\n      throw new TraktLookupError('TraktRoller: either movie or show/episode needs to be set on scrobble data');\n    }\n\n    console.log('TraktRoller: looking up media on trakt...', Object.assign({}, data));\n\n    let type: 'movie' | 'show' = data.movie !== undefined ? 'movie' : 'show';\n    let result : ITraktScrobbleData | null = null;\n  \n    // Special episodes with fractional episode numbers, e.g. 14.5\n    // (Often used for recap episodes)\n    let isSpecialEp = data.episode && data.episode.number && (data.episode.number % 1) !== 0;\n\n    if (!isSpecialEp) {\n      // Start with trakt's automatic matching\n      console.log('TraktRoller: trying automatic matching...');\n      result = await this._scrobbleLookup(data);\n      CancellationToken.throwIfCancelled(cancellation);\n      if (result != null) return result;\n\n      // Retry automatic matching with absolute episode number\n      if (type === 'show' && data.episode && data.episode.number_abs === undefined && data.episode.number !== undefined) {\n        let dataAbs = Object.assign({}, data);\n        dataAbs.episode = Object.assign({}, dataAbs.episode, { number_abs: data.episode.number });\n        delete dataAbs.episode.number;\n        \n        result = await this._scrobbleLookup(dataAbs);\n        CancellationToken.throwIfCancelled(cancellation);\n        if (result != null) return result;\n      }\n    }\n\n    // Search for item manually\n    let title = data.movie !== undefined ? data.movie.title : data.show!.title;\n    if (!title) {\n      throw new TraktLookupError('TraktRoller: No title set');\n    }\n\n    console.log('TraktRoller: trying to search manually...');\n    let results = await this._search(type, title);\n    CancellationToken.throwIfCancelled(cancellation);\n    if (results.length === 0) {\n      console.warn(`TraktRoller: manual search for \"${title}\" returned no results`);\n      return null;\n    }\n\n    // Use year to narrow results when available\n    const year = type === 'movie' ? data.movie?.year : data.show?.year;\n    if (year) {\n      let yearMatches = results.filter(r => r.show?.year == year || r.movie?.year == year);\n      if (yearMatches.length > 0) {\n        results = yearMatches;\n      }\n    }\n\n    // Try search results in order\n    for (const found of results) {\n      if (type === 'movie') {\n        console.log(`TraktRoller: trying result ${found.movie!.title}`, found);\n        data.movie = found.movie;\n      } else {\n        console.log(`TraktRoller: trying result ${found.show!.title}`, found);\n        data.show = found.show;\n      }\n\n      // Look up episode for shows\n      if (type === 'show') {\n        let episodeResult = await this._lookupEpisode(data.episode!, found.show!);\n        CancellationToken.throwIfCancelled(cancellation);\n        if (episodeResult == null) continue;\n        data.episode = episodeResult;\n      }\n\n      // Retry start with new data\n      console.log('TraktRoller: re-trying matching');\n      result = await this._scrobbleLookup(data);\n      CancellationToken.throwIfCancelled(cancellation);\n      if (result != null) return result;\n    }\n\n    return null;\n  }\n\n  private async _scrobbleLookup(data: ITraktScrobbleData): Promise<ITraktScrobbleData | null> {\n    let scrobbleResponse = await this._client.scrobble('pause', data);\n    if (TraktApi.isError(scrobbleResponse, 404)) {\n      return null;\n    } else if (TraktApi.isError(scrobbleResponse)) {\n      throw new TraktApiError(scrobbleResponse);\n    }\n\n    let result = Object.assign({}, data);\n\n    if (scrobbleResponse.movie !== undefined)   result.movie = scrobbleResponse.movie;\n    if (scrobbleResponse.show !== undefined)    result.show = scrobbleResponse.show;\n    if (scrobbleResponse.episode !== undefined) result.episode = scrobbleResponse.episode;\n\n    console.log('TraktRoller: scrobble lookup succeeded', scrobbleResponse);\n    return result;\n  }\n\n  private async _search(type: 'movie' | 'show', title: string): Promise<Array<ITraktSearchResult>> {\n    // Quote and escape title to avoid special search characters interfereing with the query\n    // See https://github.com/trakt/api-help/issues/76\n    title = `\"${title.replace(/[\\\\\"']/g, '\\\\$&')}\"`;\n\n    const searchResponse = await this._client.search(type, title);\n    if (TraktApi.isError(searchResponse)) {\n      throw new TraktApiError(searchResponse);\n    }\n\n    const goodMatches = searchResponse.filter(r => r.score > 10);\n    if (searchResponse.length > goodMatches.length) {\n      if (goodMatches.length === 0) {\n        console.log(`TraktRoller: search returned only garbage results.`);\n      } else {\n        console.log(`TraktRoller: some search results with low scores ignored`);\n      }\n    }\n    return goodMatches;\n  }\n\n  private async _lookupEpisode(episode: ITraktEpisode, show: ITraktShow): Promise<ITraktEpisode |null> {\n    if (episode.number === undefined || episode.season === undefined) {\n      throw new TraktLookupError('TraktRoller: data has show but episode is not set or incomplete', episode);\n    }\n    if (show.ids === undefined || show.ids.trakt === undefined) {\n      throw new TraktLookupError('TraktRoller: show data is missing trakt id', show);\n    }\n\n    let episodeResult: ITraktEpisode | null = null;\n\n    const seasonsResponse = await this._client.seasons(show.ids.trakt, ['episodes', 'full']);\n    if (TraktApi.isError(seasonsResponse, 404)) {\n      console.error('TraktRoller: manual lookup could not find seasons');\n      return null;\n    } else if (TraktApi.isError(seasonsResponse)) {\n      throw new TraktApiError(seasonsResponse);\n    }\n\n    // First search in matching season\n    const season = seasonsResponse.find(s => s.number === episode.season);\n    if (!season) {\n      console.warn(`TraktRoller: could not find season ${episode.season} in seasons response`, seasonsResponse);\n    } else {\n      episodeResult = this._matchEpisodeOrTitle(season, episode.number, episode.title);\n    }\n\n    // Look through all other seasons\n    if (episodeResult == null) {\n      for (let s of seasonsResponse) {\n        if (s === season) continue;\n        episodeResult = this._matchEpisodeOrTitle(s, episode.number, episode.title);\n        if (episodeResult != null) break;\n      }\n    }\n\n    return episodeResult;\n  }\n\n  private _matchEpisodeOrTitle(season: ITraktSeason, episode: number, title?: string): ITraktEpisode | null {\n    if (!season.episodes) {\n      throw new TraktLookupError(`TraktRoller: Missing episodes array in season object`, season);\n    }\n\n    let numberMatch = season.episodes.filter(e => e.number === episode || e.number_abs === episode);\n    if (numberMatch.length > 1) {\n      console.error(`TraktRoller: got multiple episode #${episode} in season`, season);\n      return null;\n    } else if (numberMatch.length == 1) {\n      console.log(`TraktRoller: found episode using episode number`, numberMatch[0]);\n      return numberMatch[0];\n    }\n\n    if (title) {\n      const filteredTitle = this._filterEpisodeTitle(title);\n      let titleMatch = season.episodes\n        .filter(e => e.title && this._filterEpisodeTitle(e.title) === filteredTitle);\n      if (titleMatch.length > 1) {\n        console.error(`TraktRoller: got multiple episodes titled \"${title}\" in show`, season);\n        return null;\n      } else if (titleMatch.length == 1) {\n        console.log(`TraktRoller: found episode using episode title`, titleMatch[0]);\n        return titleMatch[0];\n      }\n    }\n\n    return null;\n  }\n\n  private _filterEpisodeTitle(title: string): string {\n    if (!title) debugger;\n    return title.replace(/[^\\w\\s]/gi, '').toLowerCase();\n  }\n}\n","/*! Player.js - v0.1.0 - 2017-10-24\n* http://github.com/embedly/player.js\n* Copyright (c) 2017 Embedly; Licensed BSD */\n(function(window, document){\nvar playerjs = {};\n\nplayerjs.DEBUG = false;\nplayerjs.VERSION = '0.0.11';\nplayerjs.CONTEXT = 'player.js';\nplayerjs.POST_MESSAGE = !!window.postMessage;\n\n/*\n* Utils.\n*/\nplayerjs.origin = function(url){\n  // Grab the origin of a URL\n  if (url.substr(0, 2) === '//'){\n    url = window.location.protocol + url;\n  }\n\n  return url.split('/').slice(0,3).join('/');\n};\n\nplayerjs.addEvent = function(elem, type, eventHandle) {\n  if (!elem) { return; }\n  if ( elem.addEventListener ) {\n    elem.addEventListener( type, eventHandle, false );\n  } else if ( elem.attachEvent ) {\n    elem.attachEvent( \"on\" + type, eventHandle );\n  } else {\n    elem[\"on\"+type]=eventHandle;\n  }\n};\n\n// usage: log('inside coolFunc',this,arguments);\n// http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/\nplayerjs.log = function(){\n  playerjs.log.history = playerjs.log.history || [];   // store logs to an array for reference\n  playerjs.log.history.push(arguments);\n  if(window.console && playerjs.DEBUG){\n    window.console.log( Array.prototype.slice.call(arguments) );\n  }\n};\n\n// isFunctions\nplayerjs.isString = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object String]';\n};\n\nplayerjs.isObject = function(obj){\n  return Object.prototype.toString.call(obj) === \"[object Object]\";\n};\n\nplayerjs.isArray = function(obj){\n  return Object.prototype.toString.call(obj) === \"[object Array]\";\n};\n\nplayerjs.isNone = function(obj){\n  return (obj === null || obj === undefined);\n};\n\nplayerjs.has = function(obj, key){\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n\n// ie8 doesn't support indexOf in arrays, based on underscore.\nplayerjs.indexOf = function(array, item) {\n  if (array == null){ return -1; }\n  var i = 0, length = array.length;\n  if (Array.prototype.IndexOf && array.indexOf === Array.prototype.IndexOf) {\n    return array.indexOf(item);\n  }\n  for (; i < length; i++) {\n    if (array[i] === item) { return i; }\n  }\n  return -1;\n};\n\n// Assert\nplayerjs.assert = function(test, msg) {\n  if (!test) {\n    throw msg || \"Player.js Assert Failed\";\n  }\n};\n/*\n* Keeper is just a method for keeping track of all the callbacks.\n*/\n\nplayerjs.Keeper = function(){\n  this.init();\n};\n\nplayerjs.Keeper.prototype.init = function(){\n  this.data = {};\n};\n\nplayerjs.Keeper.prototype.getUUID = function(){\n  // Create a random id. #http://stackoverflow.com/a/2117523/564191\n  return 'listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c === 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n  });\n};\n\nplayerjs.Keeper.prototype.has = function(event, id){\n  if (!this.data.hasOwnProperty(event)){\n    return false;\n  }\n\n  if (playerjs.isNone(id)){\n    return true;\n  }\n\n  // Figure out if we have the event.\n  var events = this.data[event];\n\n  for (var i = 0; i < events.length; i++){\n    if (events[i].id === id){\n      return true;\n    }\n  }\n\n  return false;\n};\n\nplayerjs.Keeper.prototype.add = function(id, event, cb, ctx, one){\n  var d = {\n    id: id,\n    event: event,\n    cb: cb,\n    ctx: ctx,\n    one: one\n  };\n\n  if (this.has(event)){\n    this.data[event].push(d);\n  } else {\n    this.data[event] = [d];\n  }\n};\n\nplayerjs.Keeper.prototype.execute = function(event, id, data, ctx){\n  if (!this.has(event, id)){\n    return false;\n  }\n\n  var keep = [],\n    execute = [];\n\n  for (var i=0; i< this.data[event].length; i++){\n    var d = this.data[event][i];\n\n    // There are omni events, in that they do not have an id. i.e \"ready\".\n    // Or there is an ID and we only want to execute the right id'd method.\n    if (playerjs.isNone(id) || (!playerjs.isNone(id) && d.id === id )){\n\n      execute.push({\n        cb: d.cb,\n        ctx: d.ctx? d.ctx: ctx,\n        data: data\n      });\n\n      // If we only wanted to execute this once.\n      if (d.one === false){\n        keep.push(d);\n      }\n    } else {\n      keep.push(d);\n    }\n  }\n\n  if (keep.length === 0){\n    delete this.data[event];\n  } else {\n    this.data[event] = keep;\n  }\n\n  // We need to execute everything after we deal with the one stuff. otherwise\n  // we have issues to order of operations.\n  for (var n=0; n < execute.length; n++){\n    var e = execute[n];\n    e.cb.call(e.ctx, e.data);\n  }\n};\n\nplayerjs.Keeper.prototype.on = function(id, event, cb, ctx){\n  this.add(id, event, cb, ctx, false);\n};\n\nplayerjs.Keeper.prototype.one = function(id, event, cb, ctx){\n  this.add(id, event, cb, ctx, true);\n};\n\nplayerjs.Keeper.prototype.off = function(event, cb){\n  // We should probably restructure so this is a bit less of a pain.\n  var listeners = [];\n\n  if (!this.data.hasOwnProperty(event)){\n    return listeners;\n  }\n\n  var keep = [];\n\n  // Loop through everything.\n  for (var i=0; i< this.data[event].length; i++){\n    var data = this.data[event][i];\n    // If we only keep if there was a CB and the CB is there.\n    if (!playerjs.isNone(cb) && data.cb !== cb) {\n      keep.push(data);\n    } else if (!playerjs.isNone(data.id)) {\n      listeners.push(data.id);\n    }\n  }\n\n  if (keep.length === 0){\n    delete this.data[event];\n  } else {\n    this.data[event] = keep;\n  }\n\n  return listeners;\n};\n\n/*\n* Player.js is a javascript library for interacting with iframes via\n* postMessage that use an Open Player Spec\n*\n*/\n\nplayerjs.Player = function(elem, options){\n  if (!(this instanceof playerjs.Player)) {\n    return new playerjs.Player(elem, options);\n  }\n  this.init(elem, options);\n};\n\nplayerjs.EVENTS = {\n  READY: 'ready',\n  PLAY: 'play',\n  PAUSE: 'pause',\n  ENDED: 'ended',\n  TIMEUPDATE: 'timeupdate',\n  PROGRESS: 'progress',\n  ERROR: 'error'\n};\n\nplayerjs.EVENTS.all = function(){\n  var all = [];\n  for (var key in playerjs.EVENTS) {\n    if (playerjs.has(playerjs.EVENTS, key) && playerjs.isString(playerjs.EVENTS[key])) {\n      all.push(playerjs.EVENTS[key]);\n    }\n  }\n  return all;\n};\n\nplayerjs.METHODS = {\n  PLAY: 'play',\n  PAUSE: 'pause',\n  GETPAUSED: 'getPaused',\n  MUTE: 'mute',\n  UNMUTE: 'unmute',\n  GETMUTED: 'getMuted',\n  SETVOLUME: 'setVolume',\n  GETVOLUME: 'getVolume',\n  GETDURATION: 'getDuration',\n  SETCURRENTTIME: 'setCurrentTime',\n  GETCURRENTTIME:'getCurrentTime',\n  SETLOOP: 'setLoop',\n  GETLOOP: 'getLoop',\n  REMOVEEVENTLISTENER: 'removeEventListener',\n  ADDEVENTLISTENER: 'addEventListener'\n};\n\nplayerjs.METHODS.all = function(){\n  var all = [];\n  for (var key in playerjs.METHODS) {\n    if (playerjs.has(playerjs.METHODS, key) && playerjs.isString(playerjs.METHODS[key])) {\n      all.push(playerjs.METHODS[key]);\n    }\n  }\n  return all;\n};\n\nplayerjs.READIED = [];\n\nplayerjs.Player.prototype.init = function(elem, options){\n\n  var self = this;\n\n  if (playerjs.isString(elem)){\n    elem = document.getElementById(elem);\n  }\n\n  this.elem = elem;\n\n  // make sure we have an iframe\n  playerjs.assert(elem.nodeName === 'IFRAME',\n    'playerjs.Player constructor requires an Iframe, got \"'+elem.nodeName+'\"');\n  playerjs.assert(elem.src,\n    'playerjs.Player constructor requires a Iframe with a \\'src\\' attribute.');\n\n  // Figure out the origin of where we are sending messages.\n  this.origin = playerjs.origin(elem.src);\n\n  // Event handling.\n  this.keeper = new playerjs.Keeper();\n\n  // Queuing before ready.\n  this.isReady = false;\n  this.queue = [];\n\n  // Assume that everything is supported, unless we know otherwise.\n  this.events = playerjs.EVENTS.all();\n  this.methods = playerjs.METHODS.all();\n\n  if (playerjs.POST_MESSAGE){\n    // Set up the reciever.\n    playerjs.addEvent(window, 'message', function(e){\n      self.receive(e);\n    });\n  } else {\n    playerjs.log('Post Message is not Available.');\n  }\n\n  // See if we caught the src event first, otherwise assume we haven't loaded\n  if (playerjs.indexOf(playerjs.READIED, elem.src) > -1){\n    self.loaded = true;\n  } else {\n    // Try the onload event, just lets us give another test.\n    this.elem.onload = function(){\n      self.loaded = true;\n    };\n  }\n};\n\nplayerjs.Player.prototype.send = function(data, callback, ctx){\n  // Add the context and version to the data.\n  data.context = playerjs.CONTEXT;\n  data.version = playerjs.VERSION;\n\n  // We are expecting a response.\n  if (callback) {\n    // Create a UUID\n    var id = this.keeper.getUUID();\n\n    // Set the listener.\n    data.listener = id;\n\n    // Only hang on to this listener once.\n    this.keeper.one(id, data.method, callback, ctx);\n  }\n\n  if (!this.isReady && data.value !== 'ready'){\n    playerjs.log('Player.queue', data);\n    this.queue.push(data);\n    return false;\n  }\n\n  playerjs.log('Player.send', data, this.origin);\n\n  if (this.loaded === true){\n    this.elem.contentWindow.postMessage(JSON.stringify(data), this.origin);\n  }\n\n  return true;\n};\n\nplayerjs.Player.prototype.receive = function(e){\n  playerjs.log('Player.receive', e);\n\n  if (e.origin !== this.origin){\n    return false;\n  }\n\n  var data;\n  try {\n    data = JSON.parse(e.data);\n  } catch (err){\n    // Not a valid response.\n    return false;\n  }\n\n  // abort if this message wasn't a player.js message\n  if (data.context !== playerjs.CONTEXT) {\n    return false;\n  }\n\n  // We need to determine if we are ready.\n  if (data.event === 'ready' && data.value && data.value.src === this.elem.src){\n    this.ready(data);\n  }\n\n  if (this.keeper.has(data.event, data.listener)){\n    this.keeper.execute(data.event, data.listener, data.value, this);\n  }\n};\n\n\nplayerjs.Player.prototype.ready = function(data){\n\n  if (this.isReady === true){\n    return false;\n  }\n\n  // If we got a list of supported methods, we should set them.\n  if (data.value.events){\n    this.events = data.value.events;\n  }\n  if (data.value.methods){\n    this.methods = data.value.methods;\n  }\n\n  // set ready.\n  this.isReady = true;\n  this.loaded = true;\n\n  // Clear the queue\n  for (var i=0; i<this.queue.length; i++){\n    var obj = this.queue[i];\n\n    playerjs.log('Player.dequeue', obj);\n\n    if (data.event === 'ready'){\n      this.keeper.execute(obj.event, obj.listener, true, this);\n    }\n    this.send(obj);\n  }\n  this.queue = [];\n};\n\nplayerjs.Player.prototype.on = function(event, callback, ctx){\n  var id = this.keeper.getUUID();\n\n  if (event === 'ready'){\n    // We only want to call ready once.\n    this.keeper.one(id, event, callback, ctx);\n  } else {\n    this.keeper.on(id, event, callback, ctx);\n  }\n\n  this.send({\n    method: 'addEventListener',\n    value: event,\n    listener: id\n  });\n\n  return true;\n};\n\nplayerjs.Player.prototype.off = function(event, callback){\n\n  var listeners = this.keeper.off(event, callback);\n  playerjs.log('Player.off', listeners);\n\n  if (listeners.length > 0) {\n    for (var i in listeners){\n      this.send({\n        method: 'removeEventListener',\n        value: event,\n        listener: listeners[i]\n      });\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// Based on what ready passed back, we can determine if the events/method are\n// supported by the player.\nplayerjs.Player.prototype.supports = function(evtOrMethod, names){\n\n  playerjs.assert(playerjs.indexOf(['method', 'event'], evtOrMethod) > -1,\n    'evtOrMethod needs to be either \"event\" or \"method\" got ' + evtOrMethod);\n\n  // Make everything an array.\n  names = playerjs.isArray(names) ? names : [names];\n\n  var all = evtOrMethod === 'event' ? this.events : this.methods;\n\n  for (var i=0; i < names.length; i++){\n    if (playerjs.indexOf(all, names[i]) === -1){\n      return false;\n    }\n  }\n\n  return true;\n};\n\n//create function to add to the Player prototype\nfunction createPrototypeFunction(name) {\n\n  return function() {\n\n    var data = {\n      method: name\n    };\n\n    var args = Array.prototype.slice.call(arguments);\n\n    //for getters add the passed parameters to the arguments for the send call\n    if (/^get/.test(name)) {\n      playerjs.assert(args.length > 0, 'Get methods require a callback.');\n      args.unshift(data);\n    } else {\n      //for setter add the first arg to the value field\n      if (/^set/.test(name)) {\n        playerjs.assert(args.length !== 0, 'Set methods require a value.');\n        data.value = args[0];\n      }\n      args = [data];\n    }\n\n    this.send.apply(this, args);\n  };\n}\n\n// Loop through the methods to add them to the prototype.\nfor (var i = 0, l = playerjs.METHODS.all().length; i < l; i++) {\n  var methodName = playerjs.METHODS.all()[i];\n\n  // We don't want to overwrite existing methods.\n  if (!playerjs.Player.prototype.hasOwnProperty(methodName)){\n    playerjs.Player.prototype[methodName] = createPrototypeFunction(methodName);\n  }\n}\n\n// We need to catch all ready events in case the iframe is ready before the\n// player is invoked.\nplayerjs.addEvent(window, 'message', function(e){\n  var data;\n  try {\n    data = JSON.parse(e.data);\n  } catch (err){\n    return false;\n  }\n\n  // abort if this message wasn't a player.js message\n  if (data.context !== playerjs.CONTEXT) {\n    return false;\n  }\n\n  // We need to determine if we are ready.\n  if (data.event === 'ready' && data.value && data.value.src){\n    playerjs.READIED.push(data.value.src);\n  }\n});\n\n/*\n* Does all the wiring up for the backend.\n*\n* var receiver = new playerjs.Receiver();\n* receiver.on('play', function(){ video.play() });\n* receiver.on('getDuration', function(callback){ callback(video.duration) });\n* receiver.emit('timeupdate', {});\n*/\n\nplayerjs.Receiver = function(events, methods){\n  this.init(events, methods);\n};\n\nplayerjs.Receiver.prototype.init = function(events, methods){\n  var self = this;\n\n  // Deal with the ready crap.\n  this.isReady = false;\n\n  // Bind the window message.\n  this.origin = playerjs.origin(document.referrer);\n\n  //Create a holder for all the methods.\n  this.methods = {};\n\n  // holds all the information about what's supported\n  this.supported = {\n    events: events ? events : playerjs.EVENTS.all(),\n    methods: methods ? methods : playerjs.METHODS.all()\n  };\n\n  // Deals with the adding and removing of event listeners.\n  this.eventListeners = {};\n\n  // We can't send any messages.\n  this.reject = !(window.self !== window.top && playerjs.POST_MESSAGE);\n\n  // We aren't in an iframe, don't listen.\n  if (!this.reject){\n    playerjs.addEvent(window, 'message', function(e){\n      self.receive(e);\n    });\n  }\n};\n\nplayerjs.Receiver.prototype.receive = function(e){\n  // Only want to listen to events that came from our origin.\n  if (e.origin !== this.origin){\n    return false;\n  }\n\n  // Browsers that support postMessage also support JSON.\n  var data = {};\n  if (playerjs.isObject(e.data)){\n    data = e.data;\n  } else {\n    try {\n      data = window.JSON.parse(e.data);\n    } catch (err){\n      playerjs.log('JSON Parse Error', err);\n    }\n  }\n\n  playerjs.log('Receiver.receive', e, data);\n\n  // Nothing for us to do.\n  if (!data.method){\n    return false;\n  }\n\n  // make sure the context is correct.\n  if (data.context !== playerjs.CONTEXT){\n    return false;\n  }\n\n  // Make sure we have a valid method.\n  if (playerjs.indexOf(playerjs.METHODS.all(), data.method) === -1){\n    this.emit('error', {\n      code: 2,\n      msg: 'Invalid Method \"'+data.method+'\"'\n    });\n    return false;\n  }\n\n  // See if we added a listener\n  var listener = !playerjs.isNone(data.listener) ? data.listener : null;\n\n  // Add Event Listener.\n  if (data.method === 'addEventListener') {\n    if (this.eventListeners.hasOwnProperty(data.value)) {\n      //If the listener is the same, i.e. null only add it once.\n      if (playerjs.indexOf(this.eventListeners[data.value], listener) === -1){\n        this.eventListeners[data.value].push(listener);\n      }\n    } else {\n      this.eventListeners[data.value] = [listener];\n    }\n\n    if (data.value === 'ready' && this.isReady){\n      this.ready();\n    }\n  }\n  // Remove the event listener.\n  else if (data.method === 'removeEventListener') {\n    if (this.eventListeners.hasOwnProperty(data.value)) {\n      var index = playerjs.indexOf(this.eventListeners[data.value], listener);\n\n      // if we find the element, remove it.\n      if (index > -1){\n        this.eventListeners[data.value].splice(index, 1);\n      }\n\n      if (this.eventListeners[data.value].length === 0){\n        delete this.eventListeners[data.value];\n      }\n    }\n  }\n  // Go get it.\n  else {\n    this.get(data.method, data.value, listener);\n  }\n};\n\nplayerjs.Receiver.prototype.get = function(method, value, listener){\n  var self = this;\n\n  // Now lets do it.\n  if (!this.methods.hasOwnProperty(method)){\n    this.emit('error', {\n      code: 3,\n      msg: 'Method Not Supported\"'+method+'\"'\n    });\n    return false;\n  }\n\n  var func = this.methods[method];\n\n  if (method.substr(0,3) === 'get') {\n    var callback = function(val){\n      self.send(method, val, listener);\n    };\n    func.call(this, callback);\n  } else {\n    func.call(this, value);\n  }\n};\n\nplayerjs.Receiver.prototype.on = function(event, callback){\n  this.methods[event] = callback;\n};\n\nplayerjs.Receiver.prototype.send = function(event, value, listener){\n\n  playerjs.log('Receiver.send', event, value, listener);\n\n  if (this.reject){\n    // We are not in a frame, or we don't support POST_MESSAGE\n    playerjs.log('Receiver.send.reject', event, value, listener);\n    return false;\n  }\n\n  var data = {\n    context: playerjs.CONTEXT,\n    version: playerjs.VERSION,\n    event: event\n  };\n\n  if (!playerjs.isNone(value)){\n    data.value = value;\n  }\n\n  if (!playerjs.isNone(listener)){\n    data.listener = listener;\n  }\n\n  var msg = JSON.stringify(data);\n  window.parent.postMessage(msg, this.origin === \"\" ? '*' : this.origin);\n};\n\nplayerjs.Receiver.prototype.emit = function(event, value){\n\n  if (!this.eventListeners.hasOwnProperty(event)){\n    return false;\n  }\n\n  playerjs.log('Instance.emit', event, value, this.eventListeners[event]);\n\n  for (var i=0; i < this.eventListeners[event].length; i++){\n    var listener = this.eventListeners[event][i];\n    this.send(event, value, listener);\n  }\n\n  return true;\n};\n\nplayerjs.Receiver.prototype.ready = function(){\n  playerjs.log('Receiver.ready');\n  this.isReady = true;\n\n  var data = {\n    src: window.location.toString(),\n    events: this.supported.events,\n    methods: this.supported.methods\n  };\n\n  if (!this.emit('ready', data)){\n    this.send('ready', data);\n  }\n\n};\n\nplayerjs.HTML5Adapter = function(video){\n  if (!(this instanceof playerjs.HTML5Adapter)) {\n    return new playerjs.HTML5Adapter(video);\n  }\n  this.init(video);\n};\n\nplayerjs.HTML5Adapter.prototype.init = function(video){\n\n  playerjs.assert(video, 'playerjs.HTML5Adapter requires a video element');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  /* EVENTS */\n  video.addEventListener('playing', function(){\n    receiver.emit('play');\n  });\n\n  video.addEventListener('pause', function(){\n    receiver.emit('pause');\n  });\n\n  video.addEventListener('ended', function(){\n    receiver.emit('ended');\n  });\n\n  video.addEventListener('timeupdate', function(){\n    receiver.emit('timeupdate', {\n      seconds: video.currentTime,\n      duration: video.duration\n    });\n  });\n\n  video.addEventListener('progress', function(){\n    receiver.emit('buffered', {\n      percent: video.buffered.length\n    });\n  });\n\n  /* Methods */\n  receiver.on('play', function(){\n    video.play();\n  });\n\n  receiver.on('pause', function(){\n    video.pause();\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(video.paused);\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(video.currentTime);\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    video.currentTime = value;\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(video.duration);\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(video.volume * 100);\n  });\n\n  receiver.on('setVolume', function(value){\n    video.volume = value/100;\n  });\n\n  receiver.on('mute', function(){\n    video.muted = true;\n  });\n\n  receiver.on('unmute', function(){\n    video.muted = false;\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(video.muted);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(video.loop);\n  });\n\n  receiver.on('setLoop', function(value){\n    video.loop = value;\n  });\n};\n\n/* Call when the video has loaded */\nplayerjs.HTML5Adapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\n//http://www.longtailvideo.com/support/jw-player/28851/javascript-api-reference\nplayerjs.JWPlayerAdapter = function(player){\n  if (!(this instanceof playerjs.JWPlayerAdapter)) {\n    return new playerjs.JWPlayerAdapter(player);\n  }\n  this.init(player);\n};\n\nplayerjs.JWPlayerAdapter.prototype.init = function(player){\n\n  playerjs.assert(player, 'playerjs.JWPlayerAdapter requires a player object');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  // JWPlayer doesn't have a seLoop, so we can do it ourself.\n  this.looped = false;\n\n  /* EVENTS */\n  player.on('pause', function(){\n    receiver.emit('pause');\n  });\n\n  player.on('play', function(){\n    receiver.emit('play');\n  });\n\n  player.on('time', function(e){\n    var seconds = e.position,\n      duration = e.duration;\n\n    if (!seconds || !duration){\n      return false;\n    }\n\n    var value = {\n      seconds: seconds,\n      duration: duration\n    };\n    receiver.emit('timeupdate', value);\n  });\n\n  var self = this;\n  player.on('complete', function(){\n    // Fake the looping\n    if (self.looped === true){\n      // By default jwplayer seeks after play.\n      player.seek(0);\n    } else {\n      // Else throw the ended event.\n      receiver.emit('ended');\n    }\n  });\n\n  player.on('error', function(){\n    receiver.emit('error');\n  });\n\n\n  /* METHODS */\n  receiver.on('play', function(){\n    player.play(true);\n  });\n\n  receiver.on('pause', function(){\n    player.pause(true);\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(player.getState().toLowerCase() !== 'PLAYING'.toLowerCase());\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(player.getPosition());\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    player.seek(value);\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(player.getDuration());\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(player.getVolume());\n  });\n\n  receiver.on('setVolume', function(value){\n    player.setVolume(value);\n  });\n\n  receiver.on('mute', function(){\n    player.setMute(true);\n  });\n\n  receiver.on('unmute', function(){\n    player.setMute(false);\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(player.getMute() === true);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(this.looped);\n  }, this);\n\n  receiver.on('setLoop', function(value){\n    this.looped = value;\n  }, this);\n};\n\n/* Call when the video.js is ready */\nplayerjs.JWPlayerAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\nplayerjs.MockAdapter = function(){\n  if (!(this instanceof playerjs.MockAdapter)) {\n    return new playerjs.MockAdapter();\n  }\n  this.init();\n};\n\nplayerjs.MockAdapter.prototype.init = function(){\n\n  // Our mock video\n  var video = {\n    duration: 20,\n    currentTime: 0,\n    interval: null,\n    timeupdate: function(){},\n    volume: 100,\n    mute: false,\n    playing: false,\n    loop : false,\n    play: function(){\n      video.interval = setInterval(function(){\n        video.currentTime += 0.25;\n        video.timeupdate({\n          seconds: video.currentTime,\n          duration: video.duration\n        });\n      }, 250);\n      video.playing = true;\n    },\n    pause: function(){\n      clearInterval(video.interval);\n      video.playing = false;\n    }\n  };\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  receiver.on('play', function(){\n    var self = this;\n    video.play();\n    this.emit('play');\n    video.timeupdate = function(data){\n      self.emit('timeupdate', data);\n    };\n  });\n\n  receiver.on('pause', function(){\n    video.pause();\n    this.emit('pause');\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(!video.playing);\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(video.currentTime);\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    video.currentTime = value;\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(video.duration);\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(video.volume);\n  });\n\n  receiver.on('setVolume', function(value){\n    video.volume = value;\n  });\n\n  receiver.on('mute', function(){\n    video.mute = true;\n  });\n\n  receiver.on('unmute', function(){\n    video.mute = false;\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(video.mute);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(video.loop);\n  });\n\n  receiver.on('setLoop', function(value){\n    video.loop = value;\n  });\n};\n\n/* Call when the video has loaded */\nplayerjs.MockAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\nplayerjs.VideoJSAdapter = function(player){\n  if (!(this instanceof playerjs.VideoJSAdapter)) {\n    return new playerjs.VideoJSAdapter(player);\n  }\n  this.init(player);\n};\n\nplayerjs.VideoJSAdapter.prototype.init = function(player){\n\n  playerjs.assert(player, 'playerjs.VideoJSReceiver requires a player object');\n\n  // Set up the actual receiver\n  var receiver = this.receiver = new playerjs.Receiver();\n\n  /* EVENTS */\n  player.on(\"pause\", function(){\n    receiver.emit('pause');\n  });\n\n  player.on(\"play\", function(){\n    receiver.emit('play');\n  });\n\n  player.on(\"timeupdate\", function(e){\n    var seconds = player.currentTime(),\n      duration = player.duration();\n\n    if (!seconds || !duration){\n      return false;\n    }\n\n    var value = {\n      seconds: seconds,\n      duration: duration\n    };\n    receiver.emit('timeupdate', value);\n  });\n\n  player.on(\"ended\", function(){\n    receiver.emit('ended');\n  });\n\n  player.on(\"error\", function(){\n    receiver.emit('error');\n  });\n\n\n  /* METHODS */\n  receiver.on('play', function(){\n    player.play();\n  });\n\n  receiver.on('pause', function(){\n    player.pause();\n  });\n\n  receiver.on('getPaused', function(callback){\n    callback(player.paused());\n  });\n\n  receiver.on('getCurrentTime', function(callback){\n    callback(player.currentTime());\n  });\n\n  receiver.on('setCurrentTime', function(value){\n    player.currentTime(value);\n  });\n\n  receiver.on('getDuration', function(callback){\n    callback(player.duration());\n  });\n\n  receiver.on('getVolume', function(callback){\n    callback(player.volume() * 100);\n  });\n\n  receiver.on('setVolume', function(value){\n    player.volume(value/100);\n  });\n\n  receiver.on('mute', function(){\n    player.volume(0);\n  });\n\n  receiver.on('unmute', function(){\n    player.volume(1);\n  });\n\n  receiver.on('getMuted', function(callback){\n    callback(player.volume() === 0);\n  });\n\n  receiver.on('getLoop', function(callback){\n    callback(player.loop());\n  });\n\n  receiver.on('setLoop', function(value){\n    player.loop(value);\n  });\n};\n\n/* Call when the video.js is ready */\nplayerjs.VideoJSAdapter.prototype.ready = function(){\n  this.receiver.ready();\n};\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return playerjs\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = playerjs\n  } else {\n    window.playerjs = playerjs;\n  }\n})(window, document);\n","import TraktApi, { ITraktScrobbleData, ITraktApiOptions, ITraktScobbleResult, IStorage, LocalStorageAdapter, ITraktIDs } from \"./TraktApi\";\nimport TraktScrobble, { TraktScrobbleState, PlaybackState } from \"./TraktScrobble\";\nimport ConnectButton from \"./ui/ConnectButton\";\nimport StatusButton from \"./ui/StatusButton\";\nimport TraktHistory from \"./TraktHistory\";\nimport TraktLookup from \"./TraktLookup\";\n\nimport { createContext } from 'react';\nimport { render } from \"react-dom\";\nimport { jsx, CacheProvider } from \"@emotion/core\";\nimport createCache from \"@emotion/cache\";\nimport { SimpleEventDispatcher } from \"ste-simple-events\";\nimport * as playerjs from \"player.js\";\n\nexport const RollerContext = createContext<TraktRoller | undefined>(undefined);\n\nexport interface ITraktRollerOptions extends ITraktApiOptions {\n  website?: ITraktRollerWebsite;\n}\n\nexport interface ITraktRollerWebsite {\n  loadPlayer(): Promise<playerjs.Player>;\n  loadScrobbleData(): Partial<ITraktScrobbleData> | null;\n  getConnectButtonParent(): HTMLElement |null;\n  getStatusButtonParent(): HTMLElement | null;\n}\n\nexport enum TraktRollerState {\n  Undefined = 'undefined',\n  Lookup = 'lookup',\n  NotFound = 'notfound',\n  Scrobbling = 'scrobbling',\n  Error = 'error',\n};\n\nexport type TraktRollerCombinedState = TraktRollerState | TraktScrobbleState;\n\nconst TraktUrlRegex = /^https:\\/\\/trakt\\.tv\\/(movies|shows)\\/([\\w-]+)(?:\\/seasons\\/(\\d+)\\/episodes\\/(\\d+))?$/;\n\nconst ScrobblingEnabledKey: string = 'TraktRoller.enabled';\n\nexport default class TraktRoller {\n  public onStateChanged = new SimpleEventDispatcher<TraktRollerCombinedState>();\n  public onEnabledChanged = new SimpleEventDispatcher<boolean>();\n\n  private _state: TraktRollerState;\n  private _error: string | undefined;\n\n  private _website: ITraktRollerWebsite;\n  private _player?: playerjs.Player;\n  private _storage: IStorage;\n  private _api: TraktApi;\n  private _looker: TraktLookup;\n  private _scrobble: TraktScrobble;\n  private _history: TraktHistory;\n  private _enabled: boolean = false;\n\n  private _duration: number = 0;\n  private _currentTime: number = 0;\n\n  constructor(options: ITraktRollerOptions) {\n    if (!options.website) throw new Error(\"'website' option cannot be undefined\");\n\n    console.log(\"TraktRoller\");\n\n    this._state = TraktRollerState.Undefined;\n\n    this._website = options.website;\n\n    this._storage = options.storage || new LocalStorageAdapter();\n    this._loadPrefs();\n\n    this._api = new TraktApi(options);\n    this._api.onAuthenticationChanged.sub(this._onAuthenticationChange.bind(this));\n    this._api.loadTokens();\n\n    this._history = new TraktHistory(this._api);\n\n    this._looker = new TraktLookup(this._api);\n\n    this._scrobble = new TraktScrobble(this._api);\n    this._scrobble.enabled = this.enabled;\n    this._scrobble.onStateChanged.sub(this._onScrobbleStatusChanged.bind(this));\n    this._scrobble.onScrobbled.sub(this._onScrobbled.bind(this));\n\n    this._createFooterButton();\n    this._waitForPlayer();\n  }\n\n  public get scrobble(): TraktScrobble {\n    return this._scrobble;\n  }\n\n  public get history(): TraktHistory {\n    return this._history;\n  }\n\n  public get state(): TraktRollerCombinedState {\n    if (this._state != TraktRollerState.Scrobbling) {\n      return this._state;\n    } else {\n      return this._scrobble.state;\n    }\n  }\n\n  private _setState(value: TraktRollerState) {\n    if (this._state == value) return;\n    this._state = value;\n    this.onStateChanged.dispatch(this.state);\n  }\n\n  public get error(): string | undefined {\n    if (this._state != TraktRollerState.Scrobbling) {\n      return this._error;\n    } else {\n      return this._scrobble.error;\n    }\n  }\n\n  public get enabled(): boolean {\n    return this._enabled;\n  }\n\n  public set enabled(value: boolean) {\n    if (this._enabled === value) return;\n    this._enabled = value;\n\n    this._storage.setValue(ScrobblingEnabledKey, value ? \"true\" : \"false\");\n    this._scrobble.enabled = value;\n\n    this.onEnabledChanged.dispatch(value);\n  }\n\n  public async lookupTraktUrl(url: string) {\n    let match = TraktUrlRegex.exec(url);\n    if (!match) {\n      this._error = \"Unrecognized Trakt URL.\";\n      this._setState(TraktRollerState.Error);\n      return;\n    }\n    \n    let data = this._baseScrobbleData();\n    if (match[1] == 'movies') {\n      data.movie = {\n        ids: {\n          slug: match[2]\n        }\n      };\n    } else {\n      data.show = {\n        ids: {\n          slug: match[2]\n        }\n      };\n      if (match[3] && match[4]) {\n        data.episode = {\n          season: parseInt(match[3]),\n          number: parseInt(match[4])\n        };\n      } else {\n        if (this._scrobble.data && this._scrobble.data.episode) {\n          data.episode = this._scrobble.data.episode;\n        } else {\n          let pageData = this._getScrobbleData();\n          data.episode = pageData?.episode;\n        }\n      }\n    }\n\n    await this._lookup(data);\n  }\n\n  private async _loadPrefs() {\n    this._enabled = await this._storage.getValue(ScrobblingEnabledKey) === \"true\";\n  }\n\n  private async _waitForPlayer() {\n    try {\n      this._player = await this._website.loadPlayer();\n      this._player.on(playerjs.EVENTS.READY, () => this._playerReady());\n    } catch (e) {\n      console.log(`TraktRoller: No player found on page`);\n    }\n  }\n\n  private _playerReady() {\n    if (!this._api.isAuthenticated()) return;\n    if (!this._player) return;\n\n    let data = this._getScrobbleData();\n    if (!data) return;\n\n    this._player.on(playerjs.EVENTS.TIMEUPDATE,  (info: { seconds: number, duration: number }) => this._onTimeChanged(info));\n    this._player.on(playerjs.EVENTS.PLAY,  () => this._onPlaybackStateChange(PlaybackState.Playing));\n    this._player.on(playerjs.EVENTS.PAUSE, () => this._onPlaybackStateChange(PlaybackState.Paused));\n    this._player.on(playerjs.EVENTS.ENDED, () => this._onPlaybackStateChange(PlaybackState.Ended));\n    this._player.on(playerjs.EVENTS.ERROR, () => this._onPlaybackStateChange(PlaybackState.Ended));\n\n    this._createStatusButton();\n\n    this._lookup(data);\n  }\n\n  private async _lookup(data: ITraktScrobbleData) {\n    try {\n      this._setState(TraktRollerState.Lookup);\n      let result = await this._looker.start(data);\n      if (result == null) {\n        this._setState(TraktRollerState.NotFound);\n      } else {\n        this._scrobble.scrobble(result);\n        this._setState(TraktRollerState.Scrobbling);\n      }\n    } catch (error) {\n      if (error.associatedObject) {\n        console.error(error.message, error.associatedObject);\n      } else {\n        console.error(error.message);\n      }\n      this._error = error.message;\n      this._setState(TraktRollerState.Error);\n    }\n  }\n\n  private _onTimeChanged(info: { seconds: number, duration: number }) {\n    this._currentTime = info.seconds;\n    this._duration = info.duration;\n    this._scrobble.setPlaybackTime(info.seconds, info.duration);\n  }\n\n  private _onPlaybackStateChange(state: PlaybackState) {\n    this._scrobble.setPlaybackState(state, this._getProgress());\n  }\n\n  private _getProgress(): number {\n    if (!this._duration) {\n      console.warn(`TraktRoller: Duration is not set (${this._duration})`);\n      return 0;\n    } else if (this._duration === undefined) {\n      console.warn(\"TraktRoller: Current time is not set\");\n      return 0;\n    }\n    \n    return this._currentTime / this._duration * 100;\n  }\n\n  private _baseScrobbleData(): ITraktScrobbleData {\n    let buildDate = new Date(process.env.BUILD_DATE);\n    return {\n      progress: this._getProgress(),\n      app_version: process.env.VERSION,\n      app_date: `${buildDate.getFullYear()}-${buildDate.getMonth() + 1}-${buildDate.getDate()}`\n    };\n  }\n\n  private _getScrobbleData(): ITraktScrobbleData |null {\n    const data = this._baseScrobbleData();\n\n    const result = this._website.loadScrobbleData();\n    if (!result) {\n      console.error(\"TraktRoller: Could not extract scrobble data\");\n      return null;\n    }\n\n    return Object.assign(data, result);\n  }\n\n  private _onAuthenticationChange(isAuthenticated: boolean) {\n    if (!isAuthenticated) {\n      this._api.checkAuthenticationResult(window.location.href);\n    }\n  }\n\n  private _onScrobbleStatusChanged(state: TraktScrobbleState) {\n    if (this._state == TraktRollerState.Scrobbling) {\n      this.onStateChanged.dispatch(this.state);\n    }\n  }\n\n  private _onScrobbled(result: ITraktScobbleResult) {\n    let ids: ITraktIDs | undefined = undefined;\n    if (result.movie && result.movie.ids) {\n      ids = result.movie.ids;\n    } else if (result.episode && result.episode.ids) {\n      ids = result.episode.ids;\n    }\n\n    if (!ids || !ids.trakt) {\n      console.error(`TraktRoller: Srobble didn't return any trakt ids`, result);\n      return;\n    }\n\n    this._history.add(ids.trakt, {\n      id: result.id,\n      watched_at: new Date().toISOString(),\n      action: \"scrobble\",\n      type: (result.movie ? 'movie' : 'episode'),\n      movie: result.movie,\n      show: result.show,\n      episode: result.episode\n    });\n  }\n\n  private _createFooterButton() {\n    let footer = this._website.getConnectButtonParent();\n    if (!footer) {\n      console.error(\"TraktRoller: Could not find footer to add trakt connect button\");\n      return;\n    }\n\n    const cache = createCache({\n      container: footer\n    });\n\n    render(\n      <CacheProvider value={ cache }>\n        <ConnectButton api={ this._api } />\n      </CacheProvider>,\n      footer\n    );\n  }\n\n  private _createStatusButton() {\n    console.log(`TraktRoller: _createStatusButton`);\n    let container = this._website.getStatusButtonParent();\n    if (!container) {\n      console.error(\"TraktRoller: Could not find share row to add trakt status button\");\n      return;\n    }\n\n    const cache = createCache({\n      container: container\n    });\n\n    render((\n      <CacheProvider value={ cache }>\n        <RollerContext.Provider value={ this }>\n          <StatusButton roller={ this } />\n        </RollerContext.Provider>\n      </CacheProvider>\n    ), container);\n  }\n}\n","import { ITraktRollerWebsite } from \"../TraktRoller\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\n\nimport * as playerjs from \"player.js\";\n\nconst EpisodeRegex = /Episode ([\\d\\.]+)/;\nconst SeasonRegex = /Season (\\d+)/;\n\nconst MovieRegexes = [\n  /Movie$/i,\n  /Movie (Dub)$/i,\n  /Movie (Sub)$/i,\n  /Movie (Dubbed)$/i,\n  /Movie (Subtitled)$/i,\n  /^Movie - /i,\n  /The Movie/i,\n];\n\nexport default class Crunchyroll implements ITraktRollerWebsite {\n  async loadPlayer(): Promise<playerjs.Player> {\n    const player = document.getElementById('vilos-player');\n    if (!player) throw new Error('Player not found');\n    return new playerjs.Player(player);\n  }\n  \n  getConnectButtonParent(): HTMLElement |null {\n    const footer = document.querySelector('#social_media');\n    if (!footer) return null;\n    \n    const container = document.createElement('div');\n    container.className = \"footer-column\";\n    footer.appendChild(container);\n    \n    const shadow = container.attachShadow({ mode: 'closed' });\n    const shadowContainer = document.createElement('div');\n    shadow.appendChild(shadowContainer);\n\n    return shadowContainer;\n  }\n  \n  getStatusButtonParent(): HTMLElement |null {\n    const submenu = document.querySelector('.showmedia-submenu');\n    if (!submenu) return null;\n    \n    const container = document.createElement('div');\n    container.className = \"right\";\n    submenu.appendChild(container);\n\n    const shadow = container.attachShadow({ mode: 'closed' });\n    const shadowContainer = document.createElement('div');\n    shadow.appendChild(shadowContainer);\n\n    return shadowContainer;\n  }\n  \n  loadScrobbleData(): Partial<ITraktScrobbleData> | null {\n    const data: Partial<ITraktScrobbleData> = {};\n    const titleElement = document.querySelector('#showmedia_about_episode_num');\n    if (!titleElement || !titleElement.textContent || titleElement.textContent.length == 0) {\n      console.error(\"TraktRoller: Could not find video title\");\n      return null;\n    }\n    let showTitle = titleElement.textContent.trim();\n    \n    let episodeTitle: string | undefined = undefined;\n    const episodeTitleElement = document.querySelector('#showmedia_about_name');\n    if (episodeTitleElement && episodeTitleElement.textContent) {\n      episodeTitle = episodeTitleElement.textContent.trim();\n      if (episodeTitle) {\n        if (episodeTitle.startsWith(\"\")) {\n          episodeTitle = episodeTitle.substring(1);\n        }\n        if (episodeTitle.endsWith(\"\")) {\n          episodeTitle = episodeTitle.substring(0, episodeTitle.length - 1);\n        }\n      }\n    }\n    \n    let seasonNumber = 1;\n    let episodeNumber = 0;\n    const episodeElement = document.querySelector('#showmedia_about_media h4:nth-child(2)');\n    if (episodeElement && episodeElement.textContent && episodeElement.textContent.length > 0) {\n      const seasonMatch = SeasonRegex.exec(episodeElement.textContent);\n      if (seasonMatch) {\n        seasonNumber = parseInt(seasonMatch[1]);\n      }\n      \n      const episodeMatch = EpisodeRegex.exec(episodeElement.textContent);\n      if (episodeMatch) {\n        episodeNumber = parseFloat(episodeMatch[1]);\n      }\n    }\n    \n    if (episodeTitle && MovieRegexes.some(r => r.test(episodeTitle!))) {\n      data.movie = {\n        title: showTitle\n      };\n    } else {\n      data.show = {\n        title: showTitle\n      };\n      data.episode = {\n        season: seasonNumber,\n        number: episodeNumber,\n        title: episodeTitle\n      };\n    }\n    return data;\n  }\n}","import { ITraktRollerWebsite } from \"../TraktRoller\";\nimport { ITraktScrobbleData } from \"../TraktApi\";\n\nimport * as playerjs from \"player.js\";\n\ninterface TitleData {\n  title?: string;\n  seasonNum?: number;\n  episodeNum?: number;\n}\n\ninterface KaneDimensions {\n  videoType?: string;\n  showName?: string;\n  dateAdded?: string;\n}\n\nexport default class Funimation implements ITraktRollerWebsite {\n  static createPlayerAdapter(videojs: videojs) {\n    videojs('#brightcove-player', {}, function(this: any) {\n      const adapter = new playerjs.VideoJSAdapter(this);\n      adapter.ready();\n    });\n  }\n\n  _decoder: HTMLTextAreaElement = document.createElement('textarea');\n\n  _unescape(input?: string): string | undefined {\n    if (!input) return input;\n    this._decoder.innerHTML = input;\n    return this._decoder.value;\n  }\n\n  async loadPlayer(): Promise<playerjs.Player> {\n    const player = document.getElementById('player');\n    if (!player) throw new Error('Player not found');\n    return new playerjs.Player(player);\n  }\n  \n  getConnectButtonParent(): HTMLElement |null {\n    const footer = document.querySelector('footer > .container > .row > .col-md-10 > .row:nth-child(2) > .col-sm-4');\n    if (!footer) return null;\n    \n    const container = document.createElement('div');\n    container.style.float = \"right\";\n    container.style.clear = \"both\";\n    footer.appendChild(container);\n\n    const shadow = container.attachShadow({ mode: 'closed' });\n    const shadowContainer = document.createElement('div');\n    shadow.appendChild(shadowContainer);\n    \n    return shadowContainer;\n  }\n  \n  getStatusButtonParent(): HTMLElement |null {\n    const submenu = document.querySelector('#video-details > .row > .col-md-10 > .row > .col-sm-6:nth-child(2)');\n    if (!submenu) return null;\n\n    const container = document.createElement('div');\n    container.style.float = \"right\";\n    container.style.margin = \"12px 0\";\n    submenu.appendChild(container);\n\n    const shadow = container.attachShadow({ mode: 'closed' });\n    const shadowContainer = document.createElement('div');\n    shadow.appendChild(shadowContainer);\n\n    return shadowContainer;\n  }\n  \n  loadScrobbleData(): Partial<ITraktScrobbleData> | null {\n    const data: Partial<ITraktScrobbleData> = {};\n    \n    var titleData = (window as any)['TITLE_DATA'] as TitleData;\n    var kaneData = (window as any)['KANE_customdimensions'] as KaneDimensions;\n    if (!titleData || !kaneData) {\n      return null;\n    }\n\n    let year = undefined;\n    if (kaneData.dateAdded) {\n      let parts = kaneData.dateAdded.split('/');\n      if (parts.length == 3) {\n        year = parseInt(parts[2]);\n      }\n    }\n\n    if (kaneData.videoType == 'Movie') {\n      if (!titleData.title) return null;\n      data.movie = {\n        title: kaneData.showName,\n        year: year,\n      };\n    \n    } else if (kaneData.videoType == 'Episode') {\n      if (!kaneData.showName || !titleData.seasonNum || !titleData.episodeNum) return null;\n      data.show = {\n        title: this._unescape(kaneData.showName),\n        year: year,\n      };\n      data.episode = {\n        season: titleData.seasonNum,\n        number: titleData.episodeNum,\n        title: this._unescape(titleData.title),\n      };\n    \n    } else {\n      return null;\n    }\n    \n    return data;\n  }\n}\n","import TraktRoller, { ITraktRollerOptions } from \"./TraktRoller\";\nimport { GreaseMonkeyStorageAdapter } from \"./TraktApi\";\n\nimport Crunchyroll from \"./websites/Crunchyroll\";\nimport Funimation from \"./websites/Funimation\";\n\nconst options: ITraktRollerOptions = {\n  client_id: \"5ac1bf2ba188fc93f941eb0788ef5cb6e0e4bf96b882e914e6d0c17dacc8e7f2\",\n  client_secret: \"3712241a1c467769e6c03336abb5fb9911f8665354d2aaffaa9f817e147a34ca\",\n  storage: new GreaseMonkeyStorageAdapter(),\n  redirect_url: \"\",\n  website: undefined,\n};\n\nconst origin = window.location.origin;\nif (origin == \"https://www.crunchyroll.com\") {\n  options.redirect_url = \"https://www.crunchyroll.com\";\n  options.website = new Crunchyroll();\n\n} else if (origin == \"https://www.funimation.com\") {\n  if (window.videojs) {\n    Funimation.createPlayerAdapter(window.videojs);\n  } else {\n    options.redirect_url = \"https://www.funimation.com\";\n    options.website = new Funimation();\n  }\n}\n\nif (options.website) {\n  new TraktRoller(options);\n}\n"]}